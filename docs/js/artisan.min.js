!function(){"use strict";angular.module("artisan",["ng","ngRoute","ngMessages"])}(),function(){"use strict";angular.module("artisan").factory("Animate",[function(){function t(t){this.callback=t,this.key=null,this.ticks=0}return t.prototype={play:function(){function t(n){e.ticks++,e.callback(n,e.ticks),e.key=window.requestAnimationFrame(t)}var e=this;this.key||t()},pause:function(){this.key&&(window.cancelAnimationFrame(this.key),this.key=null)},playpause:function(){this.key?this.pause():this.play()},doNOTPlay:function(){this.pause()}},t}]),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var r=(new Date).getTime(),o=Math.max(0,16-(r-t)),i=window.setTimeout(function(){e(r+o)},o);return t=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()}(),function(){"use strict";var t=angular.module("artisan");t.factory("Events",["EventsService",function(t){function e(t,e){var n=document.documentElement||document.body.parentNode||document.body,r={x:window.pageXOffset||n.scrollLeft,y:window.pageYOffset||n.scrollTop};if("resize"===t.type){var o={w:this.getWidth(),h:this.getHeight()};this.view=o}var i=a(e),s={x:i.offsetLeft,y:i.offsetTop},u=i.getBoundingClientRect(),c=this.getPage(t);if(c){var l={x:c.x-r.x-u.left,y:c.y-r.y-u.top},f={x:c.x-r.x,y:c.y-r.y};this.relative=l,this.absolute=f}"resize"===this.type&&console.log(this.type),this.originalEvent=t,this.element=e,this.node=i,this.offset=s,this.rect=u}function n(){return self.innerWidth?self.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:void 0}function r(){return self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:void 0}function o(t){var e=["click","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","contextmenu"],n=["touchstart","touchmove","touchend","touchcancel"],r=null;if(-1!==n.indexOf(t.type)){var o=null,i=t.originalEvent?t.originalEvent:t,a=i.touches.length?i.touches:i.changedTouches;a&&a.length&&(o=a[0]),o&&(r={x:o.pageX,y:o.pageY})}else-1!==e.indexOf(t.type)&&(r={x:t.pageX,y:t.pageY});return this.type=t.type,r}function i(t){function n(t){var n=new e(t,l.element);l.listeners.click.apply(this,[n])}function r(t){var n=new e(t,l.element);l.listeners.down.apply(this,[n]),l.removeTouchEvents()}function o(t){var n=new e(t,l.element);l.listeners.move.apply(this,[n])}function i(t){var n=new e(t,l.element);l.listeners.up.apply(this,[n])}function a(t){console.log("onResize",t);var n=new e(t,l.element);l.listeners.resize.apply(this,[n])}function s(t){var n=new e(t,l.element);l.listeners.down.apply(this,[n]),l.removeStandardEvents()}function u(t){var n=new e(t,l.element);l.listeners.move.apply(this,[n])}function c(t){var n=new e(t,l.element);l.listeners.up.apply(this,[n])}this.element=t,this.listeners={},this.standardEvents={click:{key:"click",callback:n},down:{key:"mousedown",callback:r},move:{key:"mousemove",callback:o},up:{key:"mouseup",callback:i},resize:{key:"resize",callback:a}},this.touchEvents={down:{key:"touchstart",callback:s},move:{key:"touchmove",callback:u},up:{key:"touchend",callback:c}};var l=this}function a(t){return t.length?t[0]:t}function s(t){return t.length?t:angular.element(t)}function u(t,e){var n=this,r=this.standardEvents,o=this.touchEvents,i=s(this.element),a=angular.element(window);return angular.forEach(t,function(t,e){if(n.listeners[e]){var s={};s[e]=n.listeners[e],c(s)}n.listeners[e]=t,r[e]&&("resize"===e?a.on(r[e].key,r[e].callback):i.on(r[e].key,r[e].callback)),o[e]&&i.on(o[e].key,o[e].callback)}),e&&e.$on("$destroy",function(){n.remove(t)}),n}function c(t){var e=this,n=this.standardEvents,r=this.touchEvents,o=s(this.element),i=angular.element(window);return angular.forEach(t,function(t,a){n[a]&&("resize"===a?i.off(n[a].key,n[a].callback):o.off(n[a].key,n[a].callback)),r[a]&&o.off(r[a].key,r[a].callback),e.listeners[a]=null}),e}function l(){var t=this,e=t.standardEvents,n=(t.touchEvents,s(t.element));n.off("mousedown",e.down.callback),n.off("mousemove",e.move.callback),n.off("mouseup",e.up.callback)}function f(){var t=this,e=(t.standardEvents,t.touchEvents),n=s(t.element);n.off("touchstart",e.down.callback),n.off("touchmove",e.move.callback),n.off("touchend",e.up.callback)}return e.prototype={getPage:o,getWidth:n,getHeight:r},i.prototype={add:u,remove:c,removeStandardEvents:l,removeTouchEvents:f},i}]),t.service("EventsService",["$window","Utils",function(t,e){function n(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){console.log("handlePassiveEvents.isSupprted",t)}return t}!function(){if(window.addEventListener){var t={passive:!0,capture:!1};if(n()){var e=EventTarget.prototype.addEventListener;!function(e){EventTarget.prototype.addEventListener=function(n,r,o){var i="object"==typeof o,a=i?o.capture:o;o=i?o:{},o.passive=void 0!==o.passive?o.passive:t.passive,o.capture=void 0!==a?a:t.capture,e.call(this,n,r,o)}}(e)}}}(),this.hasPassiveEvents=n}])}(),function(){"use strict";angular.module("artisan").filter("notIn",["$filter",function(t){return function(e,n,r){if(n)return t("filter")(e,function(t){for(var e=0;e<n.length;e++)if(n[e][r]===t[r])return!1;return!0})}}])}(),function(){"use strict";angular.module("artisan").factory("Point",[function(){function t(t,e){this.x=t||0,this.y=e||0}return t.mult=function(t,e){return t.x*=e,t.y*=e,t},t.prototype={mult:function(e){return t.mult(this,e)},offset:function(t,e){return this.x+=t,this.y+=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setPos:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clone:function(){return new t(this.x,this.y)},toString:function(){return"{"+this.x+","+this.y+"}"}},t}])}(),function(){"use strict";angular.module("artisan").factory("Rect",[function(){function t(t,e,n,r){this.x=t||0,this.y=e||0,this.w=n||0,this.h=r||0}return t.mult=function(t,e){return t.x*=e,t.y*=e,t.w*=e,t.h*=e,t},t.prototype={mult:function(e){return t.mult(this,e)},offset:function(t,e){return this.x+=t,this.y+=e,this},reduce:function(t){return this.offset(-t)},reduceRect:function(e){return this.offsetRect(t.mult(e,-1))},expandRect:function(t){return this.x-=t.x||0,this.y-=t.y||0,this.w+=t.w||0,this.h+=t.h||0,this},expand:function(t){return this.expandRect({x:t,y:t,w:2*t,h:2*t})},intersect:function(t){var e=this.x,n=this.y,r=this.w,o=this.h;return!(t.x>e+r||t.x+t.w<e||t.y>n+o||t.y+t.h<n)},top:function(){var t=this.x,e=this.y,n=this.w;return this.h,{x:t+n/2,y:e}},right:function(){var t=this.x,e=this.y;return{x:t+this.w,y:e+this.h/2}},bottom:function(){var t=this.x,e=this.y;return{x:t+this.w/2,y:e+this.h}},left:function(){var t=this.x,e=this.y;return this.w,{x:t,y:e+this.h/2}},center:function(){var t=this.x,e=this.y;return{x:t+this.w/2,y:e+this.h/2}},topLeft:function(){var t=this.x,e=this.y;return this.w,this.h,{x:t,y:e}},topRight:function(){var t=this.x,e=this.y,n=this.w;return this.h,{x:t+n,y:e}},bottomRight:function(){var t=this.x,e=this.y;return{x:t+this.w,y:e+this.h}},bottomLeft:function(){var t=this.x,e=this.y;return this.w,{x:t,y:e+this.h}},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setW:function(t){return this.w=t,this},setH:function(t){return this.h=t,this},setPos:function(t,e){return this.x=t,this.y=e,this},setSize:function(t,e){return this.w=t,this.h=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h,this},clone:function(){return new t(this.x,this.y,this.w,this.h)},toString:function(){return"{"+this.x+","+this.y+","+this.w+","+this.h+"}"}},t}])}(),function(){"use strict";angular.module("artisan").factory("Hash",[function(){function t(e,n){e=e||"id",n=n?t.get(n):{},Object.defineProperties(this,{key:{value:e,enumerable:!1,writable:!1},pool:{value:n,enumerable:!1,writable:!1},length:{value:0,enumerable:!1,writable:!0}})}function e(t){return void 0!==this.pool[t]}function n(t){return this.pool[t]}function r(t){var e=this,n=this.key;return t?e.getId(t[n]):null}function o(t){var e=this;return this.pool[t[this.key]]=t,e.push(t),t}function i(t){var e=this,n=e.get(t);if(n)for(var r,o=0,i=Object.keys(t);o<i.length;o++)r=i[o],n[r]=t[r];else n=e.set(t);return n}function a(t){var e=this,n=this.pool,r=this.key,o=e.get(t);if(o){var i=e.indexOf(o);-1!==i&&e.splice(i,1),delete n[o[r]]}return e}function s(t){var e=this;if(!t)return e;for(var n=0;n<t.length;)e.add(t[n]),n++;return e}function u(t){var e=this;if(!t)return e;for(var n=0;n<t.length;)e.remove(t[n]),n++;return e}function c(){var t,e=this,n=e.key,r=e.pool,o=0;for(e.length;e.length;)t=e.shift(),delete r[t[n]],o++;return e}function l(t){var e=this;if(t)for(var n=0;n<e.length;)t(e[n],n),n++;return e}function f(t,e){var n=this;return t=t||this.key,n.sort(function(n,r){var o=e?r:n,i=e?n:r;return o[t]-i[t]}),n}function h(t){return this.forward(t,!0)}function d(t){if(t.key!==this.key||t.length!==this.length)return!0;for(var e=!1,n=0,r=this.length,o=this.key;e&&n<r;)e=this[n][o]!==t[n][o],n++}function m(){var t=this,e=this.pool,n=this.key;Object.keys(e).forEach(function(t){delete e[t]}),angular.forEach(t,function(t){e[t[n]]=t})}var v={};return t.get=function(t){return v[t]=v[t]||{}},t.prototype=new Array,t.prototype.has=e,t.prototype.getId=n,t.prototype.get=r,t.prototype.set=o,t.prototype.add=i,t.prototype.remove=a,t.prototype.each=l,t.prototype.addMany=s,t.prototype.removeMany=u,t.prototype.removeAll=c,t.prototype.forward=f,t.prototype.backward=h,t.prototype.differs=d,t.prototype.updatePool=m,t}])}(),function(){"use strict";angular.module("artisan").factory("$promise",["$q",function(t){function e(e){if("function"!=typeof e)throw"promise resolve callback missing";var n=t.defer();return e(n),n.promise}var n={all:function(e){return t.all(e)}};return angular.extend(e,n),e}])}(),function(){"use strict";angular.module("artisan").factory("State",["$timeout",function(t){function e(){this.errors=[],this.isReady=!1,this.idle()}return e.prototype={idle:function(){var t=this;t.isBusy=!1,t.isError=!1,t.isErroring=!1,t.isSuccess=!1,t.isSuccessing=!1,t.button=null,t.errors=[]},busy:function(){var t=this;return!t.isBusy&&(t.isBusy=!0,t.isError=!1,t.isErroring=!1,t.isSuccess=!1,t.isSuccessing=!1,t.errors=[],!0)},error:function(e){console.log("State.error",e);var n=this;n.isBusy=!1,n.isError=!0,n.isErroring=!0,n.isSuccess=!1,n.isSuccessing=!1,n.errors.push(e),t(function(){n.isErroring=!1},2e3)},ready:function(){var t=this;t.idle(),t.isReady=!0},success:function(){var e=this;e.isBusy=!1,e.isError=!1,e.isErroring=!1,e.isSuccess=!0,e.isSuccessing=!0,e.errors=[],t(function(){e.isSuccessing=!1},2e3)},enabled:function(){var t=this;return!t.isBusy&&!t.isErroring&&!t.isSuccessing},errorMessage:function(){var t=this;return t.isError?t.errors[t.errors.length-1]:null},submitClass:function(){var t=this;return{busy:t.isBusy,ready:t.isReady,successing:t.isSuccessing,success:t.isSuccess,errorring:t.isErroring,error:t.isError}},labels:function(t){var e=this,n={ready:"submit",busy:"sending",error:"error",success:"success"};t&&angular.extend(n,t);var r=n.ready;return e.isBusy?r=n.busy:e.isSuccess?r=n.success:e.isError&&(r=n.error),r},classes:function(t){var e=this,n=null;return n={ready:e.isReady,busy:e.isBusy,successing:e.isSuccessing,success:e.isSuccess,errorring:e.isErroring,error:e.isError},t&&angular.forEach(t,function(t,e){n[t]=n[e]}),n}},e}])}(),function(){"use strict";var t=function(){var t="transform",e=document.createElement("DIV");return void 0!==e.style[t]?["webkit","moz","o","ms"].every(function(n){var r="-"+n+"-transform";return void 0===e.style[r]||(t=r,!1)}):t=void 0!==e.style.webkitTransform?"-webkit-transform":void 0,t}();angular.module("artisan").factory("Style",[function(){function e(){this.props={scale:1,hoverScale:1,currentScale:1}}return e.prototype={set:function(t){var e=[];for(var n in this)"props"!==n&&e.push(n+":"+this[n]);t.style.cssText=e.join(";")+";"},transform:function(e){this[t]=e},transformOrigin:function(e,n){this[t+"-origin-x"]=Math.round(1e3*e)/1e3+"%",this[t+"-origin-y"]=Math.round(1e3*n)/1e3+"%"}},e}])}(),function(){"use strict";var t=angular.module("artisan");t.factory("Vector",function(){function t(t,e){this.x=t||0,this.y=e||0}return t.make=function(e,n){return new t(n.x-e.x,n.y-e.y)},t.size=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.normalize=function(e){var n=t.size(e);return e.x/=n,e.y/=n,e},t.incidence=function(t,e){return Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)},t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.difference=function(e,n){return new t(e.x-n.x,e.y-n.y)},t.power=function(t,e){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y))/2},t.prototype={size:function(){return t.size(this)},normalize:function(){return t.normalize(this)},incidence:function(e){return t.incidence(this,e)},cross:function(e){return t.cross(this,e)},distance:function(e){return t.distance(this,e)},difference:function(e){return t.difference(this,e)},power:function(){return(Math.abs(this.x)+Math.abs(this.y))/2},towards:function(t,e){return e=e||.125,this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},add:function(t){return this.x+=t.x,this.y+=t.y,this},friction:function(t){return this.x*=t,this.y*=t,this},copy:function(e){return new t(this.x,this.y)},toString:function(){return"{"+this.x+","+this.y+"}"}},t}),t.factory("Utils",["$compile","$controller","Vector",function(t,e,n){function r(){}function o(t,e){var r=new n;if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type){var o=null,i=t.originalEvent?t.originalEvent:t,a=i.touches.length?i.touches:i.changedTouches;a&&a.length&&(o=a[0]),o&&(r.x=o.pageX,r.y=o.pageY)}else"click"!==t.type&&"mousedown"!==t.type&&"mouseup"!==t.type&&"mousemove"!==t.type&&"mouseover"!==t.type&&"mouseout"!==t.type&&"mouseenter"!==t.type&&"mouseleave"!==t.type&&"contextmenu"!==t.type||(r.x=t.pageX,r.y=t.pageY);return e&&(r.s=n.difference(r,e)),r.type=t.type,r}function i(t,e){t=angular.element(t)[0];var r=t.getBoundingClientRect(),o=new n(r.left,r.top);return n.difference(e,o)}function a(t,e){var n,r;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]&&(n=t,!0)}),t[n](e))return t;for(;null!==t;){if(null!==(r=t.parentElement)&&r[n](e))return r;t=r}return null}function s(t,e){var n;if(t===e)return t;for(;null!==t;){if(null!==(n=t.parentElement)&&n===e)return n;t=n}return null}function u(t,e){e=e||document;for(var n=[],r=t.parentNode;r!==e;)n.push(r),r=r.parentNode;return n.push(e),n}function c(t,e,n){var r,o,i,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:x(),a=null,i=t.apply(r,o),a||(r=o=null)};return function(){var c=x();s||!1!==n.leading||(s=c);var l=e-(c-s);return r=this,o=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),s=c,i=t.apply(r,o),a||(r=o=null)):a||!1===n.trailing||(a=setTimeout(u,l)),i}}function l(t,e){var n=null;return t&&angular.forEach(t,function(t){var r=!0;angular.forEach(e,function(e,n){r=r&&t[n]===e}),r&&(n=t)}),n}function f(n,r,o,i){r.html(o);var a=t(r.contents());if(i.controller){var s=n.$new();angular.extend(s,i);var u=e(i.controller,{$scope:s});i.controllerAs&&(n[i.controllerAs]=u),r.data("$ngControllerController",u),r.children().data("$ngControllerController",u),n=s}a(n)}function h(t){return function(e,n){return e[t]<n[t]?1:e[t]>n[t]?-1:0}}function d(t,e,n){t=t||"",e=e||"";var r=t.split(",");if(r.length>1){var o=r.shift();return angular.forEach(r,function(t,r){o=n?o.split("{"+r+"}").join("' + "+e+t+" + '"):o.split("{"+r+"}").join(e+t)}),n?"'"+o+"'":o}return e+t}function m(t,e){return t[e]}function v(t,e,n){return"string"==typeof e?v(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]=n:0===e.length?t:v(t[e[0]],e.slice(1),n)}function p(t,e,n){return"string"==typeof e?p(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]+=n:0===e.length?t:p(t[e[0]],e.slice(1),n)}function g(t,e,n){function r(){if(document.createEvent){var t=document.createElement("a");if(t.href=o,void 0!==t.download){var n=e||o.substring(o.lastIndexOf("/")+1,o.length);t.download=n}var r=document.createEvent("MouseEvents");return r.initEvent("click",!0,!0),t.dispatchEvent(r),!0}window.open(o.indexOf("?")>-1?o:o+"?download","_self")}n=n||"application/octet-stream";var o=null,i=new Blob([t],{type:n}),a=new window.FileReader;a.readAsDataURL(i),a.onloadend=function(){o=a.result,r()}}function y(t){var e={uri:"/api/reports/download",name:"Filename",extension:"txt",type:"text/plain",content:"Hello!"};t=angular.extend(e,t);var n=JSON.stringify(t),o=document.createElement("form"),i=document.createElement("input");return i.name="download",i.value=n,o.appendChild(i),o.action=t.uri,o.method="POST",o.target="ProjectDownloads",o.enctype="application/x-www-form-urlencoded",document.body.appendChild(o),o.submit(),setTimeout(function(){document.body.removeChild(o)},100),r}!function(){Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),r=n.length>>>0,o=0;if(2==arguments.length)e=arguments[1];else{for(;o<r&&!(o in n);)o++;if(o>=r)throw new TypeError("Reduce of empty array with no initial value");e=n[o++]}for(;o<r;)o in n&&(e=t(e,n[o],o,n)),o++;return e}})}();var x=Date.now||function(){return(new Date).getTime()},w=window.navigator.userAgent.toLowerCase(),b=-1!==w.indexOf("safari")&&-1===w.indexOf("chrome"),$=-1!==w.indexOf("trident")||-1!==w.indexOf("edge")||-1!==w.indexOf("msie"),k=!b&&!$&&-1!==w.indexOf("chrome"),S=-1!==w.indexOf("mobile");navigator.userAgent.toLowerCase().indexOf("chrome"),navigator.userAgent.toLowerCase().indexOf("safari");return r.reverseSortOn=h,r.getTouch=o,r.getRelativeTouch=i,r.getClosest=a,r.getClosestElement=s,r.getParents=u,r.throttle=c,r.where=l,r.format=d,r.compileController=f,r.reducer=m,r.reducerSetter=v,r.reducerAdder=p,r.downloadFile=g,r.serverDownload=y,r.toMd5=function(t){return Md5.encode(t)},r.ua={safari:b,msie:$,chrome:k,mobile:S},angular.forEach(r.ua,function(t,e){t&&angular.element(document.getElementsByTagName("body")).addClass(e)}),r}])}(),function(){"use strict";angular.module("artisan").factory("Doc",["Api","$promise",function(t,e){function n(t){t&&angular.extend(this,t)}n.prototype={};var r={};return angular.extend(n,r),n}])}(),function(){"use strict";angular.module("artisan").factory("View",["Api","$promise","$location","$routeParams","environment","Doc",function(t,e,n,r,o,i){function a(t){var e=n.path(),i=r,a={environment:o,route:{url:e,params:i},doc:t};angular.extend(this,a)}a.prototype={};var s={current:function(){return e(function(e){var r=n.path();console.log("View.current",r),t.docs.url(r).then(function(t){var n=new i(t),r=new a(n);e.resolve(r)},function(t){e.reject(t)})})}};return angular.extend(a,s),a}])}(),function(){"use strict";angular.module("artisan").service("WebApi",["$http","$promise","$timeout","environment",function(t,e,n,r){function o(n,o,i){return e(function(e){t[n](r.urls.api+o,i).then(function(t){e.resolve(t.data)},function(t,n){var r=t&&t.data?t.data:{};r.status=t.status,e.reject(r)})})}function i(t){return o("get",t)}function a(t,e){return o("post",t,e)}function s(t,e){return o("put",t,e)}function u(t,e){return o("patch",t,e)}function c(t){return o("delete",t)}function l(t){var e=$q.defer();return n(function(){e.resolve({data:t})},1e3),e.promise}this.get=i,this.post=a,this.put=s,this.patch=u,this.delete=c,this.fake=l}])}(),function(){"use strict";angular.module("artisan").service("Router",["$location","$timeout",function(t,e){function n(n,r){function o(){t.$$lastRequestedPath=t.path(),t.path(n)}r?e(function(){o()},r):o()}function r(n,r){function o(){n=t.$$lastRequestedPath||n,t.$$lastRequestedPath=null,t.path(n)}r?e(function(){o()},r):o()}function o(n,r){function o(){t.path(n)}r?e(function(){o()},r):e(function(){o()})}var i=this;i.redirect=n,i.path=r,i.apply=o}])}(),function(){"use strict";angular.module("artisan").factory("$silent",["$rootScope","$location",function(t,e){function n(){}function r(){var e=t.$$listeners.$locationChangeSuccess;angular.forEach(e,function(t,n){function r(){e[n]=t}t!==o&&(e[n]=r)})}function o(t){i===e.path()&&r(),i=null}var i,a={silent:function(t,n){var r=e.url(t);n&&r.replace(),i=e.path()},path:function(t){return e.path(t)}};return angular.extend(n,a),t.$$listeners.$locationChangeSuccess.unshift(o),n}])}(),function(){"use strict";var t=angular.module("artisan");t.factory("Cookie",["$q","$window",function(t,e){function n(){}return n.TIMEOUT=3e5,n._set=function(t,n,r){var o;if(r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3),o="; expires="+i.toGMTString()}else o="";e.document.cookie=t+"="+n+o+"; path=/"},n.exists=function(t){return-1!==e.document.cookie.indexOf(";"+t+"=")||0===e.document.cookie.indexOf(t+"=")},n.get=function(t){for(var n=t+"=",r=e.document.cookie.split(";"),o=0;o<r.length;o++){for(var i=r[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n)){var a=i.substring(n.length,i.length),s=null;try{s=JSON.parse(decodeURIComponent(atob(a)))}catch(t){console.log("Cookie.get.error parsing",key,t)}return s}}return null},n.set=function(t,e,r){try{var o=[],i=JSON.stringify(e,function(t,e){if("pool"!==t){if("object"==typeof e&&null!==e){if(-1!==o.indexOf(e))return;o.push(e)}return e}});o=null,n._set(t,btoa(encodeURIComponent(i)),r)}catch(n){console.log("Cookie.set.error serializing",t,e,n)}},n.delete=function(t){n._set(t,"",-1)},n.on=function(e){function r(){if(s>u)i.reject("timeout");else{var t=n.get(e);t?i.resolve(t):(s+=a,o=setTimeout(r,a))}}var o,i=t.defer(),a=1e3,s=0,u=n.TIMEOUT;return r(),i.promise},n}]),t.factory("LocalStorage",["$q","$window","Cookie",function(t,e,n){function r(){}return r.isSupported=function(){var t=!1;try{t="localStorage"in e&&null!==e.localStorage,t?(e.localStorage.setItem("test","1"),e.localStorage.removeItem("test")):t=!1}catch(e){t=!1}return t}(),r.isSupported?(r.exists=function(t){return void 0!==e.localStorage[t]},r.get=function(t){var n=null;if(void 0!==e.localStorage[t])try{n=JSON.parse(e.localStorage[t])}catch(e){console.log("LocalStorage.get.error parsing",t,e)}return n},r.set=function(t,n){try{var r=[],o=JSON.stringify(n,function(t,e){if("pool"!==t){if("object"==typeof e&&null!==e){if(-1!==r.indexOf(e))return;r.push(e)}return e}});r=null,e.localStorage.setItem(t,o)}catch(e){console.log("LocalStorage.set.error serializing",t,n,e)}},r.delete=function(t){e.localStorage.removeItem(t)},r.on=function(r){function o(t){if(clearTimeout(i),t.originalEvent.key==r)try{var e=JSON.parse(t.originalEvent.newValue);a.resolve(e)}catch(t){console.log("LocalStorage.on.error parsing",r,t),a.reject("error parsing "+r)}}var i,a=t.defer(),s=n.TIMEOUT;return angular.element(e).on("storage",o),i=setTimeout(function(){a.reject("timeout")},s),a.promise}):(console.log("LocalStorage.unsupported switching to cookies"),r.exists=n.exists,r.set=n.set,r.get=n.get,r.delete=n.delete,r.on=n.on),r}]),t.factory("SessionStorage",["$q","$window","Cookie",function(t,e,n){function r(){}return r.isSupported=function(){var t=!1;try{t="sessionStorage"in e&&void 0!==e.sessionStorage,t?(e.sessionStorage.setItem("test","1"),e.sessionStorage.removeItem("test")):t=!1}catch(e){t=!1}return t}(),r.isSupported?(r.exists=function(t){return void 0!==e.sessionStorage[t]},r.get=function(t){var n=null;if(void 0!==e.sessionStorage[t])try{n=JSON.parse(e.sessionStorage[t])}catch(e){console.log("SessionStorage.get.error parsing",t,e)}return n},r.set=function(t,n){try{var r=[],o=JSON.stringify(n,function(t,e){if("pool"!==t){if("object"==typeof e&&null!==e){if(-1!==r.indexOf(e))return;r.push(e)}return e}});r=null,e.sessionStorage.setItem(t,o)}catch(e){console.log("SessionStorage.set.error serializing",t,n,e)}},r.delete=function(t){e.sessionStorage.removeItem(t)},r.on=function(r){function o(t){if(clearTimeout(i),t.originalEvent.key===r)try{var e=JSON.parse(t.originalEvent.newValue);a.resolve(e)}catch(t){console.log("SessionStorage.on.error parsing",r,t),a.reject("error parsing "+r)}}var i,a=t.defer(),s=n.TIMEOUT;return angular.element(e).on("storage",o),i=setTimeout(function(){a.reject("timeout")},s),a.promise}):(console.log("SessionStorage.unsupported switching to cookies"),r.exists=n.exists,r.set=n.set,r.get=n.get,r.delete=n.delete,r.on=n.on),r}])}(),function(){"use strict";var t=angular.module("artisan");t.factory("Color",[function(){function t(t,e,n,r){if(arguments.length>1)this.r=t||0===t?t:0,this.g=e||0===e?e:0,this.b=n||0===n?n:0,this.a=r||0===r?r:255;else{var o=t||"0xffffff";o=parseInt(o),t.length>8?(this.r=o>>24&255,this.g=o>>16&255,this.b=o>>8&255,this.a=o>>0&255):(this.r=o>>16&255,this.g=o>>8&255,this.b=o>>0&255,this.a=255)}}return t.componentToHex=function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},t.luma=function(t){return t.dot({r:95,g:100,b:60})},t.contrast=function(e){return new t(t.luma(e)>.6?"0x000000":"0xffffff")},t.darker=function(e,n,r){return r=r||0,new t(Math.max(Math.floor(e.r*r),Math.floor(e.r-255*n)),Math.max(Math.floor(e.g*r),Math.floor(e.g-255*n)),Math.max(Math.floor(e.b*r),Math.floor(e.b-255*n)),e.a)},t.lighter=function(e,n,r){return r=r||1,new t(Math.min(e.r+Math.floor((255-e.r)*r),Math.floor(e.r+255*n)),Math.min(e.g+Math.floor((255-e.g)*r),Math.floor(e.g+255*n)),Math.min(e.b+Math.floor((255-e.b)*r),Math.floor(e.b+255*n)),e.a)},t.prototype={toUint:function(){return(this.r<<24)+(this.g<<16)+(this.b<<8)+this.a},toHex:function(){return"#"+t.componentToHex(this.r)+t.componentToHex(this.g)+t.componentToHex(this.b)+t.componentToHex(this.a)},toRgba:function(){return"rgba("+this.r+","+this.g+","+this.b+","+(this.a/255).toFixed(3)+")"},dot:function(t){return this.r/255*(t.r/255)+this.g/255*(t.g/255)+this.b/255*(t.b/255)},alpha:function(t,e,n){return e=e||0,n=n||1,this.a=Math.floor(255*(e+t*(n-e))),this},makeSet:function(){return this.foreground=t.contrast(this),this.border=t.darker(this,.3),this.light=t.lighter(this,.3),this}},t}]),t.factory("Shape",[function(){function t(){}return t.shapeCircle=function(t,e,n,r,o,i){o=o||0,i=i||2*Math.PI,t.ctx.arc(e,n,r,o,i,!1)},t.shapeStar=function(t,e,n,r,o,a){var s,u,c=Math.PI/2*3,l=Math.PI/a,f=t.ctx;for(f.moveTo(e,n-r),i=0;i<a;i++)s=e+Math.cos(c)*r,u=n+Math.sin(c)*r,f.lineTo(s,u),c+=l,s=e+Math.cos(c)*o,u=n+Math.sin(c)*o,f.lineTo(s,u),c+=l;f.lineTo(e,n-r)},t.shapeRoundRect=function(t,e,n){var r=t.ctx,o=e.x,i=e.y,a=e.w,s=e.h;if(void 0===typeof n&&(n=4),"number"==typeof n)n={tl:n,tr:n,br:n,bl:n};else{var u={tl:0,tr:0,br:0,bl:0};for(var c in u)n[c]=n[c]||u[c]}r.moveTo(o+n.tl,i),r.lineTo(o+a-n.tr,i),r.quadraticCurveTo(o+a,i,o+a,i+n.tr),r.lineTo(o+a,i+s-n.br),r.quadraticCurveTo(o+a,i+s,o+a-n.br,i+s),r.lineTo(o+n.bl,i+s),r.quadraticCurveTo(o,i+s,o,i+s-n.bl),r.lineTo(o,i+n.tl),r.quadraticCurveTo(o,i,o+n.tl,i)},t.circle=function(){var e=Array.prototype.slice.call(arguments),n=e[0].ctx;n.beginPath(),t.shapeCircle.apply(this,e),n.closePath()},t.star=function(){var e=Array.prototype.slice.call(arguments),n=e[0].ctx;n.beginPath(),t.shapeStar.apply(this,e),n.closePath()},t.roundRect=function(){var e=Array.prototype.slice.call(arguments),n=e[0].ctx;n.beginPath(),t.shapeRoundRect.apply(this,e),n.closePath()},t}]),t.constant("PainterColors",{black:"0x14191e",white:"0xffffff",blue:"0x0023FF",red:"0xF21500",lightBlue:"0x79ccf2",lightYellow:"0xfff79a",greyLighter:"0xf8f8f8",greyLight:"0xeeeeee",greyMedium:"0xcccccc",grey:"0x90939b",map:"0x24292e"}),t.factory("Palette",["$q","Painter","Rect",function(t,e,n){function r(){this.painter=(new e).setSize(0,0),this.buffer=(new e).setSize(0,0),this.size={w:0,h:0},this.pool={},this.rows={}}return r.prototype={getRect:function(t,e){var r=this.painter,o=this.size,i=this.rows,a=new n(0,0,t,e),s=i[e]||{x:0,y:o.h};if(o.w=Math.max(o.w,s.x+t),o.h=Math.max(o.h,s.y+e),r.canvas.width||r.canvas.height){if(o.w>r.canvas.width||o.h>r.canvas.height){var u=r.canvas;r.setCanvas(document.createElement("canvas")),r.setSize(o.w,o.h),r.ctx.drawImage(u,0,0)}}else r.setSize(o.w,o.h);return a.x=s.x,a.y=s.y,s.x+=t,i[e]=s,a},add:function(e,n){var r=this;if(angular.isString(n)){var o=t.defer(),i=new Image;return i.onload=function(){r.addShape(e,i.width,i.height,function(t,e){t.ctx.drawImage(i,0,0)}),o.resolve(i)},i.onerror=function(){o.reject("connot load "+n)},i.src=n,o.promise}var a=Array.prototype.slice.call(arguments);return r.addShape.apply(r,a)},addShape:function(t,e,n,r){var o=this.painter,i=this.getRect(e,n);o.ctx.save(),o.ctx.rect(i.x,i.y,i.w,i.h),o.ctx.clip(),o.ctx.translate(i.x,i.y),r.call(o,o,i.clone().setPos(0,0)),o.ctx.restore(),this.pool[t]=i},draw:function(t,e,n,r,o){var i=this.pool[e];i&&t.drawRect(this.painter.canvas,i,{x:n,y:r,w:i.w,h:i.h},o)},tint:function(t,e,n,r,o,i){var a=this.pool[e];if(a){var s=this.painter,u=this.buffer.setSize(a.w,a.h);u.save(),u.setFill(o),u.fillRect(),u.ctx.globalCompositeOperation="destination-atop",u.ctx.drawImage(s.canvas,a.x,a.y,a.w,a.h,0,0,a.w,a.h),u.restore(),console.log(n,r,u.canvas,t.canvas),t.draw(u.canvas,{x:n,y:r},i)}},pattern:function(t,e,n,r,o,i,a){function s(e){var a=t.ctx;a.save(),a.translate(n,r),a.fillStyle=e,a.fillRect(-n,-r,o,i),a.translate(-n,-r),a.restore()}var u=this.pool[e];if(u){var c,l=u.img;if(l&&u.color==a)c=t.ctx.createPattern(l,"repeat"),s(c);else{var f=this.buffer.setSize(u.w,u.h);a?(u.color=a,f.save(),f.setFill(a),f.fillRect(),f.ctx.globalCompositeOperation="destination-atop",f.ctx.drawImage(this.painter.canvas,u.x,u.y,u.w,u.h,0,0,u.w,u.h),f.restore()):f.ctx.drawImage(this.painter.canvas,u.x,u.y,u.w,u.h,0,0,u.w,u.h),l=new Image,l.onload=function(){u.img=l,c=t.ctx.createPattern(l,"repeat"),s(c)},l.src=f.toDataURL()}}}},r}]),t.factory("Painter",["Shape","Rect","Color","PainterColors",function(t,e,n,r){function o(t){t=t||document.createElement("canvas"),this.rect=new e,this.drawingRect=new e,this.setColors(),this.setCanvas(t)}o.colors={},angular.forEach(r,function(t,e){o.colors[e]=new n(t).makeSet()});o.colors;return o.prototype={colors:o.colors,setColors:function(){var t=this.colors;angular.forEach(r,function(e,r){t[r]=new n(e).makeSet()})},setCanvas:function(t){this.canvas=t,this.setSize(t.offsetWidth,t.offsetHeight);var e=t.getContext("2d");return e.lineCap="square",this.ctx=e,this},setSize:function(t,e){return this.canvas.width=t,this.canvas.height=e,this.rect.w=t,this.rect.h=e,this},copy:function(t){return this.ctx.drawImage(t,0,0),this},clear:function(){return this.resize(),this},resize:function(){return this.setSize(this.canvas.offsetWidth,this.canvas.offsetHeight),this},setText:function(t,e,n,r){t=t||"11px monospace",e=e||"center",n=n||"middle",r=r||this.colors.black;var o=this.ctx;return o.font=t,o.textAlign=e,o.textBaseline=n,o.fillStyle=r.toRgba(),this},setFill:function(t){return t=t||this.colors.black,this.ctx.fillStyle=t.toRgba(),this},setStroke:function(t,e){t=t||this.colors.black;var n=this.ctx;return e=e||1,n.strokeStyle=t.toRgba(),n.lineWidth=e,this},fillText:function(t,e,n,r,o){return n&&(r=r||"",o=o||Math.floor(n/8),t.length>o&&(t=t.substr(0,Math.min(t.length,o)).trim()+r)),this.ctx.fillText(t,e.x,e.y),this},fillRect:function(t){t=t||this.rect;var e=this.ctx,n=t.x,r=t.y,o=t.w,i=t.h;return e.fillRect(n,r,o,i),this},strokeRect:function(t){t=t||this.rect;var e=this.ctx,n=t.x,r=t.y,o=t.w,i=t.h;return e.strokeRect(n,r,o,i),this},fill:function(){return this.ctx.fill(),this},
stroke:function(){return this.ctx.stroke(),this},begin:function(){return this.ctx.beginPath(),this},close:function(){return this.ctx.closePath(),this},save:function(){return this.ctx.save(),this},restore:function(){return this.ctx.restore(),this},rotate:function(t){this.ctx.rotate(t*Math.PI/180)},translate:function(t){this.ctx.translate(t.x,t.y)},toDataURL:function(){return this.canvas.toDataURL()},draw:function(t,e,n){if(t){e.w=e.w||t.width,e.h=e.h||t.height;var r=this.ctx,o=this.drawingRect,i=o.x=e.x-e.w/2,a=o.y=e.y-e.h/2;o.w=e.w,o.h=e.h;r.save(),r.translate(i,a),n&&n.call(this),r.drawImage(t,0,0),r.restore()}return this},drawRect:function(t,e,n,r){if(t){e.w=e.w||t.width,e.h=e.h||t.height,n.w=n.w||t.width,n.h=n.h||t.height;var o=this.ctx,i=this.drawingRect,a=i.x=n.x-e.w/2,s=i.y=n.y-e.h/2;i.w=n.w,i.h=n.h;o.save(),o.translate(a,s),r&&r.call(this),o.drawImage(t,e.x,e.y,e.w,e.h,0,0,n.w,n.h),o.restore()}return this},flip:function(t){t=t||{x:1,y:-1};var e=this.ctx,n=this.drawingRect;e.translate(-1===t.x?n.w:0,-1===t.y?n.h:0),e.scale(t.x,t.y)}},o}])}(),function(){"use strict";var t=angular.module("artisan");t.directive("controlMessages",[function(){return{restrict:"E",templateUrl:"artisan/forms/messages",transclude:{message:"?messageItems"},link:function(t,e,n,r){}}}]),t.directive("control",["$parse",function(t){function e(t,e,n){t=t||"",e=e||"";var r=t.split(",");if(r.length>1){var o=r.shift();return angular.forEach(r,function(t,r){o=n?o.split("{"+r+"}").join("' + "+e+t+" + '"):o.split("{"+r+"}").join(e+t)}),n?"'"+o+"'":o}return e+t}var n=0;return{restrict:"A",templateUrl:function(t,e){var n="artisan/forms/text";switch(e.control){case"select":n="artisan/forms/select"}return n},scope:{ngModel:"=",required:"=",form:"@",title:"@",placeholder:"@",source:"=?",key:"@?",label:"@?"},require:"ngModel",transclude:!0,link:{pre:function(r,o,i,a,s){var u=r.label=r.label?r.label:"name",c=r.key=r.key?r.key:"id";if("select"===i.control){var l=i.filter?"| "+i.filter:"",f=e(u,"item.",!0);r.getOptions=function(){return i.number?"item."+c+" as "+f+" disable when item.disabled for item in source "+l:f+" disable when item.disabled for item in source "+l+" track by item."+c}}var h=(r.type=i.control,r.form=r.form||"form",r.title=r.title||"untitled");r.placeholder=r.placeholder||h,r.field=h.replace(/[^0-9a-zA-Z]/g,"").split(" ").join("")+ ++n;r.format=i.format||null,r.precision=i.precision||null,r.validate=i.validate||i.control,r.minLength=i.minLength||0,r.maxLength=i.maxLength||Number.POSITIVE_INFINITY,r.min=i.min||null,r.max=i.max||null,r.options=t(i.options)(r)||{},r.focus=!1,r.visible=!1,r.onChange=function(e){t(i.onChange)(r.$parent)},r.onFilter=function(e){t(i.onFilter)(r.$parent)},r.getType=function(){var t="text";switch(i.control){case"password":t=r.visible?"text":"password";break;default:t=i.control}return t},r.getClasses=function(){var e=t(r.form)(r.$parent),n=t(r.form+"."+r.field)(r.$parent);return{"control-focus":r.focus,"control-success":n.$valid,"control-error":n.$invalid&&(e.$submitted||n.$touched),"control-empty":!n.$viewValue}},r.getMessages=function(){var e=t(r.form)(r.$parent),n=t(r.form+"."+r.field)(r.$parent);return(e.$submitted||n.$touched)&&n.$error},r.toggleVisibility=function(){r.visible=!r.visible}}}}}]),t.directive("_control",["$http","$templateCache","$compile","$parse",function(t,e,n,r){function o(t,e,n){t=t||"",e=e||"";var r=t.split(",");if(r.length>1){var o=r.shift();return angular.forEach(r,function(t,r){o=n?o.split("{"+r+"}").join("' + "+e+t+" + '"):o.split("{"+r+"}").join(e+t)}),n?"'"+o+"'":o}return e+t}var i=0;return{restrict:"A",templateUrl:function(t,e){var n="artisan/forms/text";switch(e.control){case"select":n="artisan/forms/select"}return n},scope:{ngModel:"=",required:"=",form:"@",title:"@",placeholder:"@"},require:"ngModel",compile:function(t,e){return{pre:function(t,e,n){if("select"===n.control){var a=n.label?n.label:"name",s=n.key?n.key:"id",u=n.min?" | filter:gte('"+s+"', "+n.min+")":"",c=o(a,"item.",!0);t.options=n.number?"item."+s+" as "+c+" disable when item.disabled for item in "+n.source+u:c+" disable when item.disabled for item in "+n.source+u+" track by item."+s,console.log("control.compile.pre",t.options)}var l=(t.type=n.control,t.form=t.form||"form",t.title=t.title||"untitled");t.placeholder=t.placeholder||l,t.field=l.replace(/[^0-9a-zA-Z]/g,"").split(" ").join("")+ ++i;t.validate=n.validate||n.control,t.format=n.format||null,t.precision=n.precision||null,t.validate=n.validate||n.control,t.minLength=n.min||0,t.maxLength=n.max||Number.POSITIVE_INFINITY,t.options=r(n.options)(t)||{},t.focus=!1,t.visible=!1,t.getType=function(){var e="text";switch(n.control){case"password":e=t.visible?"text":"password";break;default:e=n.control}return e},t.getClasses=function(){var e=r(t.form)(t.$parent),n=r(t.form+"."+t.field)(t.$parent);return{"control-focus":t.focus,"control-success":n.$valid,"control-error":n.$invalid&&(e.$submitted||n.$touched),"control-empty":!n.$viewValue}},t.getMessages=function(){var e=r(t.form)(t.$parent),n=r(t.form+"."+t.field)(t.$parent);return(e.$submitted||n.$touched)&&n.$error}}}}}}]),t.directive("numberPicker",["$parse","$timeout",function(t,e){return{restrict:"A",template:'<div class="input-group">   <span class="input-group-btn"><button class="btn btn-outline-primary" type="button">-</button></span>   <div ng-transclude></div>   <span class="input-group-btn"><button class="btn btn-outline-primary" type="button">+</button></span></div>',replace:!0,transclude:!0,link:function(n,r,o,i){function a(r){var i=t(o.min)(n),a=t(o.numberPicker),s=a.assign;e(function(){s(n,Math.max(i,a(n)-1))})}function s(r){var i=t(o.max)(n),a=t(o.numberPicker),s=a.assign;e(function(){s(n,Math.min(i,a(n)+1))})}function u(){angular.element(l).off("touchstart mousedown",a),angular.element(f).off("touchstart mousedown",s)}var c=r[0],l=c.querySelectorAll(".input-group-btn > .btn")[0],f=c.querySelectorAll(".input-group-btn > .btn")[1];n.$on("$destroy",function(){u()}),function(){angular.element(l).on("touchstart mousedown",a),angular.element(f).on("touchstart mousedown",s)}()}}}])}(),function(){"use strict";angular.module("artisan").directive("validate",["$filter",function(t){return{require:"ngModel",link:function(e,n,r,o){function i(){h=!0,l&&(n[0].value=o.$modelValue||null,o.$modelValue||o.$setViewValue(null))}function a(){if(l&&!o.$invalid)switch(c){case"date":case"datetime":case"datetime-local":n[0].value=o.$modelValue?t("date")(o.$modelValue,l):" ";break;default:n[0].value=o.$modelValue?t("number")(o.$modelValue,f)+" "+l:" "}}function s(){h=!1,a()}function u(){n.off("focus",i),n.off("blur",s)}var c=r.validate,l=r.format||"",f=r.precision||2,h=!1;switch(c){case"date":case"datetime":case"datetime-local":o.$formatters.push(function(e){return e?t("date")(e,l):null});break;case"number":o.$parsers.unshift(function(t){var e=!1;return void 0!==t&&""!==t?(e=-1!==String(t).indexOf(Number(t).toString()),t=Number(t),o.$setValidity("number",e),e&&(o.$setValidity("positive",t>=.01),void 0!==r.min&&o.$setValidity("range",t>=Number(r.min)),void 0!==r.max&&o.$setValidity("range",t<=Number(r.max)))):(e=!0,t=Number(t),o.$setValidity("number",!0),o.$setValidity("positive",!0),void 0!==r.min&&o.$setValidity("range",!0),void 0!==r.max&&o.$setValidity("range",!0)),t}),o.$formatters.push(function(e){return e?t("number")(e,f)+" "+l:null});break;case"anynumber":o.$parsers.unshift(function(t){var e=!1;return void 0!==t&&""!==t?(e=-1!==String(t).indexOf(Number(t).toString()),t=Number(t),o.$setValidity("number",e),e&&(void 0!==r.min&&o.$setValidity("range",t>=Number(r.min)),void 0!==r.max&&o.$setValidity("range",t<=Number(r.max)))):(e=!0,t=Number(t),o.$setValidity("number",!0),void 0!==r.min&&o.$setValidity("range",!0),void 0!==r.max&&o.$setValidity("range",!0)),t}),o.$formatters.push(function(e){return e||0===e?t("number")(e,f)+" "+l:null})}e.$on("$destroy",function(){u()}),function(){n.on("focus",i),n.on("blur",s)}()}}}])}(),function(){"use strict";angular.module("artisan").directive("modalView",["$parse","$templateRequest","$compile","$controller","Utils",function(t,e,n,r,o){function i(t,e,o,i){e.html(o);var a=n(e.contents());if(i.controller){var s=t.$new();angular.extend(s,i);var u=r(i.controller,{$scope:s});i.controllerAs&&(t[i.controllerAs]=u),e.data("$ngControllerController",u),e.children().data("$ngControllerController",u),t=s}a(t)}return{restrict:"A",priority:-400,link:function(n,r,o,a){var s=t(o.modalView);s=s(n),s.templateUrl=s.templateUrl||"artisan/modals/modal",e(s.templateUrl).then(function(t){i(n,r,t,s)})}}}])}(),function(){"use strict";angular.module("artisan").provider("$modal",[function(){function t(t,e){return n[t]=e,this}var e=[],n={};this.modals=e,this.routes=n,this.when=t,this.$get=["$q","$timeout",function(t,r){function o(t){var n=-1;angular.forEach(e,function(e,r){e===t&&(n=r)}),-1!==n&&r(function(){t.active=!1,e.splice(n,1),e.length&&(e[e.length-1].active=!0)})}function i(t){var n=-1;angular.forEach(e,function(e,r){e===t&&(n=r)}),-1!==n&&(t.active=!1,r(function(){for(;e.length;)e.splice(e.length-1,1)},500))}function a(a,s){var u=t.defer();s=s||null;var c={title:"Untitled",controller:null,templateUrl:null,params:s},l=n[a];return l&&angular.extend(c,l),c.deferred=u,c.back=function(t){o(this),c.deferred.resolve(t,c)},c.resolve=function(t){i(this),c.deferred.resolve(t,c)},c.reject=function(){i(this),c.deferred.reject(c)},e.push(c),angular.forEach(e,function(t,e){t.active=!1}),e.length?c.active=!0:r(function(){c.active=!0},500),u.promise}return{modals:e,addModal:a}}]}])}(),function(){"use strict";var t=angular.module("artisan");t.directive("nav",["$parse","Nav",function(t,e){return{restrict:"A",templateUrl:function(t,e){return e.template||"artisan/nav/nav"},scope:{items:"=nav"},link:function(n,r,o,i){n.$watch("items",function(r){if(r)if(angular.isArray(r)){var i=t(o.onLink)(n.$parent),a=t(o.onNav)(n.$parent),s=new e({onLink:i,onNav:a});s.setItems(r),n.item=s}else r instanceof e&&(n.item=r)})}}}]),t.directive("navItem",["$timeout",function(t){return{restrict:"A",templateUrl:function(t,e){return e.template||"artisan/nav/nav-item"},scope:{item:"=navItem"},link:function(e,n,r,o){function i(e,n){var r=e.$nav.state;r.active=!0,t(function(){r.immediate=n,r.closed=r.closing=!1,r.opening=!0,t(function(){r.opening=!1,r.opened=!0})})}function a(e,n){var r=e.$nav.state;r.active=!1,t(function(){r.immediate=n,r.opened=r.opening=!1,r.closing=!0,t(function(){r.closing=!1,r.closed=!0})}),e.items&&angular.forEach(e.items,function(t){a(t,!0)})}function s(t){var e=t.$nav.state;e.active=!t.items||!e.active,e.active?(t.$nav.parent&&angular.forEach(t.$nav.parent.items,function(e){e!==t&&a(e,!0)}),i(t)):a(t)}function u(n){function r(){t(function(){s(o)})}var o=e.item;if(o.$nav.state.active)m=!1,r();else if(o.$nav.onNav){var i=o.$nav.onNav(o,o.$nav);i&&"function"==typeof i.then?(i.then(function(t){r()},function(t){}),m=!1):(m=i,r())}}function c(t){u(t),v.off("mousedown",l)}function l(t){u(t),v.off("touchstart",c)}function f(t){return h(t)}function h(t){if(!1===m)return t.preventDefault(),!1}function d(){v.off("touchstart",c).off("mousedown",l).off("click",f)}var m,v=angular.element(n[0].querySelector(".nav-link"));!function(){v.on("touchstart",c).on("mousedown",l).on("click",f)}(),e.$on("$destroy",function(){d()})}}}])}(),function(){"use strict";angular.module("artisan").factory("Nav",["$silent",function(t){function e(t){var e=this,n={items:[]};angular.extend(e,n),t&&angular.extend(e,t),e.setNav(e,null)}e.prototype={setItems:function(e){var n=this;n.path=t.path(),n.items=e,n.setNavs(e,n)},setNavs:function(t,e){var n=this;t&&angular.forEach(t,function(t){n.setNav(t,e),n.setNavs(t.items,t)})},setNav:function(t,e){var n=this,r={parent:e||null,level:e?e.$nav.level+1:0,state:{},addItems:function(e){n.addItems(e,t)},onNav:n.onNav};if(t.$nav=r,r.link=n.getLink(t),r.link===n.path)for(r.state.active=!0,r.state.opened=!0;r.parent;)r=r.parent.$nav,r.state.active=!0,r.state.opened=!0},addItems:function(t,e){var n=this;angular.isArray(t)?angular.forEach(t,function(t){n.addItem(t,e)}):n.addItem(t,e)},addItem:function(t,e){var n=this;n.onLink,n.onNav,n.setNav(t,e),e&&(e.items=e.items||[],e.items.push(t))},getLink:function(t){return this.onLink?this.onLink(t,t.$nav):t.link}};var n={silent:function(e){t.silent(e)},path:function(e){t.path(e)}};return angular.extend(e,n),e}])}(),function(){"use strict";window.ondragstart=function(){return!1};var t=angular.module("artisan");t.directive("scrollableX",["$parse","$compile","$window","$timeout","Scrollable","Animate","Style","Events","Utils",function(t,e,n,r,o,i,a,s,u){return{restrict:"A",template:'<div class="content" ng-transclude></div>',transclude:!0,link:function(e,r,s,c){function l(t){R.setContainer(E),R.setContent(M),R.setEnabled(g());var e=(R.renderX(),R.getCurrent());I.transform("translate3d("+e.x.toFixed(2)+"px,0,0)"),I.set(M)}function f(t){"touchstart"==t.type&&r.off("mousedown",f),R.dragStart(u.getTouch(t))&&(w(),C.play())}function h(t){"touchmove"==t.type&&angular.element(n).off("mousemove",h),R.dragMove(u.getTouch(t))}function d(t){"touchend"==t.type&&angular.element(n).off("mouseup",d),R.dragEnd(),b()}function m(t){return R.wheelX(t)}function v(t){t||(t=n.event),t=t.originalEvent?t.originalEvent:t;var e=t.deltaY<0||t.wheelDelta>0||t.deltaY<0?1:-1;R.wheelXCheck(e)&&(O(e),C.play(),t.preventDefault())}function p(){console.log("off"),b(),R.off()}function g(){var t=!0;return S&&(t=t&&S(e)),t=t&&n.innerWidth>=1024,t=t&&E.offsetWidth<M.offsetWidth}function y(){g()||p(),l()}function x(){angular.element(n).off("resize",y),r.off("touchstart mousedown",f),r[0].removeEventListener("DOMMouseScroll",v),r[0].removeEventListener("mousewheel",v)}function w(){angular.element(n).on("touchmove mousemove",h),angular.element(n).on("touchend mouseup",d)}function b(){angular.element(n).off("touchmove mousemove",h),angular.element(n).off("touchend mouseup",d)}var $,k,S;s.onLeft&&($=t(s.onLeft)),s.onRight&&(k=t(s.onRight)),s.showIndicatorFor&&t(s.showIndicatorFor),s.scrollableWhen&&(S=t(s.scrollableWhen)),r.attr("unselectable","on").addClass("unselectable");var E=r[0],M=E.querySelector(".content"),T=angular.element(T),I=new a,C=new i(l),R=s.scrollableX?t(s.scrollableX)(e):new o;!function(t){t.link({getItems:function(){if(s.scrollableItem)return E.querySelectorAll(s.scrollableItem)},prev:function(){t.scrollPrev(),C.play()},next:function(){t.scrollNext(),C.play()},reset:function(){t.doReset(),l()},onLeft:$,onRight:k})}(R);var O=u.throttle(m,25);e.$watch(function(){return M.offsetWidth},function(t,e){y()}),e.$on("$destroy",function(){x(),C.pause()}),function(){angular.element(n).on("resize",y),r.on("touchstart mousedown",f),r[0].addEventListener("DOMMouseScroll",v,{passive:!1}),r[0].addEventListener("mousewheel",v,{passive:!1})}()}}}]),t.directive("scrollableY",["$parse","$compile","$window","$timeout","Scrollable","Animate","Style","Events","Utils",function(t,e,n,r,o,i,a,s,u){return{restrict:"A",template:'<div class="content" ng-transclude></div>',transclude:!0,link:function(e,r,s,c){function l(t){R.setContainer(E),R.setContent(M),R.setEnabled(g());var e=(R.renderY(),R.getCurrent());I.transform("translate3d(0,"+e.y.toFixed(2)+"px,0)"),I.set(M)}function f(t){"touchstart"==t.type&&r.off("mousedown",f),R.dragStart(u.getTouch(t))&&(w(),C.play())}function h(t){"touchmove"==t.type&&angular.element(n).off("mousemove",h),R.dragMove(u.getTouch(t))}function d(t){"touchend"==t.type&&angular.element(n).off("mouseup",d),R.dragEnd(),b()}function m(t){return R.wheelY(t)}function v(t){t||(t=n.event),t=t.originalEvent?t.originalEvent:t;var e=t.deltaY<0||t.wheelDelta>0||t.deltaY<0?1:-1;console.log("onWheel",e,R.wheelYCheck(e),t),R.wheelYCheck(e)&&(O(e),C.play(),t.stopPropagation(),t.preventDefault())}function p(){console.log("off"),b(),R.off()}function g(){var t=!0;return S&&(t=t&&S(e)),t=t&&n.innerWidth>=1024,t=t&&E.offsetHeight<M.offsetHeight}function y(){g()||p(),l()}function x(){angular.element(n).off("resize",y),r.off("touchstart mousedown",f),r[0].removeEventListener("DOMMouseScroll",v),r[0].removeEventListener("mousewheel",v)}function w(){angular.element(n).on("touchmove mousemove",h),angular.element(n).on("touchend mouseup",d)}function b(){angular.element(n).off("touchmove mousemove",h),angular.element(n).off("touchend mouseup",d)}var $,k,S;s.onTop&&($=t(s.onTop)),s.onBottom&&(k=t(s.onBottom)),s.showIndicatorFor&&t(s.showIndicatorFor),s.scrollableWhen&&(S=t(s.scrollableWhen)),r.attr("unselectable","on").addClass("unselectable");var E=r[0],M=E.querySelector(".content"),T=angular.element(T),I=new a,C=new i(l),R=s.scrollableY?t(s.scrollableY)(e):new o;!function(t){t.link({getItems:function(){if(s.scrollableItem)return E.querySelectorAll(s.scrollableItem)},prev:function(){t.scrollPrev(),C.play()},next:function(){t.scrollNext(),C.play()},reset:function(){t.doReset(),l()},onTop:$,onBottom:k})}(R);var O=u.throttle(m,25);e.$watch(function(){return M.offsetHeight},function(t,e){y()}),e.$on("$destroy",function(){x(),C.pause()}),function(){angular.element(n).on("resize",y),r.on("touchstart mousedown",f),r[0].addEventListener("DOMMouseScroll",v,{passive:!1}),r[0].addEventListener("mousewheel",v,{passive:!1})}()}}}])}(),function(){"use strict";angular.module("artisan").factory("Scrollable",["Point","Rect",function(t,e){function n(){function n(t){J.width=t.offsetWidth,J.height=t.offsetHeight}function r(t){_.width=t.offsetWidth,_.height=t.offsetHeight}function o(t){A=t}function i(){return H}function a(){return B}function s(t){if(t!==Y){Y=t;var e=f(t);return e&&(D.x=e.offsetLeft,D.y=e.offsetTop),!0}}function u(t){return!L&&(U.x=W.x=H.x,U.y=W.y=H.y,X.x=0,X.y=0,V=t,z=!1,!0)}function c(t){F=q,q=t,P=!0}function l(){q&&F&&(X.x+=4*(q.x-F.x),X.y+=4*(q.y-F.y)),U.x=W.x=H.x,U.y=W.y=H.y,P=!1,q=null,V=null,F=null}function f(t){var e=null,n=G.getItems();return n&&t>=0&&t<n.length&&(e=n[t]),e}function h(){s(Math.max(0,Y-1))}function d(){var t=G.getItems();s(Math.min(t.length-1,Y+1))}function m(){W.x=H.x=0}function v(){P=!1,z=!1,q=null,V=null}function p(t){L||G.onLeft&&(L=!0,G.onLeft(t).then().finally(function(){k(0)}))}function g(t){L||G.onRight&&(L=!0,G.onRight(t).then().finally(function(){J.width-_.width>Z.width?U.x=W.x=Z.width:U.x=W.x=Z.width+j,k(0)}))}function y(){var t=!0;return A?(Z.x=0,Z.width=J.width-_.width,P?(W.x=U.x+q.x-V.x,x()&&(U.x=W.x,V.x=q.x)):X.x?(W.x+=X.x,X.x*=.75,z&&x(),Math.abs(X.x)<.05&&(X.x=0,G.wheeling=z=!1)):D.x&&(W.x=-D.x,D.x=0),W.x=Math.round(1e4*W.x)/1e4,W.x=Math.min(Z.x,W.x),W.x=Math.max(Z.width,W.x),H.x+=(W.x-H.x)/4,0===X.x&&Math.abs(W.x-H.x)<.05&&(H.x=W.x,w()||(t=!1))):(H.x=W.x=0,t=!1),t}function x(){var t=!1;return Z.x+=j,Z.width-=j,W.x>Z.x?(t=!0,p()):W.x<Z.width&&(t=!0,g()),t}function w(){if(N){var t=G.getItems();if(t){var e=-1,n=Number.POSITIVE_INFINITY;if(angular.forEach(t,function(t,r){var o=Math.abs(W.x+X.x- -1*t.offsetLeft);o<n&&(n=o,e=r)}),-1!==e)return s(e)}}}function b(t){W.x+=t*_.height,X.x+=5*t,z=!0}function $(t){return!(L||!A)&&(t<0?W.x>Z.width:W.x<Z.x)}function k(t){U.x=W.x=t,setTimeout(function(){v(),L=!1},500)}function S(t){L||G.onTop&&(L=!0,G.onTop(t).then().finally(function(){O(0)}))}function E(t){L||G.onBottom&&(L=!0,G.onBottom(t).then().finally(function(){J.height-_.height>Z.height?U.y=W.y=Z.height:U.y=W.y=Z.height+j,O(0)}))}function M(){var t=!0;return A?(Z.y=0,Z.height=J.height-_.height,P?(W.y=U.y+q.y-V.y,T()&&(U.y=W.y,V.y=q.y)):X.y?(W.y+=X.y,X.y*=.75,z&&x(),Math.abs(X.y)<.05&&(X.y=0,G.wheeling=z=!1)):D.y&&(W.y=-D.y,D.y=0),W.y=Math.round(1e4*W.y)/1e4,W.y=Math.min(Z.y,W.y),W.y=Math.max(Z.height,W.y),H.y+=(W.y-H.y)/4,0===X.y&&Math.abs(W.y-H.y)<.05&&(H.y=W.y,I()||(t=!1))):(H.y=W.y=0,t=!1),t}function T(){var t=!1;return Z.y+=j,Z.height-=j,W.y>Z.y?(t=!0,S()):W.y<Z.height&&(t=!0,E()),t}function I(){if(N){var t=G.getItems();if(t){var e=-1,n=Number.POSITIVE_INFINITY;if(angular.forEach(t,function(t,r){var o=Math.abs(W.y+X.y- -1*t.offsetTop);o<n&&(n=o,e=r)}),-1!==e)return s(e)}}}function C(t){W.y+=t*_.width,X.y+=5*t,z=!0}function R(t){return!(L||!A)&&(t<0?W.y>Z.height:W.y<Z.y)}function O(t){U.y=W.y=t,setTimeout(function(){v(),L=!1},500)}var A,N,L,P,z,V,q,F,j=150,Y=0;N=!0;var U=new t,W=new t,H=new t,B=new t,D=new t,X=new t,J=new e,_=new e,Z=new e,G={start:U,end:W,current:H,indicator:B,speed:X,overflow:Z,container:J,content:_,setContainer:n,setContent:r,setEnabled:o,getCurrent:i,getIndicator:a,scrollToIndex:s,scrollPrev:h,scrollNext:d,dragStart:u,dragMove:c,dragEnd:l,doReset:m,off:v,doLeft:p,doRight:g,renderX:y,scrollToX:k,wheelX:b,wheelXCheck:$,doTop:S,doBottom:E,renderY:M,scrollToY:O,wheelY:C,wheelYCheck:R};angular.extend(this,G),G=this}function r(t){angular.extend(this,t)}return n.prototype={link:r,getItems:function(){return[content]}},n}])}(),function(){"use strict";function t(t){function e(e,n,r,o){function i(t){n.removeClass("interaction-animate"),n.offsetWidth,a.style.left=t.relative.x+"px",a.style.top=t.relative.y+"px",setTimeout(function(){n.addClass("interaction-animate"),setTimeout(function(){n.removeClass("interaction-animate")},1e3)},10)}if(!r.ngBind&&("#"!==r.href||r.ngHref||r.ngClick)){n.addClass("interaction-tap");var a=document.createElement("interaction");n[0].appendChild(a);var s={down:i};new t(n).add(s,e)}}return{restrict:"A",priority:0,link:e}}var e=angular.module("artisan");e.directive("href",["Events",t]),e.directive("ngClick",["Events",t])}();
//# sourceMappingURL=artisan.min.js.map
