!function(){"use strict";angular.module("artisan",["ng","ngRoute","ngMessages"])}(),function(){"use strict";var e=angular.module("artisan");e.factory("Color",[function(){function e(e,t,n,r){if(arguments.length>1)this.r=e||0===e?e:0,this.g=t||0===t?t:0,this.b=n||0===n?n:0,this.a=r||0===r?r:255;else{var o=e||"0xffffff";o=parseInt(o),e.length>8?(this.r=o>>24&255,this.g=o>>16&255,this.b=o>>8&255,this.a=o>>0&255):(this.r=o>>16&255,this.g=o>>8&255,this.b=o>>0&255,this.a=255)}}return e.componentToHex=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},e.luma=function(e){return e.dot({r:95,g:100,b:60})},e.contrast=function(t){return new e(e.luma(t)>.6?"0x000000":"0xffffff")},e.darker=function(t,n,r){return r=r||0,new e(Math.max(Math.floor(t.r*r),Math.floor(t.r-255*n)),Math.max(Math.floor(t.g*r),Math.floor(t.g-255*n)),Math.max(Math.floor(t.b*r),Math.floor(t.b-255*n)),t.a)},e.lighter=function(t,n,r){return r=r||1,new e(Math.min(t.r+Math.floor((255-t.r)*r),Math.floor(t.r+255*n)),Math.min(t.g+Math.floor((255-t.g)*r),Math.floor(t.g+255*n)),Math.min(t.b+Math.floor((255-t.b)*r),Math.floor(t.b+255*n)),t.a)},e.prototype={toUint:function(){return(this.r<<24)+(this.g<<16)+(this.b<<8)+this.a},toHex:function(){return"#"+e.componentToHex(this.r)+e.componentToHex(this.g)+e.componentToHex(this.b)+e.componentToHex(this.a)},toRgba:function(){return"rgba("+this.r+","+this.g+","+this.b+","+(this.a/255).toFixed(3)+")"},dot:function(e){return this.r/255*(e.r/255)+this.g/255*(e.g/255)+this.b/255*(e.b/255)},alpha:function(e,t,n){return t=t||0,n=n||1,this.a=Math.floor(255*(t+e*(n-t))),this},makeSet:function(){return this.foreground=e.contrast(this),this.border=e.darker(this,.3),this.light=e.lighter(this,.3),this}},e}]),e.factory("Shape",[function(){function e(){}return e.shapeCircle=function(e,t,n,r,o,i){o=o||0,i=i||2*Math.PI,e.ctx.arc(t,n,r,o,i,!1)},e.shapeStar=function(e,t,n,r,o,a){var s,u,c=Math.PI/2*3,l=Math.PI/a,f=e.ctx;for(f.moveTo(t,n-r),i=0;i<a;i++)s=t+Math.cos(c)*r,u=n+Math.sin(c)*r,f.lineTo(s,u),c+=l,s=t+Math.cos(c)*o,u=n+Math.sin(c)*o,f.lineTo(s,u),c+=l;f.lineTo(t,n-r)},e.shapeRoundRect=function(e,t,n){var r=e.ctx,o=t.x,i=t.y,a=t.w,s=t.h;if(void 0===typeof n&&(n=4),"number"==typeof n)n={tl:n,tr:n,br:n,bl:n};else{var u={tl:0,tr:0,br:0,bl:0};for(var c in u)n[c]=n[c]||u[c]}r.moveTo(o+n.tl,i),r.lineTo(o+a-n.tr,i),r.quadraticCurveTo(o+a,i,o+a,i+n.tr),r.lineTo(o+a,i+s-n.br),r.quadraticCurveTo(o+a,i+s,o+a-n.br,i+s),r.lineTo(o+n.bl,i+s),r.quadraticCurveTo(o,i+s,o,i+s-n.bl),r.lineTo(o,i+n.tl),r.quadraticCurveTo(o,i,o+n.tl,i)},e.circle=function(){var t=Array.prototype.slice.call(arguments),n=t[0].ctx;n.beginPath(),e.shapeCircle.apply(this,t),n.closePath()},e.star=function(){var t=Array.prototype.slice.call(arguments),n=t[0].ctx;n.beginPath(),e.shapeStar.apply(this,t),n.closePath()},e.roundRect=function(){var t=Array.prototype.slice.call(arguments),n=t[0].ctx;n.beginPath(),e.shapeRoundRect.apply(this,t),n.closePath()},e}]),e.constant("PainterColors",{black:"0x14191e",white:"0xffffff",blue:"0x0023FF",red:"0xF21500",lightBlue:"0x79ccf2",lightYellow:"0xfff79a",greyLighter:"0xf8f8f8",greyLight:"0xeeeeee",greyMedium:"0xcccccc",grey:"0x90939b",map:"0x24292e"}),e.factory("Palette",["$q","Painter","Rect",function(e,t,n){function r(){this.painter=(new t).setSize(0,0),this.buffer=(new t).setSize(0,0),this.size={w:0,h:0},this.pool={},this.rows={}}return r.prototype={getRect:function(e,t){var r=this.painter,o=this.size,i=this.rows,a=new n(0,0,e,t),s=i[t]||{x:0,y:o.h};if(o.w=Math.max(o.w,s.x+e),o.h=Math.max(o.h,s.y+t),r.canvas.width||r.canvas.height){if(o.w>r.canvas.width||o.h>r.canvas.height){var u=r.canvas;r.setCanvas(document.createElement("canvas")),r.setSize(o.w,o.h),r.ctx.drawImage(u,0,0)}}else r.setSize(o.w,o.h);return a.x=s.x,a.y=s.y,s.x+=e,i[t]=s,a},add:function(t,n){var r=this;if(angular.isString(n)){var o=e.defer(),i=new Image;return i.onload=function(){r.addShape(t,i.width,i.height,function(e,t){e.ctx.drawImage(i,0,0)}),o.resolve(i)},i.onerror=function(){o.reject("connot load "+n)},i.src=n,o.promise}var a=Array.prototype.slice.call(arguments);return r.addShape.apply(r,a)},addShape:function(e,t,n,r){var o=this.painter,i=this.getRect(t,n);o.ctx.save(),o.ctx.rect(i.x,i.y,i.w,i.h),o.ctx.clip(),o.ctx.translate(i.x,i.y),r.call(o,o,i.clone().setPos(0,0)),o.ctx.restore(),this.pool[e]=i},draw:function(e,t,n,r,o){var i=this.pool[t];i&&e.drawRect(this.painter.canvas,i,{x:n,y:r,w:i.w,h:i.h},o)},tint:function(e,t,n,r,o,i){var a=this.pool[t];if(a){var s=this.painter,u=this.buffer.setSize(a.w,a.h);u.save(),u.setFill(o),u.fillRect(),u.ctx.globalCompositeOperation="destination-atop",u.ctx.drawImage(s.canvas,a.x,a.y,a.w,a.h,0,0,a.w,a.h),u.restore(),console.log(n,r,u.canvas,e.canvas),e.draw(u.canvas,{x:n,y:r},i)}},pattern:function(e,t,n,r,o,i,a){function s(t){var a=e.ctx;a.save(),a.translate(n,r),a.fillStyle=t,a.fillRect(-n,-r,o,i),a.translate(-n,-r),a.restore()}var u=this.pool[t];if(u){var c,l=u.img;if(l&&u.color==a)c=e.ctx.createPattern(l,"repeat"),s(c);else{var f=this.buffer.setSize(u.w,u.h);a?(u.color=a,f.save(),f.setFill(a),f.fillRect(),f.ctx.globalCompositeOperation="destination-atop",f.ctx.drawImage(this.painter.canvas,u.x,u.y,u.w,u.h,0,0,u.w,u.h),f.restore()):f.ctx.drawImage(this.painter.canvas,u.x,u.y,u.w,u.h,0,0,u.w,u.h),l=new Image,l.onload=function(){u.img=l,c=e.ctx.createPattern(l,"repeat"),s(c)},l.src=f.toDataURL()}}}},r}]),e.factory("Painter",["Shape","Rect","Color","PainterColors",function(e,t,n,r){function o(e){e=e||document.createElement("canvas"),this.rect=new t,this.drawingRect=new t,this.setColors(),this.setCanvas(e)}o.colors={},angular.forEach(r,function(e,t){o.colors[t]=new n(e).makeSet()});o.colors;return o.prototype={colors:o.colors,setColors:function(){var e=this.colors;angular.forEach(r,function(t,r){e[r]=new n(t).makeSet()})},setCanvas:function(e){this.canvas=e,this.setSize(e.offsetWidth,e.offsetHeight);var t=e.getContext("2d");return t.lineCap="square",this.ctx=t,this},setSize:function(e,t){return this.canvas.width=e,this.canvas.height=t,this.rect.w=e,this.rect.h=t,this},copy:function(e){return this.ctx.drawImage(e,0,0),this},clear:function(){return this.resize(),this},resize:function(){return this.setSize(this.canvas.offsetWidth,this.canvas.offsetHeight),this},setText:function(e,t,n,r){e=e||"11px monospace",t=t||"center",n=n||"middle",r=r||this.colors.black;var o=this.ctx;return o.font=e,o.textAlign=t,o.textBaseline=n,o.fillStyle=r.toRgba(),this},setFill:function(e){return e=e||this.colors.black,this.ctx.fillStyle=e.toRgba(),this},setStroke:function(e,t){e=e||this.colors.black;var n=this.ctx;return t=t||1,n.strokeStyle=e.toRgba(),n.lineWidth=t,this},fillText:function(e,t,n,r,o){return n&&(r=r||"",o=o||Math.floor(n/8),e.length>o&&(e=e.substr(0,Math.min(e.length,o)).trim()+r)),this.ctx.fillText(e,t.x,t.y),this},fillRect:function(e){e=e||this.rect;var t=this.ctx,n=e.x,r=e.y,o=e.w,i=e.h;return t.fillRect(n,r,o,i),this},strokeRect:function(e){e=e||this.rect;var t=this.ctx,n=e.x,r=e.y,o=e.w,i=e.h;return t.strokeRect(n,r,o,i),this},fill:function(){return this.ctx.fill(),this},stroke:function(){return this.ctx.stroke(),this},begin:function(){return this.ctx.beginPath(),this},close:function(){return this.ctx.closePath(),this},save:function(){return this.ctx.save(),this},restore:function(){return this.ctx.restore(),this},rotate:function(e){this.ctx.rotate(e*Math.PI/180)},translate:function(e){this.ctx.translate(e.x,e.y)},toDataURL:function(){return this.canvas.toDataURL()},draw:function(e,t,n){if(e){t.w=t.w||e.width,t.h=t.h||e.height;var r=this.ctx,o=this.drawingRect,i=o.x=t.x-t.w/2,a=o.y=t.y-t.h/2;o.w=t.w,o.h=t.h;r.save(),r.translate(i,a),n&&n.call(this),r.drawImage(e,0,0),r.restore()}return this},drawRect:function(e,t,n,r){if(e){t.w=t.w||e.width,t.h=t.h||e.height,n.w=n.w||e.width,n.h=n.h||e.height;var o=this.ctx,i=this.drawingRect,a=i.x=n.x-t.w/2,s=i.y=n.y-t.h/2;i.w=n.w,i.h=n.h;o.save(),o.translate(a,s),r&&r.call(this),o.drawImage(e,t.x,t.y,t.w,t.h,0,0,n.w,n.h),o.restore()}return this},flip:function(e){e=e||{x:1,y:-1};var t=this.ctx,n=this.drawingRect;t.translate(-1===e.x?n.w:0,-1===e.y?n.h:0),t.scale(e.x,e.y)}},o}])}(),function(){"use strict";angular.module("artisan").directive("expandable",["$parse","State","Dom",function(e,t,n){function r(r,o,i,a){function s(e){var t=window.getComputedStyle(e,null);return{display:t.getPropertyValue("display"),position:t.getPropertyValue("position"),width:t.getPropertyValue("width"),height:t.getPropertyValue("height"),top:t.getPropertyValue("top"),right:t.getPropertyValue("right"),bottom:t.getPropertyValue("bottom"),left:t.getPropertyValue("left"),"margin-top":t.getPropertyValue("margin-top"),"margin-right":t.getPropertyValue("margin-right"),"margin-bottom":t.getPropertyValue("margin-bottom"),"margin-left":t.getPropertyValue("margin-left"),"padding-top":t.getPropertyValue("padding-top"),"padding-right":t.getPropertyValue("padding-right"),"padding-bottom":t.getPropertyValue("padding-bottom"),"padding-left":t.getPropertyValue("padding-left"),"background-color":t.getPropertyValue("background-color")}}function u(e){var t="";return angular.forEach(e,function(e,n){t+=n+": "+e+"; "}),t}function c(e,t){e.style.cssText=u(t)}function l(){I=s($),c(_,I),$.parentNode.insertBefore(_,$),C=$.style.cssText,D.addClass("expandable-expanding"),n.getParents($).each(function(e,t){e.addClass("expandable-parent")})}function f(){$.style.cssText=C,D.removeClass("expandable-expanding"),_.parentNode.removeChild(_),n.getParents($).each(function(e,t){e.removeClass("expandable-parent")})}function d(){if(A=D&&D.hasClass("expandable-expanding")?_.getBoundingClientRect():$.getBoundingClientRect(),T={top:0,left:0,width:A.width,height:A.height},S={top:0+(k.top||0),left:0+(k.left||0),width:T.width+(k.right||0),height:T.height+(k.bottom||0)},E.top&&(S.top=E.top-A.top),E.left&&(S.left=E.left-A.left),E.right){var e=window.innerWidth-E.right,t=A.left+S.left;S.width=e-t}if(E.bottom){var n=window.innerHeight-E.bottom,r=A.top+S.top;S.height=n-r}}function h(){P?M.idle():(d(),l(),R=angular.copy(T),c($,T),dynamics.animate(M,{pow:1},{type:dynamics.easeInOut,duration:350,complete:function(){P=!0,M.idle()},change:function(){m()}}))}function g(){P?dynamics.animate(M,{pow:0},{type:dynamics.easeInOut,duration:350,complete:function(){P=!1,f(),M.idle()},change:function(){m()}}):M.idle()}function m(){R.left=T.left+(S.left-T.left)*M.pow+"px",R.top=T.top+(S.top-T.top)*M.pow+"px",R.width=T.width+(S.width-T.width)*M.pow+"px",R.height=T.height+(S.height-T.height)*M.pow+"px",c($,R)}function p(){k=i.expandableRelative?e(i.expandableRelative)(r):{},E=i.expandableAbsolute?e(i.expandableAbsolute)(r):{},($=o[0].querySelector(i.expandable))&&(D=angular.element($))}function v(e){p(),$&&h()}function y(e){n.getClosestNode(e.target,o[0])||(p(),$&&g())}function w(e){(P||M.isBusy)&&(d(),m())}function x(e){switch(e.key.toLowerCase()){case"escape":p(),$&&g();break;case"enter":p(),$&&$.tagName&&"input"===$.tagName.toLowerCase()&&g()}}function b(){o.off("mousedown touchstart",v).off("keydown",x),angular.element(window).off("click",y).off("resize",w)}var M=new t;M.pow=0;var k,E,$,D,T,S,R,A,I,C,P=!1,_=document.createElement("div");angular.element(_).addClass("expandable-placeholder"),r.$on("$destroy",function(){b()}),function(){o.on("mousedown touchstart",v).on("keydown",x),angular.element(window).on("click",y).on("resize",w)}()}return{restrict:"A",link:r}}])}(),function(){"use strict";var e=angular.module("artisan");e.directive("controlMessages",[function(){return{restrict:"E",templateUrl:"artisan/components/forms/partial/messages",transclude:{message:"?messageItems"},link:function(e,t,n,r){}}}]),e.directive("control",["$parse",function(e){function t(e,t,n){e=e||"",t=t||"";var r=e.split(",");if(r.length>1){var o=r.shift();return angular.forEach(r,function(e,r){o=n?o.split("{"+r+"}").join("' + "+t+e+" + '"):o.split("{"+r+"}").join(t+e)}),n?"'"+o+"'":o}return t+e}var n=0;return{restrict:"A",templateUrl:function(e,t){var n="artisan/components/forms/partial/text";switch(t.control){case"select":n="artisan/components/forms/partial/select"}return n},scope:{ngModel:"=",required:"=",form:"@",title:"@",placeholder:"@",source:"=?",key:"@?",label:"@?"},require:"ngModel",transclude:!0,link:{pre:function(r,o,i,a,s){var u=r.label=r.label?r.label:"name",c=r.key=r.key?r.key:"id";if("select"===i.control){var l=i.filter?"| "+i.filter:"",f=t(u,"item.",!0);r.getOptions=function(){return i.number?"item."+c+" as "+f+" disable when item.disabled for item in source "+l:f+" disable when item.disabled for item in source "+l+" track by item."+c}}var d=(r.type=i.control,r.form=r.form||"form",r.title=r.title||"untitled");r.placeholder=r.placeholder||d,r.field=d.replace(/[^0-9a-zA-Z]/g,"").split(" ").join("")+ ++n;r.format=i.format||null,r.precision=i.precision||null,r.validate=i.validate||i.control,r.minLength=i.minLength||0,r.maxLength=i.maxLength||Number.POSITIVE_INFINITY,r.min=i.min||null,r.max=i.max||null,r.options=e(i.options)(r)||{},r.focus=!1,r.visible=!1,r.onChange=function(t){e(i.onChange)(r.$parent)},r.onFilter=function(t){e(i.onFilter)(r.$parent)},r.getType=function(){var e="text";switch(i.control){case"password":e=r.visible?"text":"password";break;default:e=i.control}return e},r.getClasses=function(){var t=e(r.form)(r.$parent),n=e(r.form+"."+r.field)(r.$parent);return{"control-focus":r.focus,"control-success":n.$valid,"control-error":n.$invalid&&(t.$submitted||n.$touched),"control-empty":!n.$viewValue}},r.getMessages=function(){var t=e(r.form)(r.$parent),n=e(r.form+"."+r.field)(r.$parent);return(t.$submitted||n.$touched)&&n.$error},r.toggleVisibility=function(){r.visible=!r.visible}}}}}]),e.directive("_control",["$http","$templateCache","$compile","$parse",function(e,t,n,r){function o(e,t,n){e=e||"",t=t||"";var r=e.split(",");if(r.length>1){var o=r.shift();return angular.forEach(r,function(e,r){o=n?o.split("{"+r+"}").join("' + "+t+e+" + '"):o.split("{"+r+"}").join(t+e)}),n?"'"+o+"'":o}return t+e}var i=0;return{restrict:"A",templateUrl:function(e,t){var n="artisan/components/forms/partial/text";switch(t.control){case"select":n="artisan/components/forms/partial/select"}return n},scope:{ngModel:"=",required:"=",form:"@",title:"@",placeholder:"@"},require:"ngModel",compile:function(e,t){return{pre:function(e,t,n){if("select"===n.control){var a=n.label?n.label:"name",s=n.key?n.key:"id",u=n.min?" | filter:gte('"+s+"', "+n.min+")":"",c=o(a,"item.",!0);e.options=n.number?"item."+s+" as "+c+" disable when item.disabled for item in "+n.source+u:c+" disable when item.disabled for item in "+n.source+u+" track by item."+s,console.log("control.compile.pre",e.options)}var l=(e.type=n.control,e.form=e.form||"form",e.title=e.title||"untitled");e.placeholder=e.placeholder||l,e.field=l.replace(/[^0-9a-zA-Z]/g,"").split(" ").join("")+ ++i;e.validate=n.validate||n.control,e.format=n.format||null,e.precision=n.precision||null,e.validate=n.validate||n.control,e.minLength=n.min||0,e.maxLength=n.max||Number.POSITIVE_INFINITY,e.options=r(n.options)(e)||{},e.focus=!1,e.visible=!1,e.getType=function(){var t="text";switch(n.control){case"password":t=e.visible?"text":"password";break;default:t=n.control}return t},e.getClasses=function(){var t=r(e.form)(e.$parent),n=r(e.form+"."+e.field)(e.$parent);return{"control-focus":e.focus,"control-success":n.$valid,"control-error":n.$invalid&&(t.$submitted||n.$touched),"control-empty":!n.$viewValue}},e.getMessages=function(){var t=r(e.form)(e.$parent),n=r(e.form+"."+e.field)(e.$parent);return(t.$submitted||n.$touched)&&n.$error}}}}}}]),e.directive("numberPicker",["$parse","$timeout",function(e,t){return{restrict:"A",template:'<div class="input-group">   <span class="input-group-btn"><button class="btn btn-outline-primary" type="button">-</button></span>   <div ng-transclude></div>   <span class="input-group-btn"><button class="btn btn-outline-primary" type="button">+</button></span></div>',replace:!0,transclude:!0,link:function(n,r,o,i){function a(r){var i=e(o.min)(n),a=e(o.numberPicker),s=a.assign;t(function(){s(n,Math.max(i,a(n)-1))})}function s(r){var i=e(o.max)(n),a=e(o.numberPicker),s=a.assign;t(function(){s(n,Math.min(i,a(n)+1))})}function u(){angular.element(l).off("touchstart mousedown",a),angular.element(f).off("touchstart mousedown",s)}var c=r[0],l=c.querySelectorAll(".input-group-btn > .btn")[0],f=c.querySelectorAll(".input-group-btn > .btn")[1];n.$on("$destroy",function(){u()}),function(){angular.element(l).on("touchstart mousedown",a),angular.element(f).on("touchstart mousedown",s)}()}}}])}(),function(){"use strict";angular.module("artisan").directive("validate",["$filter",function(e){return{require:"ngModel",link:function(t,n,r,o){function i(){d=!0,l&&(n[0].value=o.$modelValue||null,o.$modelValue||o.$setViewValue(null))}function a(){if(l&&!o.$invalid)switch(c){case"date":case"datetime":case"datetime-local":n[0].value=o.$modelValue?e("date")(o.$modelValue,l):" ";break;default:n[0].value=o.$modelValue?e("number")(o.$modelValue,f)+" "+l:" "}}function s(){d=!1,a()}function u(){n.off("focus",i),n.off("blur",s)}var c=r.validate,l=r.format||"",f=r.precision||2,d=!1;switch(c){case"date":case"datetime":case"datetime-local":o.$formatters.push(function(t){return t?e("date")(t,l):null});break;case"number":o.$parsers.unshift(function(e){var t=!1;return void 0!==e&&""!==e?(t=-1!==String(e).indexOf(Number(e).toString()),e=Number(e),o.$setValidity("number",t),t&&(o.$setValidity("positive",e>=.01),void 0!==r.min&&o.$setValidity("range",e>=Number(r.min)),void 0!==r.max&&o.$setValidity("range",e<=Number(r.max)))):(t=!0,e=Number(e),o.$setValidity("number",!0),o.$setValidity("positive",!0),void 0!==r.min&&o.$setValidity("range",!0),void 0!==r.max&&o.$setValidity("range",!0)),e}),o.$formatters.push(function(t){return t?e("number")(t,f)+" "+l:null});break;case"anynumber":o.$parsers.unshift(function(e){var t=!1;return void 0!==e&&""!==e?(t=-1!==String(e).indexOf(Number(e).toString()),e=Number(e),o.$setValidity("number",t),t&&(void 0!==r.min&&o.$setValidity("range",e>=Number(r.min)),void 0!==r.max&&o.$setValidity("range",e<=Number(r.max)))):(t=!0,e=Number(e),o.$setValidity("number",!0),void 0!==r.min&&o.$setValidity("range",!0),void 0!==r.max&&o.$setValidity("range",!0)),e}),o.$formatters.push(function(t){return t||0===t?e("number")(t,f)+" "+l:null})}t.$on("$destroy",function(){u()}),function(){n.on("focus",i),n.on("blur",s)}()}}}])}(),function(){"use strict";function e(e){function t(t,n,r,o){function i(e){n.removeClass("interaction-animate"),n.offsetWidth,a.style.left=e.relative.x+"px",a.style.top=e.relative.y+"px",setTimeout(function(){n.addClass("interaction-animate"),setTimeout(function(){n.removeClass("interaction-animate")},1e3)},10)}if(!r.ngBind){n.addClass("interaction-tap");var a=document.createElement("interaction");n[0].appendChild(a);var s={down:i};new e(n).add(s,t)}}return{restrict:"A",priority:0,link:t}}var t=angular.module("artisan");t.directive("ngHref",["Events",e]),t.directive("ngClick",["Events",e])}(),function(){"use strict";angular.module("artisan").directive("modalView",["$parse","$templateRequest","$compile","$controller","Dom",function(e,t,n,r,o){function i(e,t,o,i){t.html(o);var a=n(t.contents());if(i.controller){var s=e.$new();angular.extend(s,i);var u=r(i.controller,{$scope:s});i.controllerAs&&(e[i.controllerAs]=u),t.data("$ngControllerController",u),t.children().data("$ngControllerController",u),e=s}a(e)}return{restrict:"A",priority:-400,link:function(n,r,o,a){var s=e(o.modalView);s=s(n),s.templateUrl=s.templateUrl||"artisan/components/modals/partial/modal",t(s.templateUrl).then(function(e){i(n,r,e,s)})}}}])}(),function(){"use strict";angular.module("artisan").provider("$modal",[function(){function e(e,t){return n[e]=t,this}var t=[],n={};this.modals=t,this.routes=n,this.when=e,this.$get=["$q","$timeout",function(e,r){function o(e){var n=-1;angular.forEach(t,function(t,r){t===e&&(n=r)}),-1!==n&&r(function(){e.active=!1,t.splice(n,1),t.length&&(t[t.length-1].active=!0)})}function i(e){var n=-1;angular.forEach(t,function(t,r){t===e&&(n=r)}),-1!==n&&(e.active=!1,r(function(){for(;t.length;)t.splice(t.length-1,1)},500))}function a(a,s){var u=e.defer();s=s||null;var c={title:"Untitled",controller:null,templateUrl:null,params:s},l=n[a];return l&&angular.extend(c,l),c.deferred=u,c.back=function(e){o(this),c.deferred.resolve(e,c)},c.resolve=function(e){i(this),c.deferred.resolve(e,c)},c.reject=function(){i(this),c.deferred.reject(c)},t.push(c),angular.forEach(t,function(e,t){e.active=!1}),t.length?c.active=!0:r(function(){c.active=!0},500),u.promise}return{modals:t,addModal:a}}]}])}(),function(){"use strict";var e=angular.module("artisan");e.directive("nav",["$parse","Nav",function(e,t){function n(n,r,o,i){n.$watch("items",function(r){if(r)if(angular.isArray(r)){var i=e(o.onPath)(n.$parent),a=e(o.onNav)(n.$parent),s=new t({onPath:i,onNav:a});s.setItems(r),n.item=s}else r instanceof t&&(n.item=r)})}return{restrict:"A",templateUrl:function(e,t){return t.template||"artisan/components/nav/partial/nav"},scope:{items:"=nav"},link:n}}]),e.directive("navItem",["$timeout","Events",function(e,t){function n(n,r,o,i){function a(t,n){var r=t.$nav.state;r.active=!0,e(function(){r.immediate=n,r.closed=r.closing=!1,r.opening=!0,e(function(){r.opening=!1,r.opened=!0})})}function s(t,n){var r=t.$nav.state;r.active=!1,e(function(){r.immediate=n,r.opened=r.opening=!1,r.closing=!0,e(function(){r.closing=!1,r.closed=!0})}),t.items&&angular.forEach(t.items,function(e){s(e,!0)})}function u(e){var t=e.$nav.state;t.active=!e.items||!t.active,t.active?(e.$nav.parent&&angular.forEach(e.$nav.parent.items,function(t){t!==e&&s(t,!0)}),a(e)):s(e)}function c(t){function r(){e(function(){u(o)})}var o=n.item;if(o.$nav.state.active)d=!1,r();else if(o.$nav.onNav){var i=o.$nav.onNav(o,o.$nav);i&&"function"==typeof i.then?(i.then(function(e){r()},function(e){}),d=!1):(d=i,r())}}function l(e){return f(e)}function f(e){if(!1===d)return e.stop(),!1}var d,h=angular.element(r[0].querySelector(".nav-link"));new t(h).add({down:c,click:l},n)}return{restrict:"A",templateUrl:function(e,t){return t.template||"artisan/components/nav/partial/nav-item"},scope:{item:"=navItem"},link:n}}]),e.directive("navTo",["$parse","$timeout","Events",function(e,t,n){function r(r,o,i){function a(n){return console.log("navTo.onDown",i.navTo),t(function(){e(i.navTo)(r)}),n.preventDefault(),!1}new n(o).add({down:a},r)}return{restrict:"A",link:r}}])}(),function(){"use strict";angular.module("artisan").factory("Nav",["Silent",function(e){function t(e){var t=this,n={items:[]};angular.extend(t,n),e&&angular.extend(t,e),t.setNav(t,null)}function n(t){e.silent(t)}function r(t){e.path(t)}function o(t){var n=this;n.path=e.path(),n.items=t,n.setNavs(t,n)}function i(e,t){var n=this;e&&angular.forEach(e,function(e){n.setNav(e,t),n.setNavs(e.items,e)})}function a(e,t){var n=this,r={parent:t||null,level:t?t.$nav.level+1:0,state:{},addItems:function(t){n.addItems(t,e)},onNav:n.onNav};if(e.$nav=r,r.path=n.getPath(e),r.path===n.path)for(r.state.active=!0,r.state.opened=!0;r.parent;)r=r.parent.$nav,r.state.active=!0,r.state.opened=!0}function s(e,t){var n=this;angular.isArray(e)?angular.forEach(e,function(e){n.addItem(e,t)}):n.addItem(e,t)}function u(e,t){var n=this;n.onPath,n.onNav,n.setNav(e,t),t&&(t.items=t.items||[],t.items.push(e))}function c(e){return this.onPath?this.onPath(e,e.$nav):e.path}var l={silent:n,path:r},f={addItem:u,addItems:s,getPath:c,setItems:o,setNav:a,setNavs:i};return angular.extend(t,l),angular.extend(t.prototype,f),t}])}(),function(){"use strict";angular.module("artisan").directive("popuppable",["$parse","State","Dom",function(e,t,n){function r(e,r,o,i){function a(e){var t="";return angular.forEach(e,function(e,n){t+=n+": "+e+"; "}),t}function s(e,t){e.style.cssText=a(t)}function u(){k.addClass("popuppable-opening"),n.getParents(M).each(function(e,t){e.addClass("popuppable-parent")})}function c(){k.removeClass("popuppable-opening"),n.getParents(M).each(function(e,t){e.removeClass("popuppable-parent")})}function l(){T?b.idle():(u(),D=angular.copy(E),w())}function f(){T?x():b.idle()}function d(){D.left=E.left+($.left-E.left)*b.pow+"px",D.top=E.top+($.top-E.top)*b.pow+"px",D.width=E.width+($.width-E.width)*b.pow+"px",D.height=E.height+($.height-E.height)*b.pow+"px",s(M,D)}function h(){(M=r[0].querySelector(o.popuppable))&&(k=angular.element(M),k.addClass("popuppable-target"))}function g(e){h(),M&&l()}function m(e){n.getClosestNode(e.target,r[0])||(h(),M&&f())}function p(e){(T||b.isBusy)&&d()}function v(e){switch(e.key.toLowerCase()){case"escape":h(),M&&f();break;case"enter":h(),M&&M.tagName&&"input"===M.tagName.toLowerCase()&&f()}}function y(){var e=r[0].querySelector(".popuppable-trigger");(e?angular.element(e):r).off("mousedown touchstart",g).off("keydown",v),angular.element(window).off("click",m).off("resize",p)}function w(){dynamics.animate(M,{opacity:1,scale:1},{type:dynamics.spring,frequency:200,friction:270,duration:800,complete:function(){T=!0,b.idle()}})}function x(){dynamics.animate(M,{opacity:0,scale:.1},{type:dynamics.easeInOut,duration:300,friction:100,complete:function(){T=!1,c(),b.idle()}})}var b=new t;b.pow=0;var M,k,E,$,D,T=!1;e.$on("$destroy",function(){y()}),function(){var e=r[0].querySelector(".popuppable-trigger");(e?angular.element(e):r).on("mousedown touchstart",g).on("keydown",v),angular.element(window).on("click",m).on("resize",p)}(),h()}return{restrict:"A",link:r}}])}(),function(){"use strict";window.ondragstart=function(){return!1};var e=angular.module("artisan");e.directive("scrollableX",["$parse","$compile","$timeout","Scrollable","Animate","Style","Events","Utils",function(e,t,n,r,o,i,a,s){return{restrict:"A",template:'<div class="scrollable-content" ng-transclude></div>',transclude:!0,link:function(t,n,s,u){function c(e){S.setContainer(k),S.setContent(E),S.setEnabled(p());var t=(S.renderX(),S.getCurrent());D.transform("translate3d("+t.x.toFixed(2)+"px,0,0)"),D.set(E)}function l(e){S.dragStart(e.absolute)&&(y(),T.play(),e.stop())}function f(e){S.dragMove(e.absolute);var t=S.getDrag();Math.abs(t.y)>Math.abs(t.x)?d(e):e.stop()}function d(e){S.dragEnd(e.absolute),e.stop(),w()}function h(e,t){return S.wheelX(e,t)}function g(e){S.wheelXCheck(e.dir)&&(R(e.dir,e.interval),T.play(),e.stop())}function m(){w(),S.off()}function p(){var e=!0;return M&&(e=e&&M(t)),e=e&&window.innerWidth>=1024,e=e&&k.offsetWidth<E.offsetWidth}function v(){p()||m(),c()}function y(){A.add({move:f,up:d},t)}function w(){A.remove({move:f,up:d})}var x,b,M;s.onLeft&&(x=e(s.onLeft)),s.onRight&&(b=e(s.onRight)),s.showIndicatorFor&&e(s.showIndicatorFor),s.scrollableWhen&&(M=e(s.scrollableWhen)),n.attr("unselectable","on").addClass("unselectable");var k=n[0],E=k.querySelector(".scrollable-content"),$=angular.element($),D=new i,T=new o(c),S=s.scrollableX?e(s.scrollableX)(t):new r;!function(e){e.link({getItems:function(){if(s.scrollableItem)return k.querySelectorAll(s.scrollableItem)},prev:function(){e.scrollPrev(),T.play()},next:function(){e.scrollNext(),T.play()},reset:function(){e.doReset(),T.play()},onLeft:x,onRight:b})}(S);var R=h;t.$watch(function(){return E.offsetWidth},function(e,t){v()});var A=(new a(n).add({down:l,wheel:g},t),new a(window).add({resize:v},t));t.$on("$destroy",function(){T.pause()})}}}]),e.directive("scrollableY",["$parse","$compile","$timeout","Scrollable","Animate","Style","Events","Utils",function(e,t,n,r,o,i,a,s){return{restrict:"A",template:'<div class="scrollable-content" ng-transclude></div>',transclude:!0,link:function(t,n,s,u){function c(e){S.setContainer(k),S.setContent(E),S.setEnabled(p());var t=(S.renderY(),S.getCurrent());D.transform("translate3d(0,"+t.y.toFixed(2)+"px,0)"),D.set(E)}function l(e){S.dragStart(e.absolute)&&(y(),T.play(),e.stop())}function f(e){S.dragMove(e.absolute);var t=S.getDrag();Math.abs(t.x)>Math.abs(t.y)?d(e):e.stop()}function d(e){S.dragEnd(e.absolute),e.stop(),w()}function h(e,t){return S.wheelY(e,t)}function g(e){S.wheelYCheck(e.dir)&&(R(e.dir,e.interval),T.play(),e.stop())}function m(){w(),S.off()}function p(){var e=!0;return M&&(e=e&&M(t)),e=e&&window.innerWidth>=1024,e=e&&k.offsetHeight<E.offsetHeight}function v(){p()||m(),c()}function y(){A.add({move:f,up:d},t)}function w(){A.remove({move:f,up:d})}var x,b,M;s.onTop&&(x=e(s.onTop)),s.onBottom&&(b=e(s.onBottom)),s.showIndicatorFor&&e(s.showIndicatorFor),s.scrollableWhen&&(M=e(s.scrollableWhen)),n.attr("unselectable","on").addClass("unselectable");var k=n[0],E=k.querySelector(".scrollable-content"),$=angular.element($),D=new i,T=new o(c),S=s.scrollableY?e(s.scrollableY)(t):new r;!function(e){e.link({getItems:function(){if(s.scrollableItem)return k.querySelectorAll(s.scrollableItem)},prev:function(){e.scrollPrev(),T.play()},next:function(){e.scrollNext(),T.play()},reset:function(){e.doReset(),T.play()},onTop:x,onBottom:b})}(S);var R=h;t.$watch(function(){return E.offsetHeight},function(e,t){v()});var A=(new a(n).add({down:l,wheel:g},t),new a(window).add({resize:v},t));t.$on("$destroy",function(){T.pause()})}}}])}(),function(){"use strict";angular.module("artisan").factory("Scrollable",["Utils","Point","Rect",function(e,t,n){function r(){function e(e){Q.width=e.offsetWidth,Q.height=e.offsetHeight}function r(e){J.width=e.offsetWidth,J.height=e.offsetHeight}function o(e){_=e}function i(){return W}function a(){return q}function s(){return G}function u(){return z}function c(e){if(e!==z){z=e;var n=h(e);return n&&(X=new t(n.offsetLeft,n.offsetTop)),!0}}function l(e){return!N&&(V.x=U.x=W.x,V.y=U.y=W.y,K.x=0,K.y=0,Y=e,z=-1,L=!1,!0)}function f(e){H=F,F=e,q.x=F.x-Y.x,q.y=F.y-Y.y,j=!0}function d(){F&&H&&(K.x+=4*(F.x-H.x),K.y+=4*(F.y-H.y)),V.x=U.x=W.x,V.y=U.y=W.y,j=!1,F=null,Y=null,H=null}function h(e){var t=null,n=ee.getItems();return n&&e>=0&&e<n.length&&(t=n[e]),t}function g(){var e=Math.max(0,z-1);console.log("scrollPrev",e),c(e)}function m(){var e=ee.getItems(),t=Math.min(e.length-1,z+1);console.log("scrollNext",t),c(t)}function p(){U.x=W.x=0}function v(){j=!1,L=!1,F=null,Y=null}function y(e){N||ee.onLeft&&(N=!0,ee.onLeft(e).then().finally(function(){$(0)}))}function w(e){N||ee.onRight&&(N=!0,ee.onRight(e).then().finally(function(){Q.width-J.width>Z.width?V.x=U.x=Z.width:V.x=U.x=Z.width+B,$(0)}))}function x(){var e=!0;return _?(Z.x=0,Z.width=Q.width-J.width,j?(U.x=V.x+F.x-Y.x,b()&&(V.x=U.x,Y.x=F.x)):K.x?(U.x+=K.x,K.x*=.75,L&&b(),Math.abs(K.x)<2.05&&(K.x=0,ee.wheeling=L=!1,M())):X&&(U.x=-X.x,X=null),U.x=Math.round(1e4*U.x)/1e4,U.x=Math.min(Z.x,U.x),U.x=Math.max(Z.width,U.x),W.x+=(U.x-W.x)/4,0===K.x&&Math.abs(U.x-W.x)<.05&&(W.x=U.x,M()||(e=!1))):(W.x=U.x=0,e=!1),e}function b(){var e=!1;return Z.x+=B,Z.width-=B,U.x>Z.x?(e=!0,y()):U.x<Z.width&&(e=!0,w()),e}function M(){var e=ee.getItems();if(e){var t=-1,n=Number.POSITIVE_INFINITY;if(angular.forEach(e,function(e,r){var o=Math.abs(U.x+K.x- -1*e.offsetLeft);o<n&&(n=o,t=r)}),-1!==t){if(O)return c(t);z=t}}}function k(e){return!(N||!_)&&(e<0?U.x-Z.width:U.x-Z.x)}function E(e,t){U.x+=100*e/1e3*t,K.x+=100*e/1e3*t,L=!0}function $(e){V.x=U.x=e,setTimeout(function(){v(),N=!1},500)}function D(e){N||ee.onTop&&(N=!0,ee.onTop(e).then().finally(function(){P(0)}))}function T(e){N||ee.onBottom&&(N=!0,ee.onBottom(e).then().finally(function(){Q.height-J.height>Z.height?V.y=U.y=Z.height:V.y=U.y=Z.height+B,P(0)}))}function S(){var e=!0;return _?(Z.y=0,Z.height=Q.height-J.height,j?(U.y=V.y+F.y-Y.y,R()&&(V.y=U.y,Y.y=F.y)):K.y?(U.y+=K.y,K.y*=.75,L&&R(),Math.abs(K.y)<2.05&&(K.y=0,ee.wheeling=L=!1,A())):X&&(U.y=-X.y,X=null),U.y=Math.round(1e4*U.y)/1e4,U.y=Math.min(Z.y,U.y),U.y=Math.max(Z.height,U.y),W.y+=(U.y-W.y)/4,0===K.y&&Math.abs(U.y-W.y)<.05&&(W.y=U.y,A()||(e=!1))):(W.y=U.y=0,e=!1),e}function R(){var e=!1;return Z.y+=B,Z.height-=B,U.y>Z.y?(e=!0,D()):U.y<Z.height&&(e=!0,T()),e}function A(){var e=ee.getItems();if(e){var t=-1,n=Number.POSITIVE_INFINITY;if(angular.forEach(e,function(e,r){var o=Math.abs(U.y+K.y- -1*e.offsetTop);o<n&&(n=o,t=r)}),-1!==t){if(O)return c(t);z=t}}}function I(e){
return!(N||!_)&&(e<0?U.y-Z.height:U.y-Z.y)}function C(e,t){U.y+=100*e/1e3*t,K.y+=100*e/1e3*t,L=!0}function P(e){V.y=U.y=e,setTimeout(function(){v(),N=!1},500)}var _,O,N,j,L,Y,F,H,B=150,z=0;O=!0;var V=new t,U=new t,W=new t,q=new t,G=new t,X=new t,K=new t,Q=new n,J=new n,Z=new n,ee={start:V,end:U,current:W,indicator:G,speed:K,overflow:Z,container:Q,content:J,setContainer:e,setContent:r,setEnabled:o,getCurrent:i,getDrag:a,getIndicator:s,getIndex:u,scrollToIndex:c,scrollPrev:g,scrollNext:m,dragStart:l,dragMove:f,dragEnd:d,doReset:p,off:v,doLeft:y,doRight:w,renderX:x,scrollToX:$,wheelX:E,wheelXCheck:k,doTop:D,doBottom:T,renderY:S,scrollToY:P,wheelY:C,wheelYCheck:I};angular.extend(this,ee),ee=this}function o(e){angular.extend(this,e)}return r.prototype={link:o,getItems:function(){return[content]}},r}])}(),function(){"use strict";angular.module("artisan").directive("videoSource",["$timeout","$promise",function(e,t){function n(n,r,o){function i(){return t(function(e){function t(r){n.canplay=!0,angular.element(p).off("canplay",t),e.resolve()}n.canplay?e.resolve():(angular.element(p).on("canplay",t),p.preload=!0,p.src=n.source)})}function a(){n.busy||(n.busy=!0,n.playing?p.pause():i().then(function(){p.play()}))}function s(){n.busy||(n.busy=!0,i().then(function(){p.play()}))}function u(){n.busy||(n.busy=!0,p.pause())}function c(t){e(function(){n.playing=!0,n.busy=!1})}function l(t){e(function(){n.playing=!1,n.busy=!1})}function f(t){e(function(){n.playing=!1,n.busy=!1})}function d(t){e(function(){v.buffered=p.buffered})}function h(t){e(function(){v.duration=p.duration,v.currentTime=p.currentTime,v.progressTime=v.currentTime/v.duration})}function g(){y.off("playing",c),y.off("pause",l),y.off("ended",f),y.off("progress",d),y.off("timeupdate",h)}var m=r[0],p=m.querySelector("video"),v=(m.querySelector("img"),{});n.canplay=!1,n.playing=!1,n.busy=!1,n.toggle=a,n.play=s,n.pause=u,n.infos=v;var y=angular.element(p);!function(){y.on("playing",c),y.on("pause",l),y.on("ended",f),y.on("progress",d),y.on("timeupdate",h)}(),n.$on("destroy",function(){g()})}return{restrict:"A",scope:{source:"=videoSource",image:"=videoImage"},templateUrl:function(e,t){return t.template||"artisan/components/video/partial/video-player"},link:n}}])}(),function(){"use strict";angular.module("artisan").factory("Animate",[function(){function e(e){this.callback=e,this.key=null,this.ticks=0}function t(){var e=this;e.key&&(window.cancelAnimationFrame(e.key),e.key=null)}function n(){function e(n){t.ticks++,t.callback(n,t.ticks),t.key=window.requestAnimationFrame(e)}var t=this;t.key||e()}function r(){var e=this;e.key?e.pause():e.play()}var o={},i={pause:t,play:n,toggle:r};return angular.extend(e,o),angular.extend(e.prototype,i),e}]),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),o=Math.max(0,16-(r-e)),i=window.setTimeout(function(){t(r+o)},o);return e=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()}(),function(){"use strict";var e=angular.module("artisan");e.directive("calendarPopupRecords",["$templateCache","$parse","$q","$timeout","$filter","Hash","DateTime","Range","CalendarFactory","State","Api",function(e,t,n,r,o,i,a,s,u,c,l){return{restrict:"A",template:function(e,t){return'<div calendar-popup="options"></div>'},require:"ngModel",scope:{user:"=calendarUser"},link:function(e,t,o,i,f){function d(e,t,r){var o=n.defer();h(t).then(function(){y(),p(e,t,r),o.resolve(w(e,t,r))},function(){o.reject()})}function h(e){var t=n.defer(),r=s.expand(e,7*a.DAY);return n.all([l.gantt.absencesAndOvertimes(r.getParams()).then(function(e){k.absencesAndOvertimes=e}),l.gantt.calendar(r.getParams()).then(function(e){var t={};angular.forEach(e,function(e){t[e.key]=e}),k.unworkings=t,k.calendar=e}),l.gantt.records(x.id,r.getParams()).then(function(e){k.monthRecords=e.map(function(e){return e.state=new c,e.record.date=new Date(e.record.date),e})})]).then(function(e){t.resolve()},function(e){t.reject()}),t.promise}function g(e,t,n){return!0}function m(e,t,n){if(e&&!$.isBefore(e.date))return e&&e.working?(r(function(){i.$setViewValue(e.date)}),!0):void 0}function p(e,t,n){var r=k.resource,o=k.monthRecords;o&&(n.days.each(function(e){var t=0;e.working&&(t+=r.baseHours);var n=r.absencesAndOvertimes[e.key];n&&(t+=n.hours),e.availableHours=t,e.recordedHours=0;var o=t>0;e.working=!k.unworkings[e.key],e.holiday=!e.working&&!o&&!e.weekend,e.vacation=e.working&&!o,e.wasVacation=e.vacation&&e.past,e.wasWorkable=e.working&&e.past&&o,e.workable=e.working&&!e.past&&o}),angular.forEach(o,function(e){var t=n.days.getId(e.record.key);t&&(t.recordedHours+=e.record.hours)}),n.days.each(function(e){e.green=e.working&&!$.isBefore(e.date)&&e.recordedHours>=8,e.orange=e.working&&!$.isBefore(e.date)&&e.recordedHours<8}))}function v(e){k.resources=e,angular.forEach(e,function(e){e.absencesAndOvertimes={},e.id===x.id&&(k.resource=e)})}function y(){var e=k.resource;e&&(e.absencesAndOvertimes={},angular.forEach(k.absencesAndOvertimes,function(t){e.id===t.resourceId&&(e.absencesAndOvertimes[t.key]=t)}))}function w(e,t,n){function r(){n.days.forward(),n.days.each(function(e){o||t.isOutside(e.date)||!e.working||e.vacation||(o=e.date)})}var o=null;if(e){var i=u.getKey(e),a=n.days.getId(i);a&&a.working&&!a.vacation?o=e:r()}else r();return o}var x=e.user,b=new c,M={onMonthDidChange:d,onWeekDidSelect:g,onDayDidSelect:m},k={},E={state:b,options:M};angular.extend(e,E);var $=new s({type:s.types.DAY});b.busy(),n.all([l.gantt.resources.actives().then(function(e){v(e)})]).then(function(e){b.ready()},function(e){b.error(e)})}}}]),e.directive("calendarPopup",["$templateCache","$parse","$q","$timeout","$filter","Hash","DateTime","Range","CalendarFactory","State","Api",function(e,t,n,r,o,i,a,s,u,c,l){function f(t,n){var r=n.template;return r||(r="partials/calendar/popup",e.get(r)||e.put(r,'<div><json-formatter json="item"></json-formatter></div>')),r}function d(e,t,n,r,o){function i(e){e&&!p.isOutside(e)||(e&&p.setDate(e),a(e))}function a(e){var t=g.getMonthByDate(p.getDate());t.days.each(function(e){var t=e.date.getDay();e.dirty=!0,e.hours=0,e.availableHours=0,e.recordedHours=0,e.selected=w.day.isCurrent(e.date),e.past=e.key<s.today.key,e.weekend=0===t||6===t,e.working=!e.weekend,e.holiday=!1,e.vacation=!1,e.wasVacation=!1,e.wasWorkable=!1,e.workable=!1,e.green=!1,e.orange=!1}),w.calendarMonth=t,m.onMonthDidChange(e,p,t)}function c(e){e&&m.onWeekDidSelect(e,p,w.calendarMonth)}function l(e){e&&!0===m.onDayDidSelect(e,p,w.calendarMonth)&&(w.day.setDate(e.date),f())}function f(){w.calendarMonth.days.each(function(e){e.selected=w.day.isCurrent(e.date)})}function d(e){i(p.getDate(e))}function h(e){var t={day:e};return e&&angular.extend(t,{today:e.$today,selected:e.selected,workable:e.workable,holiday:e.holiday,vacation:e.vacation,working:e.working,available:e.available,full:e.full,"status-green":e.green,"status-orange":e.orange}),t}var g=new u,m=e.options||{onMonthDidChange:function(){},onWeekDidSelect:function(){},onDayDidSelect:function(){}},p=new s({type:s.types.MONTH}),v=new s({type:s.types.WEEK}),y=new s({type:s.types.DAY}),w={month:p,week:v,day:y},x={sources:w,doNavMonth:d,onWeekSelect:c,onDaySelect:l,getDayClasses:h};angular.extend(e,x),i()}return{priority:1002,restrict:"A",templateUrl:f,scope:{options:"=calendarPopup"},link:d}}])}(),function(){"use strict";var e=angular.module("artisan");e.service("Calendar",["DateTime","Hash",function(e,t){function n(e){return"function"==typeof e.date.getMonth?e.date:new Date(e.date)}function r(e){e.days.each(function(e){e&&(e.hours=0,e.tasks=new t("id"))})}function o(n){var r=n.getFullYear(),o=n.getMonth(),i=(Math.ceil(n.getTime()/e.DAY),12*r+o),a=f.getId(i);if(!a){var s=new Date(r,o,1).getDay()-1;s=s<0?6:s;var u=new Date(r,o+1,0).getDate();a={date:n,mKey:i,month:o,monthDays:u,fromDay:s,days:new t("key")},a.weeks=new Array(6).fill().map(function(n,i){var l=new Array(7).fill().map(function(n,l){var f=null,d=7*i+l-s;if(d>=0&&d<u){var h=new Date(r,o,d+1),g=Math.ceil(h.getTime()/e.DAY);f={$today:g===e.today.key,c:l,r:i,d:d+1,date:h,key:g,hours:0,tasks:new t("id")},c.days.add(f),f=a.days.add(f)}return f});return{r:i,date:new Date(r,o,7*i-s+1),days:l}}),a.getMonth=function(e){return e=e||0,new Date(r,o+e,1)},a=f.add(a)}return a}function i(t){l.removeAll(),f.removeAll();for(var n=0;n<t;){var r=new Date;r.setFullYear(e.today.date.getFullYear()),r.setMonth(e.today.date.getMonth()+n),r.setDate(1),r.setHours(0),r.setMinutes(0),r.setSeconds(0);o(r);n++}return f}function a(e){return o(n(e))}function s(t){var n=new Date(e.today.date);return n.setDate(n.getDate()+t),n}function u(t){return Math.ceil(t.getTime()/e.DAY)}var c=this,l=new t("key"),f=new t("mKey"),d={getDate:n,clearMonth:r,getMonthByDate:o,getMonths:i,getMonth:a,getDay:s,getKey:u,days:l,months:f};angular.extend(c,d)}]),e.factory("CalendarFactory",["DateTime","Hash",function(e,t){function n(){this.days=new t("key"),this.months=new t("mKey")}function r(e){e.days.each(function(e){e&&(e.hours=0,e.tasks=new t("id"))})}function o(e){return"function"==typeof e.date.getMonth?e.date:new Date(e.date)}function i(t){var n=new Date(e.today.date);return n.setDate(n.getDate()+t),n}function a(t){return Math.ceil(t.getTime()/e.DAY)}function s(t){var n=this;n.days.removeAll(),n.months.removeAll();for(var r=0;r<t;){var o=new Date;o.setFullYear(e.today.date.getFullYear()),o.setMonth(e.today.date.getMonth()+r),o.setDate(1),o.setHours(0),o.setMinutes(0),o.setSeconds(0);n.getMonthByDate(o);r++}return n.months}function u(e){var t=this,n=o(e);return t.getMonthByDate(n)}function c(n){var r=this,o=n.getFullYear(),i=n.getMonth(),a=(Math.ceil(n.getTime()/e.DAY),12*o+i),s=r.months.getId(a);if(!s){var u=new Date(o,i,1).getDay()-1;u=u<0?6:u;var c=new Date(o,i+1,0).getDate();s={date:n,mKey:a,month:i,monthDays:c,fromDay:u,days:new t("key")},s.weeks=new Array(6).fill().map(function(n,a){var l=new Array(7).fill().map(function(n,l){var f=null,d=7*a+l-u;if(d>=0&&d<c){var h=new Date(o,i,d+1),g=Math.ceil(h.getTime()/e.DAY);f={$today:g===e.today.key,c:l,r:a,d:d+1,date:h,key:g,hours:0,tasks:new t("id")},r.days.add(f),f=s.days.add(f)}return f});return{r:a,date:new Date(o,i,7*a-u+1),days:l}}),s.getMonth=function(e){return e=e||0,new Date(o,i+e,1)},s=r.months.add(s)}return s}var l={clearMonth:r,getDate:o,getDay:i,getKey:a},f={getMonths:s,getMonth:u,getMonthByDate:c};return angular.extend(n,l),angular.extend(n.prototype,f),n}])}(),function(){"use strict";angular.module("artisan").service("DateTime",[function(){function e(e){return e=e?new Date(e):new Date}function t(t){return t=e(t),{date:t,yyyy:t.getFullYear(),MM:t.getMonth(),dd:t.getDate(),ee:t.getDay(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()}}function n(e){return Math.ceil(e.getTime()/k)}function r(e,n){var r=t(n);return new Date(r.yyyy,r.MM,r.dd+e,r.HH,r.mm,r.ss,r.sss)}function o(e){var n=t(e);return new Date(n.yyyy,n.MM,n.dd,0,0,0,0)}function i(e){var n=t(e);return new Date(n.yyyy,n.MM,n.dd,23,59,59,999)}function a(e){return e=o(e),{date:e,key:n(e)}}function s(e){return new Date((new Date).setTime(e*k))}function u(e,n){var r=t(n);return new Date(r.yyyy,r.MM+e,1,r.HH,r.mm,r.ss,r.sss)}function c(e){var n=t(e);return new Date(n.yyyy,n.MM,1,0,0,0,0)}function l(e){var n=t(e);return new Date(n.yyyy,n.MM+1,0,23,59,59,999)}function f(e){return e*M}function d(e){return e/M}function h(e){return Math.floor(e/b)*b/M}function g(e,n){var r=t(n);return new Date(r.yyyy,r.MM,r.dd+7*e,r.HH,r.mm,r.ss,r.sss)}function m(e){var n=t(e);return new Date(n.yyyy,n.MM,n.dd-n.ee+x.FIRSTDAYOFWEEK,0,0,0,0)}function p(e){var n=t(e);return new Date(n.yyyy,n.MM,n.dd-n.ee+x.FIRSTDAYOFWEEK+6,23,59,59,999)}function v(e,n){var r=t(n);return new Date(r.yyyy,r.MM+12*e,r.dd,r.HH,r.mm,r.ss,r.sss)}function y(e){var n=t(e);return new Date(n.yyyy,0,1,0,0,0,0)}function w(e){var n=t(e);return new Date(n.yyyy,12,0,23,59,59,999)}var x=this,b=9e5,M=36e5,k=24*M,E=7*k,$=a(),D={dateToKey:n,dayDiff:r,dayLeft:o,dayRight:i,getDate:a,keyToDate:s,monthDiff:u,monthLeft:c,monthRight:l,today:$,weekDiff:g,weekLeft:m,weekRight:p,yearDiff:v,yearLeft:y,yearRight:w,hourToTime:f,timeToHour:d,timeToQuarterHour:h,SECOND:1e3,MINUTE:6e4,QUARTER:b,HOUR:M,DAY:k,WEEK:E,FIRSTDAYOFWEEK:1};angular.extend(x,D)}])}(),function(){"use strict";angular.module("artisan").factory("Range",["$filter","DateTime",function(e,t){function n(e){var n=this;n.from=t.dayLeft(),n.type=W.QUARTER,e&&angular.extend(n,e),n.setDiff()}function r(e){var t=new n(e);return t.from=new Date(e.from),t.to=new Date(e.to),t}function o(e,t){var e=r(e);return e.from=new Date(e.from.getTime()-t),e.to=new Date(e.to.getTime()+t),console.log("RangeExpand",e.toString()),e}function i(e){return e?(e=new Date(e),e.setDate(1),e.setHours(0,0,0,0),e.getTime()):null}function a(e,t){return e?(e=new Date(e),new Date(e.setFullYear(e.getFullYear()+t))):null}function s(e){return!this.isOutside(e)}function u(e){e=e||new Date;var t=this;return e<t.from||e>t.to}function c(e){return e=e||new Date,!this.isOutside(e)}function l(e){return e=e||new Date,this.to<e}function f(e){return e=e||new Date,this.from>e}function d(e,t){var n=this;switch(n.type){case W.YEAR:n.setYear(e,t);break;case W.SEMESTER:n.setSemester(e,t);break;case W.TRIMESTER:n.setTrimester(e,t);break;case W.QUARTER:n.setQuarter(e,t);break;case W.MONTH:n.setMonth(e,t);break;case W.WEEK:n.setWeek(e,t);break;case W.DAY:n.setDay(e,t);break;case W.NEXT_YEAR:n.nextYear(e,t)}return n}function h(e){e=e||0;var t=this,n=new Date(t.from);switch(t.type){case W.YEAR:case W.NEXT_YEAR:n=new Date(n.setFullYear(n.getFullYear()+e));break;case W.SEMESTER:n=new Date(n.setMonth(n.getMonth()+6*e));break;case W.TRIMESTER:n=new Date(n.setMonth(n.getMonth()+4*e));break;case W.QUARTER:n=new Date(n.setMonth(n.getMonth()+3*e));break;case W.MONTH:n=new Date(n.setMonth(n.getMonth()+e));break;case W.WEEK:n=new Date(n.setDate(n.getDate()+7*e));break;case W.DAY:n=new Date(n.setDate(n.getDate()+e))}return n}function g(){return{dateFrom:new Date(this.from),dateTo:new Date(this.to)}}function m(e,n,r){n=n||0,r=r||1;var o=t.yearDiff(n,e),i=t.yearDiff(n+r-1,e),a=this;return a.from=t.yearLeft(o),a.to=t.yearRight(i),a}function p(e,t,n){t=t||0,n=n||1,e=e||new Date,e=new Date(e.setMonth(e.getMonth()+6*t));var r=e.getFullYear(),o=Math.floor(e.getMonth()/6),i=this;return i.from=new Date(r,6*o,1,0,0,0,0,0),i.to=new Date(r,6*o+6,0,23,59,59,999),i}function v(e,t,n){t=t||0,n=n||1,e=e||new Date,e=new Date(e.setMonth(e.getMonth()+4*t));var r=e.getFullYear(),o=Math.floor(e.getMonth()/4),i=this;return i.from=new Date(r,4*o,1,0,0,0,0,0),i.to=new Date(r,4*o+4,0,23,59,59,999),i}function y(e,t,n){t=t||0,n=n||1,e=e||new Date,e=new Date(e.setMonth(e.getMonth()+3*t));var r=e.getFullYear(),o=Math.floor(e.getMonth()/3),i=this;return i.from=new Date(r,3*o,1,0,0,0,0,0),i.to=new Date(r,3*o+3,0,23,59,59,999),i}function w(e,n,r){n=n||0,r=r||1;var o=t.monthDiff(n,e),i=t.monthDiff(n+r-1,e),a=this;return a.from=t.monthLeft(o),a.to=t.monthRight(i),a}function x(e,n,r){n=n||0,r=r||1;var o=t.weekDiff(n,e),i=t.weekDiff(n+r-1,e),a=this;return a.from=t.weekLeft(o),a.to=t.weekRight(i),a}function b(e,n,r){n=n||0,r=r||1;var o=t.dayDiff(n,e),i=t.dayDiff(n+r-1,e),a=this;return a.from=t.dayLeft(o),a.to=t.dayRight(i),a}function M(e,t){t=t||0,this.type=W.YEAR;var n=new Date,r=n.getMonth()+1;n.setMonth(r*t);var o=n.getFullYear();return this.from=new Date(o,0,1,0,0,0,0,0),this.to=new Date(o,r,0,23,59,59,999),this}function k(e,t){t=t||0,e=e||new Date,e=new Date(e.setMonth(e.getMonth()+6*t+1));var n=this;n.type=W.SEMESTER;var r=e.getFullYear();return n.from=new Date(r,e.getMonth(),1,0,0,0,0,0),n.to=new Date(r,e.getMonth()+6,0,23,59,59,999),n}function E(){return this.setDiff(-1)}function $(){return this.setDiff(1)}function D(){var e=new Date,t=e.getFullYear(),n=this;return n.type=W.NEXT_YEAR,n.from=new Date(t,e.getMonth(),1,0,0,0,0,0),n.to=new Date(t,e.getMonth()+12,0,23,59,59,999),n}function T(){var e=this;return e.setYear(),e}function S(){var e=this;return e.setYearPeriod(),e}function R(){var e=this;return e.setSemester(),e}function A(){var e=this;return e.setTrimester(),e}function I(){var e=this;return e.setQuarter(),e}function C(){var e=this;return e.setMonth(),e}function P(){var e=this;return e.setWeek(),e}function _(){var e=this;return e.setLastSemester(null,-1),e}function O(e){var t=this;switch(t.type){case W.YEAR:t.setYear(t.from,e);break;case W.SEMESTER:t.setSemester(t.from,e);break;case W.TRIMESTER:t.setTrimester(t.from,e);break;case W.QUARTER:t.setQuarter(t.from,e);break;case W.MONTH:t.setMonth(t.from,e);break;case W.WEEK:t.setWeek(t.from,e);break;case W.DAY:t.setDay(t.from,e);break;case W.NEXT_YEAR:t.nextYear(t.from,e)}return t}function N(e,t){var n=this;return e.dateFrom=n.from,e.dateTo=n.to,t&&t.setDates(e.dateFrom,e.dateTo),n}function j(e){var t=this,n=!1;return e.dateFrom&&e.dateTo&&(n=e.dateFrom.getTime()==t.from.getTime()&&e.dateTo.getTime()==t.to.getTime()),n}function L(e,t){return Object.keys(e)[Object.values(e).indexOf(t)]}function Y(e){var t=this;return new n({type:t.type}).setDate(t.from).setDiff(e)}function F(){var e=this,t=L(W,e.type);return B(e,U.long[t])}function H(){var e=this,t=L(W,e.type);return B(e,U.short[t])}function B(t,n){var r=n;return r=r.replace(/{(.*?)}/g,function(n,r){var o,i=r.split("|"),a=i.shift(),s=i.join("");return-1!==s.indexOf(":")&&(s=s.split(":"),o=s.length?s.pop():null,s=s.join("")),s.length?e(s)(t[a],o):t[a]})}function z(){return"["+e("date")(this.from,"MMM dd yyyy HH:mm:ss.sss")+", "+e("date")(this.to,"MMM dd yyyy HH:mm:ss.sss")+"] '"+this.getName()+"'"}var V={long:{RANGE:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",YEAR:"Year {from|date:yyyy}",SEMESTER:"Semester {from|date:MMM yyyy} - {to|date:MMM yyyy}",TRIMESTER:"Trimester {from|date:MMM yyyy} - {to|date:MMM yyyy}",QUARTER:"Quarter {from|date:MMM yyyy} - {to|date:MMM yyyy}",MONTH:"{from|date:MMMM yyyy}",WEEK:"Week {from|isoWeek:0}",DAY:"{from|date:EEEE MM/dd/yyyy}"},short:{RANGE:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",YEAR:"{from|date:yyyy}",SEMESTER:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",TRIMESTER:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",QUARTER:"{from|date:MMM yyyy} - {to|date:MMM yyyy}",MONTH:"{from|date:MMMM}",WEEK:"W{from|isoWeek:0}",DAY:"{from|date:EEEE}"},week:0},U=V,W={RANGE:10,YEAR:11,SEMESTER:12,TRIMESTER:13,QUARTER:14,MONTH:15,WEEK:16,DAY:17,NEXT_YEAR:20},q={copy:r,expand:o,getDate:t.getDate,dateToKey:t.dateToKey,keyToDate:t.keyToDate,getMonth:i,addYear:a,today:t.today,types:W},G={setYear:m,setSemester:p,setTrimester:v,setQuarter:y,setMonth:w,setWeek:x,setDay:b,prev:E,next:$,setYearPeriod:M,setLastSemester:k,nextYear:D,currentYear:T,currentSemester:R,currentTrimester:A,currentQuarter:I,currentMonth:C,currentWeek:P,currentYearPeriod:S,lastSemester:_,getDiff:Y,getParams:g,getDate:h,setDate:d,setDiff:O,set:N,is:j,isInside:s,isOutside:u,isCurrent:c,isBefore:l,isAfter:f,getName:F,getShortName:H,toString:z};return angular.extend(n,q),angular.extend(n.prototype,G),n}]),function(){"function"!=typeof Object.values&&Object.defineProperty(Object,"values",{value:function(e){var t=[];for(var n in e)has(e,n)&&isEnumerable(e,n)&&t.push(e[n]);return t}})}()}(),function(){"use strict";var e=angular.module("artisan");e.value("$formats",{just_now:"just now",seconds_ago:"{{num}} seconds ago",a_minute_ago:"a minute ago",minutes_ago:"{{num}} minutes ago",an_hour_ago:"an hour ago",hours_ago:"{{num}} hours ago",a_day_ago:"yesterday",days_ago:"{{num}} days ago",a_week_ago:"a week ago",weeks_ago:"{{num}} weeks ago",a_month_ago:"a month ago",months_ago:"{{num}} months ago",a_year_ago:"a year ago",years_ago:"{{num}} years ago",over_a_year_ago:"over a year ago",seconds_from_now:"{{num}} seconds from now",a_minute_from_now:"a minute from now",minutes_from_now:"{{num}} minutes from now",an_hour_from_now:"an hour from now",hours_from_now:"{{num}} hours from now",a_day_from_now:"tomorrow",days_from_now:"{{num}} days from now",a_week_from_now:"a week from now",weeks_from_now:"{{num}} weeks from now",a_month_from_now:"a month from now",months_from_now:"{{num}} months from now",a_year_from_now:"a year from now",years_from_now:"{{num}} years from now",over_a_year_from_now:"over a year from now"}),e.filter("dateRelative",["$rootScope","$interval","$injector","$formats",function(e,t,n,r){function o(e,t){return Math.round(Math.abs(e-t)/1e3)}var i=86400,a=function(){return n.has("$format")?n.get("$format"):{instant:function(e,t){return r[e].replace("{{num}}",t.num)}}}();return function(e){function t(e,t){return a.instant(e+(r>30?s:""),{num:t})}e instanceof Date||(e=new Date(e));var n=new Date,r=o(n,e);r>i&&r<604800&&(e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),r=o(n,e));var s=n>=e?"_ago":"_from_now";return console.log("delta",r,n,e),r<30?t("just_now"):r<60?t("seconds",r):r<120?t("a_minute"):r<3600?t("minutes",Math.floor(r/60)):r<7200?t("an_hour"):r<i?t("hours",Math.floor(r/3600)):r<2*i?t("a_day"):r<604800?t("days",Math.floor(r/i)):1!==Math.floor(r/604800)?t("a_week"):r<2592e3?t("weeks",Math.floor(r/604800)):1!==Math.floor(r/2592e3)?t("a_month"):r<31536e3?t("months",Math.floor(r/2592e3)):t(1!==Math.floor(r/31536e3)?"a_year":"over_a_year")}}]),e.directive("dateRelative",["$parse","$filter","$interval",function(e,t,n){return{priority:1001,restrict:"A",link:function(n,r,o,i){function a(){var i=e(o.dateRelative)(n),a=t("dateRelative")(i);r[0].innerHTML=a}a();var s=setInterval(a,6e4);n.$on("$destroy",function(){cancelInterval(s)})}}}])}(),function(){"use strict";angular.module("artisan").service("Dom",["Point","Rect",function(e,t){function n(e){return e=u(e),e===window&&(e=a()),e.getBoundingClientRect()}function r(e,t){var n,r;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)}),e[n](t))return e;for(;null!==e;){if(null!==(r=e.parentElement)&&r[n](t))return r;e=r}return null}function o(e,t){var n=null;if(e===t)return e;for(;null!==e;){if(null!==(n=e.parentElement)&&n===t)return n;e=n}return null}function i(t){var n=t.originalEvent?t.originalEvent:t,r=n.type,o=null;if("wheel"===r||"mousewheel"===r||"DOMMouseScroll"===r){var i=n.deltaX||n.wheelDeltaX,a=n.deltaY||n.wheelDeltaY;o=new e(i,a),Math.abs(i)>Math.abs(a)?o.dir=i<0?1:-1:o.dir=a<0?1:-1}return o}function a(){return document.documentElement||document.body.parentNode||document.body}function s(e){return angular.isArray(e)?e:angular.element(e)}function u(e){return angular.isArray(e)?e[0]:e}function c(t){var n=new e;return t=u(t),t&&1===t.nodeType&&(n.x=t.offsetLeft,n.y=t.offsetTop),n}function l(){var t=new e,n=a();return t.x=window.pageXOffset||n.scrollLeft,t.y=window.pageYOffset||n.scrollTop,t}function f(e,t){t=t||a();var n=[];if(e){n.push(e);for(var r=e.parentNode;r&&r!==t;)n.push(r),r=r.parentNode;n.push(t)}return n.each=function(e){this.filter(function(t){e&&e(angular.element(t),t)})},n}function d(){var e=new t;if(void 0!==window.innerWidth)e.width=window.innerWidth,e.height=window.innerHeight;else{var n=a();e.width=n.clientWidth,e.height=n.clientHeight}return e}function h(t){var n=t.originalEvent?t.originalEvent:t,r=n.type,o=null;if(-1!==w.indexOf(r)){var i=null,a=n.touches.length?n.touches:n.changedTouches;a&&a.length&&(i=a[0]),i&&(o=new e,o.x=i.pageX,o.y=i.pageY)}else-1!==y.indexOf(r)&&(o=new e,o.x=n.pageX,o.y=n.pageY);return o}function g(e,t,n,r){t=s(t),t.html(n);var o=$compile(t.contents());if(r.controller){var i=e.$new();angular.extend(i,r);var a=$controller(r.controller,{$scope:i});r.controllerAs&&(e[r.controllerAs]=a),t.data("$ngControllerController",a),t.children().data("$ngControllerController",a),e=i}o(e)}function m(e,t,n){function r(){if(document.createEvent){var e=document.createElement("a");if(e.href=o,void 0!==e.download){var n=t||o.substring(o.lastIndexOf("/")+1,o.length);e.download=n}var r=document.createEvent("MouseEvents");return r.initEvent("click",!0,!0),e.dispatchEvent(r),!0}window.open(o.indexOf("?")>-1?o:o+"?download","_self")}n=n||"application/octet-stream";var o=null,i=new Blob([e],{type:n}),a=new window.FileReader;a.readAsDataURL(i),a.onloadend=function(){o=a.result,r()}}var p=this,v={getBoundRect:n,getClosest:r,getClosestNode:o,getDelta:i,getDocumentNode:a,getElement:s,getNode:u,getNodeOffset:c,getPageScroll:l,getParents:f,getView:d,getPointInView:h,compileController:g,downloadFile:m,ua:function(){var e=window.navigator.userAgent.toLowerCase(),t=-1!==e.indexOf("safari")&&-1===e.indexOf("chrome"),n=-1!==e.indexOf("trident")||-1!==e.indexOf("edge")||-1!==e.indexOf("msie"),r=!t&&!n&&-1!==e.indexOf("chrome"),o=-1!==e.indexOf("mobile"),i=-1!==e.indexOf("macintosh"),a={agent:e,safari:t,msie:n,chrome:r,mobile:o,mac:i};return angular.forEach(a,function(e,t){e&&angular.element(document.getElementsByTagName("body")).addClass(t)}),a}()};angular.extend(p,v);var y=["click","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","contextmenu"],w=["touchstart","touchmove","touchend","touchcancel"]}])}(),function(){"use strict";var e=angular.module("artisan");e.factory("Event",["EventsService","Dom","Point","Rect",function(e,t,n,r){function o(e,r){try{e=e||window.event;var o=e.type,i=e.originalEvent?e.originalEvent:e,a=r[0],s=t.getNodeOffset(a),u=t.getBoundRect(a),c=t.getView(),l=t.getPageScroll(),f=t.getPointInView(e);if(f){var d=new n(f.x-l.x,f.y-l.y),h=new n(d.x-u.left,d.y-u.top);this.point=f,this.absolute=d,this.relative=h}var g=t.getDelta(e);g&&(this.delta=g,this.dir=g.dir),this.event=e,this.type=o,this.originalEvent=i,this.element=r,this.node=a,this.offset=s,this.rect=u,this.view=c,this.scroll=l,this.timestamp=(new Date).getTime()}catch(e){console.log("Event.error",e)}}function i(){this.event.stopPropagation(),this.event.preventDefault()}var a={},s={stop:i};return angular.extend(o,a),angular.extend(o.prototype,s),o}]),e.factory("Events",["EventsService","Event","Dom",function(e,n,r){function o(e){function t(e){e&&(e.interval=Math.min(250,e.timestamp-g.timestamp)),g.timestamp=(new Date).getTime()}function o(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.click.apply(this,[t])}function i(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.down.apply(this,[t]),g.removeTouchEvents()}function a(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.move.apply(this,[t])}function s(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.up.apply(this,[t])}function u(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.wheel.apply(this,[t]),g.removeScrollEvents()}function c(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.wheel.apply(this,[t]),g.removeWheelEvents()}function l(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.resize.apply(this,[t])}function f(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.down.apply(this,[t]),g.removeStandardEvents()}function d(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.move.apply(this,[t])}function h(e){var t=new n(e,g.element);g.setTimestamp(t),g.listeners.up.apply(this,[t])}var g=this;this.element=r.getElement(e),this.listeners={},this.standardEvents={click:{key:"click",callback:o},down:{key:"mousedown",callback:i},move:{key:"mousemove",callback:a},up:{key:"mouseup",callback:s},resize:{key:"resize",callback:l}},this.touchEvents={down:{key:"touchstart",callback:f},move:{key:"touchmove",callback:d},up:{key:"touchend",callback:h}},this.wheelEvents={wheel:{key:"mousewheel",callback:u}},this.scrollEvents={wheel:{key:"DOMMouseScroll",callback:c}},this.timestamp=(new Date).getTime(),this.setTimestamp=t}function i(e,t){var n=this,r=this.standardEvents,o=this.touchEvents,i=this.wheelEvents,s=this.scrollEvents,u=this.element,c=angular.element(window);return angular.forEach(e,function(e,t){if(n.listeners[t]){var l={};l[t]=n.listeners[t],a(l)}n.listeners[t]=e,r[t]&&("resize"===t?c.on(r[t].key,r[t].callback):u.on(r[t].key,r[t].callback)),o[t]&&u.on(o[t].key,o[t].callback),i[t]&&u.on(i[t].key,i[t].callback),s[t]&&u.on(s[t].key,s[t].callback)}),t&&t.$on("$destroy",function(){n.remove(e)}),n}function a(e){var t=this,n=this.standardEvents,r=this.touchEvents,o=this.wheelEvents,i=this.scrollEvents,a=this.element,s=angular.element(window);return angular.forEach(e,function(e,u){n[u]&&("resize"===u?s.off(n[u].key,n[u].callback):a.off(n[u].key,n[u].callback)),r[u]&&a.off(r[u].key,r[u].callback),o[u]&&a.off(o[u].key,o[u].callback),i[u]&&a.off(i[u].key,i[u].callback),t.listeners[u]=null}),t}function s(){var e=this,t=e.standardEvents,n=(e.touchEvents,e.element);n.off("mousedown",t.down.callback),n.off("mousemove",t.move.callback),n.off("mouseup",t.up.callback)}function u(){var e=this,t=(e.standardEvents,e.touchEvents),n=e.element;n.off("touchstart",t.down.callback),n.off("touchmove",t.move.callback),n.off("touchend",t.up.callback)}function c(){var e=this;e.element.off("mousewheel",e.mouseEvents.wheel.callback)}function l(){var e=this;e.element.off("DOMMouseScroll",e.scrollEvents.wheel.callback)}function f(e,n){var r=new Point;if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type){var o=null,i=e.originalEvent?e.originalEvent:e,a=i.touches.length?i.touches:i.changedTouches;a&&a.length&&(o=a[0]),o&&(r.x=o.pageX,r.y=o.pageY)}else"click"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type&&"mousemove"!==e.type&&"mouseover"!==e.type&&"mouseout"!==e.type&&"mouseenter"!==e.type&&"mouseleave"!==e.type&&"contextmenu"!==e.type||(r.x=e.pageX,r.y=e.pageY);return n&&(r.s=Point.difference(t,n)),r.type=e.type,r}function d(e,t){return e=angular.isArray(e)?e[0]:e,Point.difference(t,{x:e.offsetLeft,y:e.offsetTop})}var h={getTouch:f,getRelativeTouch:d},g={add:i,remove:a,removeStandardEvents:s,removeTouchEvents:u,removeWheelEvents:c,removeScrollEvents:l};return angular.extend(o,h),angular.extend(o.prototype,g),o}]),e.service("EventsService",["Dom",function(e){function t(){var e=!1;if(window.addEventListener)try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){console.log("getAddEventListener.isSupprted",e)}return e}var n=this,r={hasPassiveEvents:t,addEventListener:function(){if(t()){var e={passive:!1,capture:!1},n=EventTarget.prototype.addEventListener,r=function(t){function n(n,r,o){if("object"!=typeof o){var i=!0===o;o=angular.copy(e),o.capture=i}else o=angular.extend(angular.copy(e),o);t.call(this,n,r,o)}return n}(n);return EventTarget.prototype.addEventListener=r,r}}()};angular.extend(n,r),function(){function t(t){Math.abs(t.deltaY)>Math.abs(t.deltaX)||(t.deltaX<0&&0===e.getParents(t.target).filter(function(e){return e.scrollLeft>0}).length||t.deltaX>0&&0===e.getParents(t.target).filter(function(e){return e.scrollWidth-e.scrollLeft>e.clientWidth}).length)&&t.preventDefault()}e.ua.mac&&(e.ua.chrome||e.ua.safari||e.ua.firefox)&&window.addEventListener("mousewheel",t,{passive:!1})}()}])}(),function(){"use strict";var e=angular.module("artisan");e.filter("notIn",["$filter",function(e){return function(t,n,r){if(n)return e("filter")(t,function(e){for(var t=0;t<n.length;t++)if(n[t][r]===e[r])return!1;return!0})}}]),e.filter("autolink",[function(){return function(e){return Autolinker.link(e,{className:"a-link"})}}]),e.filter("shortName",["$filter",function(e){function t(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}return function(e){if(!e)return"";e.indexOf(" .")===e.length-2&&(e=e.split(" .").join(""));var n=e.split(" "),r=n.shift();if(n.length){var o=n.join(" ");return r.substr(0,1).toUpperCase()+"."+t(o)}return r}}]),e.filter("customCurrency",["$filter",function(e){var t=e("currency");return function(e,n){return t(e*n.ratio,n.formatting)}
}]),e.filter("customSize",["APP",function(e){return function(t){if(e.unit===e.units.IMPERIAL){var n=Math.floor(t/12);return t%=12,t=Math.round(10*t)/10,(n?n+"' ":"")+t+"''"}var r=Math.floor(t*e.size.ratio),o=t*e.size.ratio*100%100;return o=Math.round(10*o)/10,(r?r+"m ":"")+o+"cm"}}]),e.filter("customWeight",["APP",function(e){return function(t){if(e.unit===e.units.IMPERIAL){if(t<1){var n=16*t;return n=Math.round(10*n)/10,n?n+"oz ":""}return t=Math.round(100*t)/100,t?t+"lb ":""}var r=Math.floor(t*e.weight.ratio/1e3),o=t*e.weight.ratio%1e3;return o=Math.round(10*o)/10,(r?r+"kg ":"")+o+"g"}}]),e.filter("customNumber",["$filter",function(e){return function(t,n,r){return r=r||"",void 0!==t?(Math.floor(t)===t&&(n=0),t=e("number")(t,n)+r):t="-",t}}]),e.filter("reportNumber",["$filter",function(e){return function(t,n,r){return r=r||"",t=void 0!==t?e("number")(t,n)+r:"-"}}]),e.filter("customHours",[function(){return function(e){if(void 0!==e){var t=Math.floor(e),n=Math.floor(60*(e-t)),r=t?t+" H":"";return r+=n?" "+n+" m":""}return"-"}}]),e.filter("customTimer",[function(){return function(e){if(void 0!==e){var t=Math.floor(e/36e5),n=Math.floor((e-36e5*t)/6e4),r=Math.floor((e-36e5*t-6e4*n)/1e3),o=t?t+" H":"";return o+=n?" "+n+" m":"",o+=r?" "+r+" s":""}return"-"}}]),e.filter("customDigitalTimer",[function(){return function(e){if(void 0!==e){var t=Math.floor(e/36e5),n=Math.floor((e-36e5*t)/6e4),r=Math.floor((e-36e5*t-6e4*n)/1e3);return t%=24,(t<10?"0":"")+t+":"+(n<10?"0":"")+n+":"+(r<10?"0":"")+r}return"-"}}]),e.filter("customDigitalTime",[function(){return function(e){if(void 0!==e){var t=Math.floor(e/36e5),n=Math.floor((e-36e5*t)/6e4);return t%=24,(t<10?"0":"")+t+":"+(n<10?"0":"")+n}return"-"}}]),e.filter("isoWeek",[function(){return function(e,t){if(e){e=new Date(e),t=t||0;var n=new Date(e.getFullYear(),0,1),r=n.getDay()-t;r=r>=0?r:r+7;var o,i=Math.floor((e.getTime()-n.getTime()-6e4*(e.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)+1;if(r<4){if((o=Math.floor((i+r-1)/7)+1)>52){var a=new Date(e.getFullYear()+1,0,1);r=a.getDay()-t,r=r>=0?r:r+7,o=r<4?1:53}}else o=Math.floor((i+r-1)/7);return o<10?"0"+o:o}return"-"}}]),e.filter("customDate",["$filter",function(e){var t=e("date");return function(e,n,r){return e?t(e,n,r):"-"}}]),e.filter("customTime",["$filter",function(e){return function(e,t){return e?Utils.parseTime(e):t||"-"}}]),e.filter("customDigital",["$filter",function(e){return function(e,t){return e?Utils.parseHour(e):t||"-"}}]),e.filter("customString",["$filter",function(e){return function(e,t){return e||(t||"-")}}]),e.filter("customEnum",function(){return function(e){return e+=1,e<10?"0"+e:e}}),e.filter("groupBy",["$parse","filterWatcher",function(e,t){function n(e,t){var n,r={};return angular.forEach(e,function(e){n=t(e),r[n]||(r[n]=[]),r[n].push(e)}),r}return function(r,o){return!angular.isObject(r)||angular.isUndefined(o)?r:t.isMemoized("groupBy",arguments)||t.memoize("groupBy",arguments,this,n(r,e(o)))}}]),e.filter("htmlToPlaintext",function(){function e(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle(e,null).getPropertyValue(t)}function t(n){var r="";if(n.nodeType==document.TEXT_NODE){r=n.nodeValue,r=r?String(r).replace(/</gm,"&lt;"):"",r=r?String(r).replace(/>/gm,"&gt;"):""}else if(n.nodeType==document.ELEMENT_NODE){for(var o=0,i=n.childNodes.length;o<i;o++)r+=t(n.childNodes[o]);var a=e(n,"display");(a.match(/^block/)||a.match(/list/)||a.match(/row/)||"BR"==n.tagName||"HR"==n.tagName)&&(r+="\n<br>")}return r}return function(e){console.log(e);var n=document.createElement("div");return n.innerHTML=e,t(n)}})}(),function(){"use strict";angular.module("artisan").factory("Point",[function(){function e(e,t){this.x=e||0,this.y=t||0}function t(t,n){return new e(t.x-n.x,t.y-n.y)}function n(e,t){return e.x*=t,e.y*=t,e}function r(){return new e(this.x,this.y)}function o(e){return this.x=e.x,this.y=e.y,this}function i(e){return t(this,e)}function a(e){return n(this,e)}function s(e,t){return this.x+=e,this.y+=t,this}function u(e,t){return this.x=e,this.y=t,this}function c(e){return this.x=e,this}function l(e){return this.y=e,this}function f(){return"{"+this.x+","+this.y+"}"}var d={difference:t,multiply:n},h={clone:r,copy:o,difference:i,mult:a,offset:s,setPos:u,setX:c,setY:l,toString:f};return angular.extend(e,d),angular.extend(e.prototype,h),e}])}(),function(){"use strict";angular.module("artisan").factory("Rect",[function(){function e(e,t,n,r){this.x=e||0,this.y=t||0,this.w=n||0,this.h=r||0}function t(e,t){return e.x*=t,e.y*=t,e.w*=t,e.h*=t,e}function n(){var e=this.x,t=this.y;return{x:e+this.w/2,y:t+this.h}}function r(){var e=this.x,t=this.y;return this.w,{x:e,y:t+this.h}}function o(){var e=this.x,t=this.y;return{x:e+this.w,y:t+this.h}}function i(){var e=this.x,t=this.y;return{x:e+this.w/2,y:t+this.h/2}}function a(){return new e(this.x,this.y,this.w,this.h)}function s(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}function u(e){return this.expandRect({x:e,y:e,w:2*e,h:2*e})}function c(e){return this.x-=e.x||0,this.y-=e.y||0,this.w+=e.w||0,this.h+=e.h||0,this}function l(e){var t=this.x,n=this.y,r=this.w,o=this.h;return!(e.x>t+r||e.x+e.w<t||e.y>n+o||e.y+e.h<n)}function f(){var e=this.x,t=this.y;return this.w,{x:e,y:t+this.h/2}}function d(e){return t(this,e)}function h(e,t){return this.x+=e,this.y+=t,this}function g(e){return this.offset(-e)}function m(e){return this.offsetRect(t(e,-1))}function p(){var e=this.x,t=this.y;return{x:e+this.w,y:t+this.h/2}}function v(e){return this.h=e,this}function y(e,t){return this.x=e,this.y=t,this}function w(e,t){return this.w=e,this.h=t,this}function x(e){return this.x=e,this}function b(e){return this.y=e,this}function M(e){return this.w=e,this}function k(){var e=this.x,t=this.y,n=this.w;return this.h,{x:e+n/2,y:t}}function E(){var e=this.x,t=this.y;return this.w,this.h,{x:e,y:t}}function $(){var e=this.x,t=this.y,n=this.w;return this.h,{x:e+n,y:t}}function D(){return"{"+this.x+","+this.y+","+this.w+","+this.h+"}"}var T={mult:t},S={bottom:n,bottomLeft:r,bottomRight:o,center:i,clone:a,copy:s,expand:u,expandRect:c,intersect:l,left:f,mult:d,offset:h,reduce:g,reduceRect:m,right:p,setH:v,setPos:y,setSize:w,setX:x,setY:b,setW:M,top:k,topLeft:E,topRight:$,toString:D};return angular.extend(e,T),angular.extend(e.prototype,S),e}])}(),function(){"use strict";angular.module("artisan").factory("Vector",function(){function e(e,t){this.x=e||0,this.y=t||0}function t(e,t){return e.x*t.y-e.y*t.x}function n(t,n){return new e(t.x-n.x,t.y-n.y)}function r(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function o(e,t){return Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x)}function i(t,n){return new e(n.x-t.x,n.y-t.y)}function a(t){var n=e.size(t);return t.x/=n,t.y/=n,t}function s(e,t){return(Math.abs(t.x-e.x)+Math.abs(t.y-e.y))/2}function u(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function c(e){return this.x+=e.x,this.y+=e.y,this}function l(t){return new e(this.x,this.y)}function f(e){return t(this,e)}function d(e){return n(this,e)}function h(e){return r(this,e)}function g(e){return this.x*=e,this.y*=e,this}function m(e){return o(this,e)}function p(){return a(this)}function v(){return(Math.abs(this.x)+Math.abs(this.y))/2}function y(){return u(this)}function w(e,t){return t=t||.125,this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}function x(){return"{"+this.x+","+this.y+"}"}var b={cross:t,difference:n,distance:r,incidence:o,make:i,normalize:a,power:s,size:u},M={add:c,copy:l,cross:f,difference:d,distance:h,friction:g,incidence:m,normalize:p,power:v,size:y,towards:w,toString:x};return angular.extend(e,b),angular.extend(e.prototype,M),e})}(),function(){"use strict";angular.module("artisan").factory("Hash",[function(){function e(e,n){e=e||"id",n=n?t(n):{},Object.defineProperties(this,{key:{value:e,enumerable:!1,writable:!1},pool:{value:n,enumerable:!1,writable:!1},length:{value:0,enumerable:!1,writable:!0}})}function t(e){return v[e]=v[e]||{}}function n(e){return void 0!==this.pool[e]}function r(e){return this.pool[e]}function o(e){var t=this,n=this.key;return e?t.getId(e[n]):null}function i(e){var t=this;return this.pool[e[this.key]]=e,t.push(e),e}function a(e,t){var n=this,r=n.get(e);return r?"function"==typeof t&&t(r):r=n.set(e),r}function s(e){var t=this,n=t.get(e);if(n)for(var r,o=0,i=Object.keys(e);o<i.length;o++)r=i[o],n[r]=e[r];else n=t.set(e);return n}function u(e){var t=this,n=this.pool,r=this.key,o=t.get(e);if(o){var i=t.indexOf(o);-1!==i&&t.splice(i,1),delete n[o[r]]}return t}function c(e){var t=this;if(!e)return t;for(var n=0;n<e.length;)t.add(e[n]),n++;return t}function l(e){var t=this;if(!e)return t;for(var n=0;n<e.length;)t.remove(e[n]),n++;return t}function f(){var e,t=this,n=t.key,r=t.pool,o=0;for(t.length;t.length;)e=t.shift(),delete r[e[n]],o++;return t}function d(e){var t=this;if(e)for(var n=0;n<t.length;)e(t[n],n),n++;return t}function h(e,t){var n=this;return e=e||this.key,n.sort(function(n,r){var o=t?r:n,i=t?n:r;return o[e]-i[e]}),n}function g(e){return this.forward(e,!0)}function m(e){if(e.key!==this.key||e.length!==this.length)return!0;for(var t=!1,n=0,r=this.length,o=this.key;t&&n<r;)t=this[n][o]!==e[n][o],n++}function p(){var e=this,t=this.pool,n=this.key;Object.keys(t).forEach(function(e){delete t[e]}),angular.forEach(e,function(e){t[e[n]]=e})}var v={},y={get:t},w={has:n,getId:r,get:o,set:i,once:a,add:s,remove:u,each:d,addMany:c,removeMany:l,removeAll:f,forward:h,backward:g,differs:m,updatePool:p};return e.prototype=new Array,angular.extend(e,y),angular.extend(e.prototype,w),e}])}(),function(){"use strict";angular.module("artisan").factory("$promise",["$q",function(e){function t(t){if("function"!=typeof t)throw"promise resolve callback missing";var n=e.defer();return t(n),n.promise}function n(t){return e.all(t)}var r={all:n},o={};return angular.extend(t,r),angular.extend(t.prototype,o),t}])}(),function(){"use strict";angular.module("artisan").factory("State",["$timeout","$rootScope",function(e,t){function n(){this.idle()}function r(){var e=this;return!e.isBusy&&(e.isBusy=!0,e.isError=!1,e.isErroring=!1,e.isSuccess=!1,e.isSuccessing=!1,e.errors=[],!0)}function o(e){var t=this,n=null;return n={ready:t.isReady,busy:t.isBusy,successing:t.isSuccessing,success:t.isSuccess,errorring:t.isErroring,error:t.isError},e&&angular.forEach(e,function(e,t){n[e]=n[t]}),n}function i(){var e=this;return!e.isBusy&&!e.isErroring&&!e.isSuccessing}function a(t){console.log("State.error",t);var n=this;n.isBusy=!1,n.isError=!0,n.isErroring=!0,n.isSuccess=!1,n.isSuccessing=!1,n.errors.push(t),e(function(){n.isErroring=!1},h)}function s(){var e=this;return e.isError?e.errors[e.errors.length-1]:null}function u(){var e=this;e.isBusy=!1,e.isError=!1,e.isErroring=!1,e.isSuccess=!1,e.isSuccessing=!1,e.button=null,e.errors=[]}function c(e){var t=this,n={ready:"submit",busy:"sending",error:"error",success:"success"};e&&angular.extend(n,e);var r=n.ready;return t.isBusy?r=n.busy:t.isSuccess?r=n.success:t.isError&&(r=n.error),r}function l(){var e=this;e.idle(),e.isReady=!0,t.$broadcast("$stateReady",e)}function f(){var e=this;return{busy:e.isBusy,ready:e.isReady,successing:e.isSuccessing,success:e.isSuccess,errorring:e.isErroring,error:e.isError}}function d(){var t=this;t.isBusy=!1,t.isError=!1,t.isErroring=!1,t.isSuccess=!0,t.isSuccessing=!0,t.errors=[],e(function(){t.isSuccessing=!1},h)}var h=2e3,g={},m={busy:r,classes:o,enabled:i,error:a,errorMessage:s,errors:[],idle:u,labels:c,ready:l,submitClass:f,success:d};return angular.extend(n,g),angular.extend(n.prototype,m),n}])}(),function(){"use strict";var e=function(){var e="transform",t=document.createElement("DIV");return void 0!==t.style[e]?["webkit","moz","o","ms"].every(function(n){var r="-"+n+"-transform";return void 0===t.style[r]||(e=r,!1)}):e=void 0!==t.style.webkitTransform?"-webkit-transform":void 0,e}();angular.module("artisan").factory("Style",[function(){function t(){this.props={scale:1,hoverScale:1,currentScale:1}}function n(e){var t=[];for(var n in this)"props"!==n&&t.push(n+":"+this[n]);e.style.cssText=t.join(";")+";"}function r(t){this[e]=t}function o(t,n){this[e+"-origin-x"]=Math.round(1e3*t)/1e3+"%",this[e+"-origin-y"]=Math.round(1e3*n)/1e3+"%"}var i={},a={set:n,transform:r,transformOrigin:o};return angular.extend(t,i),angular.extend(t.prototype,a),t}])}(),function(){"use strict";angular.module("artisan").service("Utils",["$compile","$controller","Vector",function(e,t,n){function r(n,r,o,i){r.html(o);var a=e(r.contents());if(i.controller){var s=n.$new();angular.extend(s,i);var u=t(i.controller,{$scope:s});i.controllerAs&&(n[i.controllerAs]=u),r.data("$ngControllerController",u),r.children().data("$ngControllerController",u),n=s}a(n)}function o(e,t){return Object.keys(e)[Object.values(e).indexOf(t)]}function i(e,t,n){e=e||"",t=t||"";var r=e.split(",");if(r.length>1){var o=r.shift();return angular.forEach(r,function(e,r){o=n?o.split("{"+r+"}").join("' + "+t+e+" + '"):o.split("{"+r+"}").join(t+e)}),n?"'"+o+"'":o}return t+e}function a(e,t,n){n=n||"id";var r=-1;if(e)for(var o=0,i=e.length;o<i;){if(e[o]&&e[o][n]===t[n]){r=o;break}o++}return r}function s(e,t){return e[t]}function u(e,t,n){return"string"==typeof t?u(e,t.split("."),n):1==t.length&&void 0!==n?e[t[0]]+=n:0===t.length?e:u(e[t[0]],t.slice(1),n)}function c(e,t,n){return"string"==typeof t?c(e,t.split("."),n):1==t.length&&void 0!==n?e[t[0]]=n:0===t.length?e:c(e[t[0]],t.slice(1),n)}function l(e,t){var n=-1;if(e)for(var r=0,o=e.length;r<o;){if(e[r]===t){n=r;break}r++}return-1!==n?(e.splice(n,1),t):null}function f(e){return function(t,n){return t[e]<n[e]?1:t[e]>n[e]?-1:0}}function d(e,t,n){var r,o,i,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:v(),a=null,i=e.apply(r,o),a||(r=o=null)};return function(){var c=v();s||!1!==n.leading||(s=c);var l=t-(c-s);return r=this,o=arguments,l<=0||l>t?(a&&(clearTimeout(a),a=null),s=c,i=e.apply(r,o),a||(r=o=null)):a||!1===n.trailing||(a=setTimeout(u,l)),i}}function h(e){}function g(e,t){var n=null;return e&&angular.forEach(e,function(e){var r=!0;angular.forEach(t,function(t,n){r=r&&e[n]===t}),r&&(n=e)}),n}var m=this,p={compileController:r,extract:o,format:i,indexOf:a,reducer:s,reducerAdder:u,reducerSetter:c,removeValue:l,reverseSortOn:f,throttle:d,toMd5:h,where:g};angular.extend(m,p);var v=Date.now||function(){return(new Date).getTime()}}]),function(){"function"!=typeof Array.prototype.reduce&&Object.defineProperty(Array.prototype,"reduce",{value:function(e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),r=n.length>>>0,o=0;if(2==arguments.length)t=arguments[1];else{for(;o<r&&!(o in n);)o++;if(o>=r)throw new TypeError("Reduce of empty array with no initial value");t=n[o++]}for(;o<r;)o in n&&(t=e(t,n[o],o,n)),o++;return t}})}(),function(){"function"!=typeof Object.values&&Object.defineProperty(Object,"values",{value:function(e){var t=[];for(var n in e)has(e,n)&&isEnumerable(e,n)&&t.push(e[n]);return t}})}()}(),function(){"use strict";angular.module("artisan").provider("environment",["$locationProvider","$httpProvider",function(e,t){function n(){t.defaults.headers.common["Accept-Language"]=h.language.code,t.defaults.withCredentials=h.http.withCredentials,t.interceptors.push.apply(t.interceptors,h.http.interceptors)}function r(){e.html5Mode(h.location.html5),e.hashPrefix(h.location.hash)}function o(e,t){d[e]=d[e]?angular.merge(d[e],t):t,i()}function i(){h=angular.copy(l),d.environment&&angular.merge(h,d.environment);var e=s();e&&angular.merge(h,e),angular.merge(h,f),n(),r()}function a(e){d[e]&&(h=angular.copy(l),angular.merge(h,d[e]),angular.merge(h,f),n(),r())}function s(){for(var e in d){var t=d[e];if(t.paths&&-1!==window.location.href.indexOf(t.paths.app))return t}}var u=this,c={add:o,use:a};angular.extend(u,c);var l={plugins:{facebook:{fields:"id,name,first_name,last_name,email,gender,picture,cover,link",scope:"public_profile, email",version:"v2.10"},google:{},googlemaps:{clusterer:!0,styles:"/googlemaps/applemapesque.json",options:{center:{lat:43.9023386,lng:12.8505094},disableDefaultUI:!0,mapTypeId:"roadmap",scrollwheel:!0,zoom:4}},mapbox:{clusterer:!0,options:{bearing:0,center:[12.8505094,43.9023386],curve:1,pitch:0,speed:1.5,zoom:4},version:"v0.42.0"}},http:{interceptors:[],withCredentials:!1},language:{code:"en",culture:"en_US",iso:"ENU",name:"English"},location:{hash:"!",html5:!1},paths:{}},f={};window.environment&&angular.merge(f,window.environment);var d={},h=angular.copy(l);angular.merge(h,f),u.$get=function(){return h}}])}(),function(){"use strict";angular.module("artisan").factory("Doc",["Api","$promise",function(e,t){function n(e){e&&angular.extend(this,e)}var r={},o={};return angular.extend(n,r),angular.extend(n.prototype,o),n}])}(),function(){"use strict";angular.module("artisan").factory("Route",["$promise","$location","$route","$routeParams","Router",function(e,t,n,r,o){function i(e){var n={controller:e.$$route.controller,params:e.params,path:t.path(),pathParams:e.pathParams,originalPath:e.$$route.originalPath,templateUrl:e.loadedTemplateUrl};angular.extend(this,n)}function a(){return new i(n.current)}var s={current:a},u={};return angular.extend(i,s),angular.extend(i.prototype,u),i}])}(),function(){"use strict";angular.module("artisan").factory("View",["Api","$promise","environment","Doc","Route",function(e,t,n,r,o){function i(e,t){var r={doc:e,environment:n,route:t};angular.extend(this,r)}function a(){return t(function(t){var n=o.current(),a=n.path;console.log("ViewCurrent",a),e.docs.path(a).then(function(e){var o=new r(e),a=new i(o,n);t.resolve(a)},function(e){t.reject(e)})})}var s={current:a},u={};return angular.extend(i,s),angular.extend(i.prototype,u),i}])}(),function(){"use strict";angular.module("artisan").service("AuthService",["$q","$rootScope","$location","LocalStorage","environment",function(e,t,n,r,o){function i(t){var o=e.defer(),i=r.get("authorization");return i&&i.created_at+i.expires_in<(new Date).getTime()?o.resolve(i):(o.reject({status:"unauthorized"}),n.path(t)),o.promise}function a(){var e=r.get("authorization");return e&&e.created_at+e.expires_in<(new Date).getTime()}function s(e){var t=r.get("authorization");return t&&t.created_at+t.expires_in<(new Date).getTime()&&(e.headers=e.headers||{},e.headers.Authorization="Bearer "+t.access_token),e}function u(t){return t||e.when(t)}function c(o){switch(console.log("AuthService.responseError",o),o.status){case 400:var i=[];if(o.data){i.push(o.data.Message);for(var a in o.data.ModelState)for(var s=0;s<o.data.ModelState[a].length;s++)i.push(o.data.ModelState[a][s])}else i.push("Server error");o.Message=i.join(" "),t.httpError=o,t.$broadcast("onHttpInterceptorError",o);break;case 404:o.Message="Not found",t.httpError=o,t.$broadcast("onHttpInterceptorError",o);break;case 500:t.httpError=o,t.$broadcast("onHttpInterceptorError",o);break;case 401:r.delete("authorization"),r.delete("user"),n.path("/signin");break;case-1:window.open(o.config.path,"_blank")}return e.reject(o)}function l(){r.delete("authorization"),r.delete("user"),r.delete("CampagnoloToken"),r.delete("GoogleToken"),r.delete("StravaToken"),r.delete("FacebookToken"),r.delete("GarminToken")}var f=this,d={isAuthorizedOrGoTo:i,isAuthorized:a,request:s,response:u,responseError:c,signOut:l};angular.extend(f,d),console.log(o.plugins)}])}(),function(){"use strict";angular.module("artisan").service("Http",["$http","$promise","$timeout","environment",function(e,t,n,r){function o(e){return r.paths.api+e}function i(n,r,i){return t(function(t){e[n](o(r),i).then(function(e){t.resolve(e.data)},function(e,n){var r=e&&e.data?e.data:{};r.status=e.status,t.reject(r)})})}function a(e){return i("get",e)}function s(e,t){return i("post",e,t)}function u(e,t){return i("put",e,t)}function c(e,t){return i("patch",e,t)}function l(e){return i("delete",e)}function f(e,r){return r=r||1e3,t(function(t){n(function(){t.resolve({data:e})},r)})}var d=this,h={get:a,post:s,put:u,patch:c,delete:l,fake:f};angular.extend(d,h)}])}(),function(){"use strict";angular.module("artisan").factory("Preload",["$promise",function(e){function t(e){var t=this;t.path=e,t.loaded=0,t.total=0,t.progress=0}function n(n,r){return e(function(o){function i(){s.loaded=0,s.total=0,angular.forEach(a,function(e){s.loaded+=e.loaded,s.total+=e.total});var e=s.total?s.loaded/s.total:0;e>s.progress&&(s.progress=e,r&&r(s))}var a=n.map(function(e){return new t(e)}),s={loaded:0,total:0,progress:0,preloads:a},u=setInterval(i,100);e.all(a.map(function(e){return e.start()})).then(function(){clearInterval(u),i(),o.resolve(a.slice())},function(e){o.reject(e)})})}function r(){var t=this;return e(function(e){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.open("GET",t.path,!0),n.onloadstart=function(e){},n.onprogress=function(e){t.loaded=e.loaded,t.total=e.total,t.progress=e.total?e.loaded/e.total:0},n.onloadend=function(e){t.loaded=t.total,t.progress=1},n.onload=function(){t.buffer=n.response,e.resolve(t)},n.onerror=function(n){console.log("Preload.xhr.onerror",n),t.loaded=t.total,t.progress=1,e.reject(n)},n.send(),t.xhr=n})}function o(){var e=this,t=new Blob([e.buffer]),n=new Image;return n.src=window.URL.createObjectURL(t),n}var i={all:n},a={start:r,image:o};return angular.extend(t,i),angular.extend(t.prototype,a),t}])}(),function(){"use strict";angular.module("artisan").service("$once",["$promise",function(e){function t(e,t){return e.indexOf(".js")?n(e,t):e.indexOf(".css")?r(e):void 0}function n(t,n){return e(function(e){try{var r=a[t]=a[t]||++s;if(r="OnceScript"+r,document.getElementById(r))e.reject();else{var o=document.getElementsByTagName("script"),i=o[o.length-1],u=document.createElement("script");u.id=r,n?(!0===n&&(n=r,t=t.split("{{callback}}").join(n)),window[n]=function(t){e.resolve(t)}):u.addEventListener("load",e.resolve),u.addEventListener("error",e.reject),u.src=t,i.parentNode.insertBefore(u,i.nextSibling)}}catch(t){e.reject(t)}})}function r(t){return e(function(e){try{var n=a[t]=a[t]||++s;if(n="OnceStyle"+n,document.getElementById(n))e.resolve();else{var r=document.getElementsByTagName("link"),o=r[r.length-1],i=document.createElement("link");i.id=n,i.rel="stylesheet",i.href=t,i.addEventListener("load",e.resolve),i.addEventListener("error",e.reject),o.parentNode.insertBefore(i,o.nextSibling)}}catch(t){e.reject(t)}})}var o=this,i={load:t,script:n,link:r};angular.extend(o,i);var a={},s=0}])}(),function(){"use strict";angular.module("artisan").service("Router",["$rootScope","$location","$route","$timeout",function(e,t,n,r){function o(){b=y?y.controller:null,M=w?w.controller:null,k=x?x.controller:null}function i(e,t,n){y=null,w=n?n.$$route:null,x=t?t.$$route:null,o(),p.loading=!0}function a(e,t,n){y=n?n.$$route:null,w=t?t.$$route:null,x=null,o()}function s(e,t,n,r){y=null,w=n.$$route||null,x=null,o()}function u(e,t){y=t?t.$$route:null,w=t?t.$$route:null,x=null,o()}function c(e,t){r(function(){p.loading=!1},1e3)}function l(e){return M===e}function f(e){t.$$lastRequestedPath=t.path(),t.path(e)}function d(e){e=t.$$lastRequestedPath||e,t.$$lastRequestedPath=null,t.path(e)}function h(e,t){t?r(function(){f(e)},t):f(e)}function g(e,t){t?r(function(){d(e)},t):d(e)}function m(e,n){n?r(function(){t.path(e)},n):r(function(){t.path(e)})}var p=this,v={isController:l,redirect:h,path:g,apply:m};angular.extend(p,v),e.$on("$routeChangeStart",i),e.$on("$routeChangeSuccess",a),e.$on("$routeChangeError",s),e.$on("$routeUpdate",u),e.$on("$stateReady",c);var y,w,x,b,M,k}])}(),function(){"use strict";angular.module("artisan").service("Silent",["$rootScope","$location",function(e,t){function n(){var t=e.$$listeners.$locationChangeSuccess;angular.forEach(t,function(e,n){function r(){t[n]=e}e!==listener&&(t[n]=r)})}function r(e){u===t.path()&&n(),u=null}function o(e,n){var r=t.url(e);n&&r.replace(),u=t.path()}function i(e){return t.path(e)}var a=this,s={silent:o,path:i};angular.extend(a,s),e.$$listeners.$locationChangeSuccess.unshift(r);var u}])}(),function(){"use strict";var e=angular.module("artisan");e.service("Cookie",["$promise",function(e){function t(e){a(e,"",-1)}function n(e){return-1!==document.cookie.indexOf(";"+e+"=")||0===document.cookie.indexOf(e+"=")}function r(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t)){var i=o.substring(t.length,o.length),a=null;try{a=JSON.parse(decodeURIComponent(atob(i)))}catch(e){console.log("Cookie.get.error parsing",key,e)}return a}}return null}function o(t){return e(function(e){function n(){if(a>s)e.reject("timeout");else{var u=r(t);u?e.resolve(u):(a+=i,o=setTimeout(n,i))}}var o,i=1e3,a=0,s=Cookie.TIMEOUT;n()})}function i(e,t,n){try{var r=[],o=JSON.stringify(t,function(e,t){if("pool"!==e){if("object"==typeof t&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t}});r=null,a(e,btoa(encodeURIComponent(o)),n)}catch(n){console.log("CookieSet.error serializing",e,t,n)}}function a(e,t,n){var r;if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toGMTString()}else r="";document.cookie=e+"="+t+r+"; path=/"}var s={TIMEOUT:3e5,delete:t,exist:n,get:r,on:o,set:i};angular.extend(this,s)}]),e.service("LocalStorage",["$promise","Cookie",function(e,t){function n(e){return void 0!==window.localStorage[e]}function r(e){var t=null;if(void 0!==window.localStorage[e])try{t=JSON.parse(window.localStorage[e])}catch(t){console.log("LocalStorage.get.error parsing",e,t)}return t}function o(e,t){try{var n=[],r=JSON.stringify(t,function(e,t){if("pool"!==e){if("object"==typeof t&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t}});n=null,window.localStorage.setItem(e,r)}catch(n){console.log("LocalStorage.set.error serializing",e,t,n)}}function i(e){window.localStorage.removeItem(e)}function a(n){return e(function(e){function r(t){if(o&&clearTimeout(o),t.originalEvent.key==n)try{var r=JSON.parse(t.originalEvent.newValue);e.resolve(r)}catch(t){console.log("LocalStorage.on.error parsing",n,t),e.reject("error parsing "+n)}}var o,i=t.TIMEOUT;angular.element(window).on("storage",r),o=setTimeout(function(){e.reject("timeout")},i)})}var s={TIMEOUT:3e5,delete:i,exist:n,get:r,on:a,set:o},u=function(){var e=!1;try{e="localStorage"in window&&null!==window.localStorage,e?(window.localStorage.setItem("test","1"),window.localStorage.removeItem("test")):e=!1}catch(t){e=!1}return e}();u?angular.extend(this,s):angular.extend(this,t),this.supported=u}]),e.factory("SessionStorage",["$promise","Cookie",function(e,t){var n={TIMEOUT:3e5,delete:LocalDelete,exist:LocalExists,get:LocalGet,on:LocalOn,set:LocalSet},r=function(){var e=!1;try{e="sessionStorage"in window&&void 0!==window.sessionStorage,e?(window.sessionStorage.setItem("test","1"),window.sessionStorage.removeItem("test")):e=!1}catch(t){e=!1}return e}();r?angular.extend(this,n):angular.extend(this,t),this.supported=r}])}(),function(){"use strict";angular.module("artisan").service("Trust",["$sce",function(e){function t(e){var t=c.indexOf(e);return-1!==t?l[t]:null}function n(e,t){c.push(e),c.push(t)}function r(e,r){var o=t(e);return o||(o=r(),n(e,o)),o}function o(t){return r(t,function(){return e.trustAsHtml(t)})}function i(t){return r(t,function(){return e.trustAsResourceUrl(t)})}function a(e){return r(e,function(){return"url('"+e+"')"})}var s=this,u={html:o,resource:i,url:a};angular.extend(s,u);var c=[],l=[]}])}(),function(){"use strict";angular.module("artisan").service("FacebookService",["$promise","$once","LocalStorage","environment",function(e,t,n,r){function o(){return e(function(e){void 0!==window.FB?e.resolve(window.FB):i().then(function(t){e.resolve(window.FB)},function(t){e.reject(t)})})}function i(){return e(function(e){t.script("//connect.facebook.net/"+r.language.culture+"/sdk.js","fbAsyncInit").then(function(){window.FB.init({appId:h.appId,status:!0,cookie:!0,xfbml:!0,version:h.version}),e.resolve(window.FB)},function(t){e.reject(t)})})}function a(e,t,r){f.authResponse=null,"connected"===e.status?(f.authResponse=e.authResponse,n.set("facebook",e.authResponse),t.resolve(e)):"not_authorized"===e.status?(n.delete("facebook"),r?t.resolve(e):t.reject(e)):t.reject(e)}function s(t){return t=t||h.fields,e(function(e){c().then(function(n){window.FB.api("/me",{fields:t},function(t){if(!t||t.error){var n=t?t.error:"error";console.log("FacebookGetMe.error",n),e.reject(n)}else console.log("FacebookGetMe.success",t),e.resolve(t)})})})}function u(t){return t=t||300,e(function(e){c().then(function(n){window.FB.api("/me/picture",{width:t,height:t,type:"square"},function(t){if(!t||t.error){var n=t?t.error:"error";console.log("FacebookGetMyPicture.error",n),e.reject(n)}else console.log("FacebookGetMyPicture.success",t),e.resolve(t)})})})}function c(){return e(function(e){o().then(function(t){console.log("FacebookLogin",t),t.login(function(t){a(t,e)},{scope:h.scope})})})}function l(){return e(function(e){o().then(function(t){t.logout(function(t){e.resolve(t)})})})}var f=this,d={login:c,logout:l,status:a,getMe:s,getMyPicture:u};angular.extend(f,d),r.plugins.facebook||trhow("FacebookService.error missing config object in environment.plugins.facebook");var h=r.plugins.facebook;o();var g=n.get("facebook");console.log("facebook.storage",g)}])}(),function(){"use strict";angular.module("artisan").service("GoogleService",["$timeout","$promise","$once","LocalStorage","environment",function(e,t,n,r,o){function i(){return t(function(e){void 0!==window.gapi?e.resolve(window.gapi):a().then(function(t){e.resolve(window.gapi)},function(t){e.reject(t)})})}function a(){return t(function(e){n.script("https://apis.google.com/js/api:client.js?onload={{callback}}",!0).then(function(t){e.resolve(t)},function(t){e.reject(t)})})}function s(){return t(function(t){g?t.resolve(g):i().then(function(){function n(){window.gapi.auth2.init({client_id:o.plugins.google.clientId,cookiepolicy:"single_host_origin",scope:"profile email",fetch_basic_profile:!0,ux_mode:"popup"}).then(function(){g=window.gapi.auth2,console.log("Auth2Init.success",g),t.resolve(g)},function(e){console.log("Auth2Init.error",e),t.reject(e)})}window.gapi.auth2?n():window.gapi.load("auth2",function(){e(function(){n()},200)})},function(e){console.log("Auth2Init.error",e),t.reject(e)})})}function u(){return t(function(e){m?e.resolve():s().then(function(t){m=t.getAuthInstance(),console.log("GoogleService.Auth2Instance.success",m),e.resolve()},function(t){console.log("GoogleService.Auth2Instance.error",t),e.reject(t)})})}function c(){return t(function(e){l().then(function(t){var n=m.currentUser.get().getBasicProfile(),r={id:n.getId(),name:n.getName(),firstName:n.getGivenName(),lastName:n.getFamilyName(),picture:n.getImageUrl(),email:n.getEmail()};console.log("GoogleGetMe.success",r),e.resolve(r)},function(t){console.log("GoogleGetMe.error",t),e.reject(t)})})}function l(){return t(function(e){u().then(function(){function t(){console.log("GoogleLogin.readAccessToken");try{var t=m.currentUser.get().getAuthResponse(!0);console.log("GoogleLogin.readAccessToken.success",t),r.set("google",t),e.resolve({code:t.access_token})}catch(t){console.log("GoogleLogin.readAccessToken.error",t),r.delete("google"),e.reject(t)}}m.isSignedIn&&m.isSignedIn.get()?t():(console.log("GoogleLogin.signIn"),m.signIn({scope:"profile email"}).then(function(e){t()},function(t){console.log("GoogleLogin.error",t),r.delete("google"),e.reject(t)}))},function(e){console.log("GoogleLogin.error",e)})})}function f(){return t(function(e){u().then(function(){m.isSignedIn&&m.isSignedIn.get()?m.signOut().then(function(t){e.resolve()},function(t){console.log("GoogleService.signOut.error",t),e.reject(t)}):e.resolve()},function(t){console.log("GoogleService.signOut.error",t),e.reject(t)})})}var d=this,h={login:l,logout:f,getMe:c};angular.extend(d,h),o.plugins.google||trhow("GoogleService.error missing config object in environment.plugins.google");var g=(o.plugins.google,null),m=null;s();var p=r.get("google");console.log("google.storage",p)}])}(),
function(){"use strict";angular.module("artisan").directive("googlemaps",["$timeout","$compile","$promise","Http","GoogleMaps","environment",function(e,t,n,r,o,i){function a(i,a,s){function c(){return n(function(e){o.maps().then(function(){l().then(function(t){v=new google.maps.Map(a[0],t),y=g(),e.resolve(v)})})})}function l(){return n(function(e){var t=angular.copy(u.options);u.styles?r.get(u.styles).then(function(n){t.styles=n,e.resolve(t)},function(n){console.log("GooglemapsOptions.error","unable to load styles",u.styles),e.resolve(t)}):e.resolve(t)})}function f(){angular.forEach(M,function(e){e.setMap(null)})}function d(e){c().then(function(t){f(),w=new google.maps.LatLngBounds,M=e.filter(function(e){var t=!0;return b.month&&(t=t&&b.month.items.has(e.id)),b.category&&(t=t&&-1!==e.categories.indexOf(b.category.key)),t}).map(function(e){return m(e)}),u.clusterer&&(x=p(M))})}function h(e){-1!==["hybrid","roadmap","satellite","terrain"].indexOf(e)&&v.setMapTypeId(e)}function g(){var e=new google.maps.InfoWindow({maxWidth:350,pixelOffset:new google.maps.Size(0,15)});return google.maps.event.addListener(e,"domready",function(){var e=$(".gm-style-iw"),t=e.prev();t.children(":nth-child(2)").css({display:"none"}),t.children(":nth-child(4)").css({display:"none"}),e.parent().parent().css({left:"115px"}),t.children(":nth-child(1)").attr("style",function(e,t){return t+"display: none!important"}),t.children(":nth-child(3)").attr("style",function(e,t){return t+"display: none!important"}),t.children(":nth-child(3)").find("div").children().attr("style",function(e,t){return t+"opacity: 0!important;"});var n=e.next();n.css({width:"13px",height:"13px",overflow:"hidden",position:"absolute",right:"56px",top:"17px","z-index":"10000",cursor:"pointer",opacity:1,transform:"scale(0.8)"}),n.mouseout(function(){$(this).css({opacity:"1"})})}),e}function m(n){var r=new google.maps.LatLng(n.position.latitude,n.position.longitude),o=new google.maps.Marker({position:r,item:n,icon:{url:"img/maps/marker.png",scaledSize:new google.maps.Size(25,25),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},map:v,contentString:'<div id="iw-container"><div class="iw-image" ng-style="{ \'background-image\': cssUrl(selectedBlog.image.url) }"></div><div class="iw-title" ng-bind="selectedBlog.title"></div><div class="iw-cta"><button type="button" class="iw-link" ng-click="openBlog(selectedBlog)">Details</button></div></div>'});return o.onClick=function(){var n=this;e(function(){i.selectedBlog=n.item;var e=t(n.contentString)(i);y.setContent(e[0]),y.open(v,n)})},o.addListener("click",o.onClick),w.extend(r),o}function p(e){return new MarkerClusterer(v,e,{cssClass:"cluster",imagePath:"/img/gmap/m"})}console.log("GooglemapsLink",arguments);var v,y,w,x,b={},M=[],k={setMarkers:d,setType:h};i.connector&&angular.extend(i.connector,k),c()}var s={restrict:"A",scope:{connector:"=googlemaps"},link:a};i.plugins.googlemaps||trhow("googlemaps.error missing config object in environment.plugins.googlemaps");var u=i.plugins.googlemaps;return s}])}(),function(){"use strict";angular.module("artisan").service("GoogleMaps",["$promise","$once","environment",function(e,t,n){function r(){return e(function(e){var r=n.plugins.googlemaps.apiKey;t.script("https://maps.googleapis.com/maps/api/js?key="+r+"&callback={{callback}}",!0).then(function(t){e.resolve(window.google.maps)},function(t){e.reject(t)})})}function o(){return e(function(e){r().then(function(t){var n=new t.Geocoder;e.resolve(n)},function(t){e.reject(t)})})}function i(e,t){var n={street:"route",number:"street_number",locality:"locality",postalCode:"postal_code",city:"administrative_area_level_3",province:"administrative_area_level_2",region:"administrative_area_level_1",country:"country"},r=null;return angular.forEach(t.address_components,function(t){angular.forEach(t.types,function(o){o===n[e]&&(r=t.long_name)})}),r}function a(e){var t=null;return e.length&&(t=e.filter(function(e){return!0}).map(function(e){return{name:e.formatted_address,street:i("street",e),number:i("number",e),locality:i("locality",e),postalCode:i("postalCode",e),city:i("city",e),province:i("province",e),region:i("region",e),country:i("country",e),position:{lng:e.geometry.location.lng(),lat:e.geometry.location.lat()}}})),console.log("GoogleMapsParse",e,t),t}var s=this,u={maps:r,geocoder:o,parse:a};angular.extend(s,u),n.plugins.googlemaps||trhow("GoogleMaps.error missing config object in environment.plugins.googlemaps")}])}(),function(){"use strict";var e=angular.module("artisan");e.directive("mapbox",["$http","$timeout","$compile","$promise","MapBox","environment",function(e,t,n,r,o,i){function a(e,t,i,a){function s(){return r(function(e){o.get().then(function(n){b=new n.Map({container:t[0],style:u.style,interactive:!0,logoPosition:"bottom-right"}),E=b.getCanvasContainer(),u.options&&b.jumpTo(u.options),e.resolve(b)})})}function c(e){b.flyTo(e)}function l(e){c(h({center:[e.lng,e.lat],zoom:20}))}function f(e){b.jumpTo(e)}function d(e){var t=h({center:[e.lng,e.lat],zoom:20});b.MapboxJump(t)}function h(e){return angular.extend(angular.copy(u.options),e)}function g(){M&&angular.forEach(M,function(e){e.remove()})}function m(e){s().then(function(){g(),M=[],u.clusterer?w(e):e&&angular.forEach(e,function(e){var t=p(e);M.push(t)})})}function p(t){var r=e.$new(!0);r.item=t;var o=document.createElement("div");o.id="point",o.className="marker "+t.area.code,o.className+=t.type,o.setAttribute("marker","item");var i=new mapboxgl.Marker(o,{offset:[-10,-10]}).setLngLat([t.position.lng,t.position.lat]).addTo(b),a=angular.element(o);return a.on("click",function(n){e.$emit("onMarkerClicked",t)}),n(a)(r),i}function v(e){var t=null;return e.position&&(t=[e.position.longitude,e.position.latitude,e.position.altitude||0]),t}function y(e){var t=null;if(e){t={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:e.map(function(e){return{type:"Feature",properties:angular.extend({},e),geometry:{type:"Point",coordinates:v(e)}}})}}return t}function w(e){var t=y(e);b.on("load",function(){b.addSource("earthquakes",{type:"geojson",data:t,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),b.addLayer({id:"clusters",type:"circle",source:"earthquakes",filter:["has","point_count"],paint:{"circle-color":{property:"point_count",type:"interval",stops:[[0,"#51bbd6"],[100,"#f1f075"],[750,"#f28cb1"]]},"circle-radius":{property:"point_count",type:"interval",stops:[[0,20],[100,30],[750,40]]}}}),b.addLayer({id:"cluster-count",type:"symbol",source:"earthquakes",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),b.addLayer({id:"unclustered-point",type:"circle",source:"earthquakes",filter:["!has","point_count"],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}})})}function x(){k&&b.fitBounds(k,{speed:1.5,curve:1,padding:30,linear:!1,maxZoom:8})}var b,M,k,E,$={fly:c,flyPosition:l,jump:f,jumpPosition:d,setMarkers:m,fitBounds:x};e.connector&&angular.extend(e.connector,$)}var s={restrict:"A",scope:{connector:"=mapbox"},link:a};i.plugins.mapbox||trhow("mapbox.error missing config object in environment.plugins.mapbox");var u=i.plugins.mapbox;return s}]),e.directive("marker",["$http","$timeout",function(e,t){function n(e,t,n,r){}return{restrict:"A",scope:{item:"=marker"},template:'<div class="inner">   <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24">       <path d="M12 0c-5.522 0-10 4.395-10 9.815 0 5.505 4.375 9.268 10 14.185 5.625-4.917 10-8.68 10-14.185 0-5.42-4.478-9.815-10-9.815zm0 18c-4.419 0-8-3.582-8-8s3.581-8 8-8 8 3.582 8 8-3.581 8-8 8z"/>   </svg>   <span ng-bind="item.code"></span></div>',link:n}}])}(),function(){"use strict";angular.module("artisan").service("MapBox",["$q","$http","$promise","$once","environment",function(e,t,n,r,o){function i(){return n(function(e){window.mapboxgl?e.resolve(window.mapboxgl):n.all([r.script("//api.tiles.mapbox.com/mapbox-gl-js/"+u.version+"/mapbox-gl.js"),r.link("//api.tiles.mapbox.com/mapbox-gl-js/"+u.version+"/mapbox-gl.css")]).then(function(){window.mapboxgl.accessToken=u.accessToken,e.resolve(window.mapboxgl)},function(t){e.reject(t)})})}var a=this,s={get:i};angular.extend(a,s),o.plugins.mapbox||trhow("MapBox.error missing config object in environment.plugins.mapbox");var u=o.plugins.mapbox}])}();
//# sourceMappingURL=artisan.min.js.map
