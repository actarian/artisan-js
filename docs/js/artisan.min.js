!function(){"use strict";angular.module("artisan",["ng","ngRoute","ngMessages"])}(),function(){"use strict";angular.module("artisan").service("FacebookService",["$promise","environment",function(t,e){function n(){return t(function(t){void 0!==window.FB?t.resolve(window.FB):l().then(function(e){t.resolve(window.FB)},function(e){t.reject(e)})})}function r(t,e,n){c.authResponse=null,"connected"===t.status?(c.authResponse=t.authResponse,e.resolve(t)):"not_authorized"===t.status&&n?e.resolve(t):e.reject(t)}function o(e){return e=e||f.fields,t(function(t){a().then(function(n){console.log("FacebookGetMe",n),n.api("/me",{fields:e},function(e){!e||e.error?t.reject("Error occured"):t.resolve(e)})})})}function i(e){return e=e||300,t(function(t){a().then(function(n){n.api("/me/picture",{width:e,height:e,type:"square"},function(e){!e||e.error?t.reject("Error occured"):t.resolve(e)})})})}function a(){return t(function(t){n().then(function(e){console.log("FacebookLogin",e),e.login(function(e){r(e,t)},{scope:f.scope})})})}function s(){return t(function(t){n().then(function(e){e.logout(function(e){t.resolve(e)})})})}function l(){return t(function(t){window.fbAsyncInit=function(){console.log("FacebookInit.fbAsyncInit",window.FB),window.FB.init({appId:f.app_id,status:!0,cookie:!0,xfbml:!0,version:f.version}),t.resolve(window.FB)};try{!function(t,n,r){var o,i=t.getElementsByTagName(n)[0];t.getElementById(r)||(o=t.createElement(n),o.id=r,o.src="//connect.facebook.net/"+e.language.culture+"/sdk.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk")}catch(e){t.reject(e)}})}var c=this,u={login:a,logout:s,status:r,getMe:o,getMyPicture:i};angular.extend(c,u),e.addons&&e.addons.facebook||trhow("FacebookService.error missing config object in environment.addons.facebook");var f=e.addons.facebook;n()}])}(),function(){"use strict";angular.module("artisan").directive("googleMaps",["$timeout","$compile","GoogleMaps",function(t,e,n){return{restrict:"A",link:function(r,o,i){function a(n){function a(){function n(n){var a,l=new google.maps.LatLng(n.place.position.latitude,n.place.position.longitude),f=s.category?s.category.key:"all";a="all"===f?o+n.categories[0]+".png":o+f+".png";var h=new google.maps.Marker({position:l,item:n,icon:{url:a,scaledSize:new google.maps.Size(25,25),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},map:c,contentString:'<div id="iw-container"><div class="iw-image" ng-style="{ \'background-image\': cssUrl(selectedBlog.image.url) }"></div><div class="iw-title" ng-bind="selectedBlog.title"></div><div class="iw-cta"><button type="button" class="iw-link" ng-click="openBlog(selectedBlog)">Details</button></div></div>'});return h.onClick=function(){var n=this;t(function(){r.selectedBlog=n.item;var t=e(n.contentString)(r);u.setContent(t[0]),u.open(c,n)})},h.addListener("click",h.onClick),i.extend(l),h}if(f){angular.forEach(h,function(t){t.setMap(null)});var o="/contrib/themes/GioacchinoRossiniTheme/img/gmap/",i=new google.maps.LatLngBounds;h=f.filter(function(t){var e=!0;return s.month&&(e=e&&s.month.items.has(t.id)),s.category&&(e=e&&-1!==t.categories.indexOf(s.category.key)),e}).map(function(t){return n(t)}),i.isEmpty()||c.fitBounds(i);var a={cssClass:"cluster",imagePath:"/contrib/themes/GioacchinoRossiniTheme/img/gmap/m"};new MarkerClusterer(c,h,a)}}var l=new google.maps.LatLng(22.106445,14.630445),c=new google.maps.Map(o[0],{zoom:3,center:l,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!0,disableDefaultUI:!0,styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#b8b8b8"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]}),u=function(){var t=new google.maps.InfoWindow({maxWidth:350,pixelOffset:new google.maps.Size(0,15)});return google.maps.event.addListener(t,"domready",function(){var t=$(".gm-style-iw"),e=t.prev();e.children(":nth-child(2)").css({display:"none"}),e.children(":nth-child(4)").css({display:"none"}),t.parent().parent().css({left:"115px"}),e.children(":nth-child(1)").attr("style",function(t,e){return e+"display: none!important"}),e.children(":nth-child(3)").attr("style",function(t,e){return e+"display: none!important"}),e.children(":nth-child(3)").find("div").children().attr("style",function(t,e){return e+"opacity: 0!important;"});var n=t.next();n.css({width:"13px",height:"13px",overflow:"hidden",position:"absolute",right:"56px",top:"17px","z-index":"10000",cursor:"pointer",opacity:1,transform:"scale(0.8)"}),n.mouseout(function(){$(this).css({opacity:"1"})})}),t}(),f=[],h=[];r.$on("onSetBlog",function(t,e){angular.forEach(h,function(t){t.item===e&&(c.setZoom(12),c.setCenter(t.position),t.onClick())})}),r.$watchCollection(i.map,function(t){f=t,console.log("map.items",f),a()}),r.$on("onSetFilters",function(t,e){s=e,a()})}var s={};n.maps().then(function(t){a(t)})}}}])}(),function(){"use strict";angular.module("artisan").service("GoogleMaps",["$q","$http","$promise",function(t,e,n){function r(){return n(function(t){if(l)t.resolve(window.google.maps);else{window.__googleMapsInit=function(){t.resolve(window.google.maps),window.__googleMapsInit=null,l=!0};var e=document.createElement("script");e.setAttribute("async",null),e.setAttribute("defer",null),e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key="+s+"&callback=__googleMapsInit"),document.body.appendChild(e)}})}function o(){var e=t.defer();return r().then(function(t){var n=new t.Geocoder;e.resolve(n)},function(t){e.reject(t)}),e.promise}function i(t,e){var n={street:"route",number:"street_number",locality:"locality",postalCode:"postal_code",city:"administrative_area_level_3",province:"administrative_area_level_2",region:"administrative_area_level_1",country:"country"},r=null;return angular.forEach(e.address_components,function(e){angular.forEach(e.types,function(o){o===n[t]&&(r=e.long_name)})}),r}function a(t){var e=null;return t.length&&(e=t.filter(function(t){return!0}).map(function(t){return{name:t.formatted_address,street:i("street",t),number:i("number",t),locality:i("locality",t),postalCode:i("postalCode",t),city:i("city",t),province:i("province",t),region:i("region",t),country:i("country",t),position:{lng:t.geometry.location.lng(),lat:t.geometry.location.lat()}}})),console.log("googleMaps.parse",t,e),e}var s="AIzaSyBlgTatREkeIDKEKYL_dtaaDx1yYxmx_iM",l=!1;this.maps=r,this.geocoder=o,this.parse=a}])}(),function(){"use strict";var t=angular.module("artisan");t.directive("mapbox",["$http","$timeout","$compile","MapBox",function(t,e,n,r){function o(t,e,o,s){function l(e){e.accessToken="pk.eyJ1IjoiZmljb3dzZGV2IiwiYSI6ImNqNXJzajVobTB5cW8yd25tejhqcjN2c3kifQ.CsUfBV2eN2ftVELq0xwlGA",w=v(),y(),t.$watch("sources",function(t){t&&(t.addMarkers=h,t.jumpToMarker=g,t.flyToMarker=m)}),c()}function c(){w.on("load",function(){w.addSource("earthquakes",{type:"geojson",data:"/api/maps/earthquakes.geojson.js",cluster:!0,clusterMaxZoom:14,clusterRadius:50}),w.addLayer({id:"clusters",type:"circle",source:"earthquakes",filter:["has","point_count"],paint:{"circle-color":{property:"point_count",type:"interval",stops:[[0,"#51bbd6"],[100,"#f1f075"],[750,"#f28cb1"]]},"circle-radius":{property:"point_count",type:"interval",stops:[[0,20],[100,30],[750,40]]}}}),w.addLayer({id:"cluster-count",type:"symbol",source:"earthquakes",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),w.addLayer({id:"unclustered-point",type:"circle",source:"earthquakes",filter:["!has","point_count"],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}})})}function u(t){return angular.extend(angular.copy(a),t)}function f(e){var r=t.$new(!0);r.item=e;var o=document.createElement("div");o.id="point",o.className="marker "+e.area.code,o.className+=e.type===$.INFO?" info":"",o.setAttribute("marker","item");var i=new mapboxgl.Marker(o,{offset:[-10,-10]}).setLngLat([e.position.lng,e.position.lat]).addTo(w),a=angular.element(o);return a.on("click",function(n){t.$emit("onMarkerClicked",e)}),n(a)(r),i}function h(t){x&&angular.forEach(x,function(t){t.remove()}),x=[],t&&angular.forEach(t,function(t){b=f(t),x.push(b)})}function d(t){var e=u({center:[t.lng,t.lat],zoom:20});w.flyTo(e)}function p(t){var e=u({center:[t.lng,t.lat],zoom:20});w.jumpTo(e)}function m(t){d(t.position)}function g(t){p(t.position)}function v(){var t=new mapboxgl.Map({container:e[0],style:"mapbox://styles/ficowsdev/cj8cztc3r8nv32sl5npfr1yip",interactive:!0,logoPosition:"bottom-right",center:[i.lng,i.lat],zoom:6});return k=t.getCanvasContainer(),t}function y(){var t={lng:11.411248,lat:44.515702};w.jumpTo({center:[parseFloat(t.lng),parseFloat(t.lat)],zoom:17.63,pitch:53,bearing:-11.68})}var w,x,b,k;r.get().then(function(t){l(t)});var $={DOCUMENT:1,EVENT:2,INFO:3}}var i={lng:11.411248,lat:44.515702},a={center:[i.lng,i.lat],zoom:17.63,pitch:53,bearing:-11.68,speed:1.5,curve:1};return{restrict:"A",scope:{sources:"=mapbox"},link:o}}]),t.directive("marker",["$http","$timeout",function(t,e){function n(t,e,n,r){}return{restrict:"A",scope:{item:"=marker"},template:'<div class="inner">   <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24">       <path d="M12 0c-5.522 0-10 4.395-10 9.815 0 5.505 4.375 9.268 10 14.185 5.625-4.917 10-8.68 10-14.185 0-5.42-4.478-9.815-10-9.815zm0 18c-4.419 0-8-3.582-8-8s3.581-8 8-8 8 3.582 8 8-3.581 8-8 8z"/>   </svg>   <span ng-bind="item.code"></span></div>',link:n}}])}(),function(){"use strict";var t=angular.module("artisan");t.service("MapBox",["$q","$http","$promise",function(t,e,n){function r(){return n(function(t){window.mapboxgl?t.resolve(window.mapbox):n.all([o("//api.tiles.mapbox.com/mapbox-gl-js/v0.42.0/mapbox-gl.js"),i("//api.tiles.mapbox.com/mapbox-gl-js/v0.42.0/mapbox-gl.css")]).then(function(){t.resolve(window.mapboxgl)},function(e){t.reject(e)})})}function o(t){return n(function(e){try{var n="mapboxscript",r=document.getElementsByTagName("script")[0];if(document.getElementById(n))return;var o=document.createElement("script");o.id=n,o.src=t,o.addEventListener("load",e.resolve),o.addEventListener("error",e.reject),r.parentNode.insertBefore(o,r)}catch(t){e.reject(t)}})}function i(t){return n(function(e){try{var n="mapboxstyle",r=document.getElementsByTagName("link")[0];if(document.getElementById(n))return;var o=document.createElement("link");o.id=n,o.rel="stylesheet",o.href=t,o.addEventListener("load",e.resolve),o.addEventListener("error",e.reject),r.parentNode.insertBefore(o,r)}catch(t){e.reject(t)}})}var a=this,s={get:r};angular.extend(a,s)}]),t.service("___GoogleMaps",["$q","$http","$promise",function(t,e,n){function r(){return n(function(t){if(l)t.resolve(window.google.maps);else{window.__googleMapsInit=function(){t.resolve(window.google.maps),window.__googleMapsInit=null,l=!0};var e=document.createElement("script");e.setAttribute("async",null),e.setAttribute("defer",null),e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key="+s+"&callback=__googleMapsInit"),document.body.appendChild(e)}})}function o(){var e=t.defer();return r().then(function(t){var n=new t.Geocoder;e.resolve(n)},function(t){e.reject(t)}),e.promise}function i(t,e){var n={street:"route",number:"street_number",locality:"locality",postalCode:"postal_code",city:"administrative_area_level_3",province:"administrative_area_level_2",region:"administrative_area_level_1",country:"country"},r=null;return angular.forEach(e.address_components,function(e){angular.forEach(e.types,function(o){o===n[t]&&(r=e.long_name)})}),r}function a(t){var e=null;return t.length&&(e=t.filter(function(t){return!0}).map(function(t){return{name:t.formatted_address,street:i("street",t),number:i("number",t),locality:i("locality",t),postalCode:i("postalCode",t),city:i("city",t),province:i("province",t),region:i("region",t),country:i("country",t),position:{lng:t.geometry.location.lng(),lat:t.geometry.location.lat()}}})),console.log("googleMaps.parse",t,e),e}var s="AIzaSyBlgTatREkeIDKEKYL_dtaaDx1yYxmx_iM",l=!1;this.maps=r,this.geocoder=o,this.parse=a}])}(),function(){"use strict";angular.module("artisan").provider("environment",["$locationProvider","$httpProvider",function(t,e){function n(){e.defaults.headers.common["Accept-Language"]=d.language.code,e.defaults.withCredentials=d.http.withCredentials,e.interceptors.push.apply(e.interceptors,d.http.interceptors)}function r(){t.html5Mode(d.location.html5),t.hashPrefix(d.location.hash)}function o(t,e){h[t]=h[t]?angular.merge(h[t],e):e,i()}function i(){d=angular.copy(u);var t=s();t&&angular.merge(d,t),angular.merge(d,f),n(),r()}function a(t){h[t]&&(d=angular.copy(u),angular.merge(d,h[t]),angular.merge(d,f),n(),r())}function s(){for(var t in h){var e=h[t];if(e.paths&&-1!==window.location.href.indexOf(e.paths.app))return e}}var l=this,c={add:o,use:a};angular.extend(l,c);var u={paths:{},location:{html5:!1,hash:"!"},http:{withCredentials:!1,interceptors:[]},addons:{facebook:{app_id:340008479796111,scope:"public_profile, email",fields:"id,name,first_name,last_name,email,gender,picture,cover,link",version:"v2.10"}},language:{code:"en",culture:"en_US",name:"English",iso:"ENU"}},f={};window.environment&&angular.merge(f,window.environment);var h={},d=angular.copy(u);angular.merge(d,f),l.$get=function(){return d}}])}(),function(){"use strict";angular.module("artisan").factory("Animate",[function(){function t(t){this.callback=t,this.key=null,this.ticks=0}function e(){var t=this;t.key&&(window.cancelAnimationFrame(t.key),t.key=null)}function n(){function t(n){e.ticks++,e.callback(n,e.ticks),e.key=window.requestAnimationFrame(t)}var e=this;e.key||t()}function r(){var t=this;t.key?t.pause():t.play()}var o={},i={pause:e,play:n,toggle:r};return angular.extend(t,o),angular.extend(t.prototype,i),t}]),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var r=(new Date).getTime(),o=Math.max(0,16-(r-t)),i=window.setTimeout(function(){e(r+o)},o);return t=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()}(),function(){"use strict";angular.module("artisan").service("Dom",["Point","Rect",function(t,e){function n(t){return t=l(t),t===window&&(t=a()),t.getBoundingClientRect()}function r(t,e){var n,r;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]&&(n=t,!0)}),t[n](e))return t;for(;null!==t;){if(null!==(r=t.parentElement)&&r[n](e))return r;t=r}return null}function o(t,e){var n=null;if(t===e)return t;for(;null!==t;){if(null!==(n=t.parentElement)&&n===e)return n;t=n}return null}function i(e){var n=e.originalEvent?e.originalEvent:e,r=n.type,o=null;if("wheel"===r||"mousewheel"===r||"DOMMouseScroll"===r){var i=n.deltaX||n.wheelDeltaX,a=n.deltaY||n.wheelDeltaY;o=new t(i,a),Math.abs(i)>Math.abs(a)?o.dir=i<0?1:-1:o.dir=a<0?1:-1}return o}function a(){return document.documentElement||document.body.parentNode||document.body}function s(t){return angular.isArray(t)?t:angular.element(t)}function l(t){return angular.isArray(t)?t[0]:t}function c(e){var n=new t;return e=l(e),e&&1===e.nodeType&&(n.x=e.offsetLeft,n.y=e.offsetTop),n}function u(){var e=new t,n=a();return e.x=window.pageXOffset||n.scrollLeft,e.y=window.pageYOffset||n.scrollTop,e}function f(t,e){e=e||a();var n=[];if(t){n.push(t);for(var r=t.parentNode;r!==e;)n.push(r),r=r.parentNode;n.push(e)}return n}function h(){var t=new e;if(void 0!==window.innerWidth)t.width=window.innerWidth,t.height=window.innerHeight;else{var n=a();t.width=n.clientWidth,t.height=n.clientHeight}return t}function d(e){var n=e.originalEvent?e.originalEvent:e,r=n.type,o=null;if(-1!==w.indexOf(r)){var i=null,a=n.touches.length?n.touches:n.changedTouches;a&&a.length&&(i=a[0]),i&&(o=new t,o.x=i.pageX,o.y=i.pageY)}else-1!==y.indexOf(r)&&(o=new t,o.x=n.pageX,o.y=n.pageY);return o}function p(t,e,n,r){e=s(e),e.html(n);var o=$compile(e.contents());if(r.controller){var i=t.$new();angular.extend(i,r);var a=$controller(r.controller,{$scope:i});r.controllerAs&&(t[r.controllerAs]=a),e.data("$ngControllerController",a),e.children().data("$ngControllerController",a),t=i}o(t)}function m(t,e,n){function r(){if(document.createEvent){var t=document.createElement("a");if(t.href=o,void 0!==t.download){var n=e||o.substring(o.lastIndexOf("/")+1,o.length);t.download=n}var r=document.createEvent("MouseEvents");return r.initEvent("click",!0,!0),t.dispatchEvent(r),!0}window.open(o.indexOf("?")>-1?o:o+"?download","_self")}n=n||"application/octet-stream";var o=null,i=new Blob([t],{type:n}),a=new window.FileReader;a.readAsDataURL(i),a.onloadend=function(){o=a.result,r()}}var g=this,v={getBoundRect:n,getClosest:r,getClosestNode:o,getDelta:i,getDocumentNode:a,getElement:s,getNode:l,getNodeOffset:c,getPageScroll:u,getParents:f,getView:h,getPointInView:d,compileController:p,downloadFile:m,ua:function(){var t=window.navigator.userAgent.toLowerCase(),e=-1!==t.indexOf("safari")&&-1===t.indexOf("chrome"),n=-1!==t.indexOf("trident")||-1!==t.indexOf("edge")||-1!==t.indexOf("msie"),r=!e&&!n&&-1!==t.indexOf("chrome"),o=-1!==t.indexOf("mobile"),i=-1!==t.indexOf("macintosh"),a={agent:t,safari:e,msie:n,chrome:r,mobile:o,mac:i};return angular.forEach(a,function(t,e){t&&angular.element(document.getElementsByTagName("body")).addClass(e)}),a}()};angular.extend(g,v);var y=["click","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","contextmenu"],w=["touchstart","touchmove","touchend","touchcancel"]}])}(),function(){"use strict";var e=angular.module("artisan");e.factory("Event",["EventsService","Dom","Point","Rect",function(t,e,n,r){function o(t,r){try{t=t||window.event;var o=t.type,i=t.originalEvent?t.originalEvent:t,a=r[0],s=e.getNodeOffset(a),l=e.getBoundRect(a),c=e.getView(),u=e.getPageScroll(),f=e.getPointInView(t);if(f){var h=new n(f.x-u.x,f.y-u.y),d=new n(h.x-l.left,h.y-l.top);this.point=f,this.absolute=h,this.relative=d}var p=e.getDelta(t);p&&(this.delta=p,this.dir=p.dir),this.event=t,this.type=o,this.originalEvent=i,this.element=r,this.node=a,this.offset=s,this.rect=l,this.view=c,this.scroll=u,this.timestamp=(new Date).getTime()}catch(t){console.log("Event.error",t)}}function i(){this.event.stopPropagation(),this.event.preventDefault()}var a={stop:i},s={};return angular.extend(o.prototype,a),angular.extend(o,s),o}]),e.factory("Events",["EventsService","Event","Dom",function(e,n,r){function o(t){function e(t){t&&(t.interval=Math.min(250,t.timestamp-p.timestamp)),p.timestamp=(new Date).getTime()}function o(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.click.apply(this,[e])}function i(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.down.apply(this,[e]),p.removeTouchEvents()}function a(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.move.apply(this,[e])}function s(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.up.apply(this,[e])}function l(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.wheel.apply(this,[e]),p.removeScrollEvents()}function c(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.wheel.apply(this,[e]),p.removeWheelEvents()}function u(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.resize.apply(this,[e])}function f(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.down.apply(this,[e]),p.removeStandardEvents()}function h(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.move.apply(this,[e])}function d(t){var e=new n(t,p.element);p.setTimestamp(e),p.listeners.up.apply(this,[e])}var p=this;this.element=r.getElement(t),this.listeners={},this.standardEvents={click:{key:"click",callback:o},down:{key:"mousedown",callback:i},move:{key:"mousemove",callback:a},up:{key:"mouseup",callback:s},resize:{key:"resize",callback:u}},this.touchEvents={down:{key:"touchstart",callback:f},move:{key:"touchmove",callback:h},up:{key:"touchend",callback:d}},this.wheelEvents={wheel:{key:"mousewheel",callback:l}},this.scrollEvents={wheel:{key:"DOMMouseScroll",callback:c}},this.timestamp=(new Date).getTime(),this.setTimestamp=e}function i(t,e){var n=this,r=this.standardEvents,o=this.touchEvents,i=this.wheelEvents,s=this.scrollEvents,l=this.element,c=angular.element(window);return angular.forEach(t,function(t,e){if(n.listeners[e]){var u={};u[e]=n.listeners[e],a(u)}n.listeners[e]=t,r[e]&&("resize"===e?c.on(r[e].key,r[e].callback):l.on(r[e].key,r[e].callback)),o[e]&&l.on(o[e].key,o[e].callback),i[e]&&l.on(i[e].key,i[e].callback),s[e]&&l.on(s[e].key,s[e].callback)}),e&&e.$on("$destroy",function(){n.remove(t)}),n}function a(t){var e=this,n=this.standardEvents,r=this.touchEvents,o=this.wheelEvents,i=this.scrollEvents,a=this.element,s=angular.element(window);return angular.forEach(t,function(t,l){n[l]&&("resize"===l?s.off(n[l].key,n[l].callback):a.off(n[l].key,n[l].callback)),r[l]&&a.off(r[l].key,r[l].callback),o[l]&&a.off(o[l].key,o[l].callback),i[l]&&a.off(i[l].key,i[l].callback),e.listeners[l]=null}),e}function s(){var t=this,e=t.standardEvents,n=(t.touchEvents,t.element);n.off("mousedown",e.down.callback),n.off("mousemove",e.move.callback),n.off("mouseup",e.up.callback)}function l(){var t=this,e=(t.standardEvents,t.touchEvents),n=t.element;n.off("touchstart",e.down.callback),n.off("touchmove",e.move.callback),n.off("touchend",e.up.callback)}function c(){var t=this;t.element.off("mousewheel",t.mouseEvents.wheel.callback)}function u(){var t=this;t.element.off("DOMMouseScroll",t.scrollEvents.wheel.callback)}function f(e,n){var r=new Point;if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type){var o=null,i=e.originalEvent?e.originalEvent:e,a=i.touches.length?i.touches:i.changedTouches;a&&a.length&&(o=a[0]),o&&(r.x=o.pageX,r.y=o.pageY)}else"click"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type&&"mousemove"!==e.type&&"mouseover"!==e.type&&"mouseout"!==e.type&&"mouseenter"!==e.type&&"mouseleave"!==e.type&&"contextmenu"!==e.type||(r.x=e.pageX,r.y=e.pageY);return n&&(r.s=Point.difference(t,n)),r.type=e.type,r}function h(t,e){return t=angular.isArray(t)?t[0]:t,Point.difference(e,{x:t.offsetLeft,y:t.offsetTop})}var d={add:i,remove:a,removeStandardEvents:s,removeTouchEvents:l,removeWheelEvents:c,removeScrollEvents:u},p={getTouch:f,getRelativeTouch:h};return angular.extend(o.prototype,d),angular.extend(o,p),o}]),e.service("EventsService",["Dom",function(t){function e(){var t=!1;if(window.addEventListener)try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){console.log("getAddEventListener.isSupprted",t)}return t}var n=this,r={hasPassiveEvents:e,addEventListener:function(){if(e()){var t={passive:!1,capture:!1},n=EventTarget.prototype.addEventListener,r=function(e){function n(n,r,o){if("object"!=typeof o){var i=!0===o;o=angular.copy(t),o.capture=i}else o=angular.extend(angular.copy(t),o);e.call(this,n,r,o)}return n}(n);return EventTarget.prototype.addEventListener=r,r}}()};angular.extend(n,r),function(){function e(e){Math.abs(e.deltaY)>Math.abs(e.deltaX)||(e.deltaX<0&&0===t.getParents(e.target).filter(function(t){return t.scrollLeft>0}).length||e.deltaX>0&&0===t.getParents(e.target).filter(function(t){return t.scrollWidth-t.scrollLeft>t.clientWidth}).length)&&e.preventDefault()}t.ua.mac&&(t.ua.chrome||t.ua.safari||t.ua.firefox)&&window.addEventListener("mousewheel",e,{passive:!1})}()}])}(),function(){"use strict";angular.module("artisan").filter("notIn",["$filter",function(t){return function(e,n,r){if(n)return t("filter")(e,function(t){for(var e=0;e<n.length;e++)if(n[e][r]===t[r])return!1;return!0})}}])}(),function(){"use strict";angular.module("artisan").factory("Point",[function(){function t(t,e){this.x=t||0,this.y=e||0}function e(e,n){return new t(e.x-n.x,e.y-n.y)}function n(t,e){return t.x*=e,t.y*=e,t}function r(){return new t(this.x,this.y)}function o(t){return this.x=t.x,this.y=t.y,this}function i(t){return e(this,t)}function a(t){return n(this,t)}function s(t,e){return this.x+=t,this.y+=e,this}function l(t,e){return this.x=t,this.y=e,this}function c(t){return this.x=t,this}function u(t){return this.y=t,this}function f(){return"{"+this.x+","+this.y+"}"}var h={difference:e,multiply:n},d={clone:r,copy:o,difference:i,mult:a,offset:s,setPos:l,setX:c,setY:u,toString:f};return angular.extend(t,h),angular.extend(t.prototype,d),t}])}(),function(){"use strict";angular.module("artisan").factory("Rect",[function(){function t(t,e,n,r){this.x=t||0,this.y=e||0,this.w=n||0,this.h=r||0}function e(t,e){return t.x*=e,t.y*=e,t.w*=e,t.h*=e,t}function n(){var t=this.x,e=this.y;return{x:t+this.w/2,y:e+this.h}}function r(){var t=this.x,e=this.y;return this.w,{x:t,y:e+this.h}}function o(){var t=this.x,e=this.y;return{x:t+this.w,y:e+this.h}}function i(){var t=this.x,e=this.y;return{x:t+this.w/2,y:e+this.h/2}}function a(){return new t(this.x,this.y,this.w,this.h)}function s(t){return this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h,this}function l(t){return this.expandRect({x:t,y:t,w:2*t,h:2*t})}function c(t){return this.x-=t.x||0,this.y-=t.y||0,this.w+=t.w||0,this.h+=t.h||0,this}function u(t){var e=this.x,n=this.y,r=this.w,o=this.h;return!(t.x>e+r||t.x+t.w<e||t.y>n+o||t.y+t.h<n)}function f(){var t=this.x,e=this.y;return this.w,{x:t,y:e+this.h/2}}function h(t){return e(this,t)}function d(t,e){return this.x+=t,this.y+=e,this}function p(t){return this.offset(-t)}function m(t){return this.offsetRect(e(t,-1))}function g(){var t=this.x,e=this.y;return{x:t+this.w,y:e+this.h/2}}function v(t){return this.h=t,this}function y(t,e){return this.x=t,this.y=e,this}function w(t,e){return this.w=t,this.h=e,this}function x(t){return this.x=t,this}function b(t){return this.y=t,this}function k(t){return this.w=t,this}function $(){var t=this.x,e=this.y,n=this.w;return this.h,{x:t+n/2,y:e}}function E(){var t=this.x,e=this.y;return this.w,this.h,{x:t,y:e}}function T(){var t=this.x,e=this.y,n=this.w;return this.h,{x:t+n,y:e}}function S(){return"{"+this.x+","+this.y+","+this.w+","+this.h+"}"}var M={mult:e},I={bottom:n,bottomLeft:r,bottomRight:o,center:i,clone:a,copy:s,expand:l,expandRect:c,intersect:u,left:f,mult:h,offset:d,reduce:p,reduceRect:m,right:g,setH:v,setPos:y,setSize:w,setX:x,setY:b,setW:k,top:$,topLeft:E,topRight:T,toString:S};return angular.extend(t,M),angular.extend(t.prototype,I),t}])}(),function(){"use strict";angular.module("artisan").factory("Vector",function(){function t(t,e){this.x=t||0,this.y=e||0}function e(t,e){return t.x*e.y-t.y*e.x}function n(e,n){return new t(e.x-n.x,e.y-n.y)}function r(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function o(t,e){return Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)}function i(e,n){return new t(n.x-e.x,n.y-e.y)}function a(e){var n=t.size(e);return e.x/=n,e.y/=n,e}function s(t,e){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y))/2}function l(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function c(t){return this.x+=t.x,this.y+=t.y,this}function u(e){return new t(this.x,this.y)}function f(t){return e(this,t)}function h(t){return n(this,t)}function d(t){return r(this,t)}function p(t){return this.x*=t,this.y*=t,this}function m(t){return o(this,t)}function g(){return a(this)}function v(){return(Math.abs(this.x)+Math.abs(this.y))/2}function y(){return l(this)}function w(t,e){return e=e||.125,this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}function x(){return"{"+this.x+","+this.y+"}"}var b={cross:e,difference:n,distance:r,incidence:o,make:i,normalize:a,power:s,size:l},k={add:c,copy:u,cross:f,difference:h,distance:d,friction:p,incidence:m,normalize:g,power:v,size:y,towards:w,toString:x};return angular.extend(t,b),angular.extend(t.prototype,k),t})}(),function(){"use strict";angular.module("artisan").factory("Hash",[function(){function t(t,n){t=t||"id",n=n?e(n):{},Object.defineProperties(this,{key:{value:t,enumerable:!1,writable:!1},pool:{value:n,enumerable:!1,writable:!1},length:{value:0,enumerable:!1,writable:!0}})}function e(t){return g[t]=g[t]||{}}function n(t){return void 0!==this.pool[t]}function r(t){return this.pool[t]}function o(t){var e=this,n=this.key;return t?e.getId(t[n]):null}function i(t){var e=this;return this.pool[t[this.key]]=t,e.push(t),t}function a(t){var e=this,n=e.get(t);if(n)for(var r,o=0,i=Object.keys(t);o<i.length;o++)r=i[o],n[r]=t[r];else n=e.set(t);return n}function s(t){var e=this,n=this.pool,r=this.key,o=e.get(t);if(o){var i=e.indexOf(o);-1!==i&&e.splice(i,1),delete n[o[r]]}return e}function l(t){var e=this;if(!t)return e;for(var n=0;n<t.length;)e.add(t[n]),n++;return e}function c(t){var e=this;if(!t)return e;for(var n=0;n<t.length;)e.remove(t[n]),n++;return e}function u(){var t,e=this,n=e.key,r=e.pool,o=0;for(e.length;e.length;)t=e.shift(),delete r[t[n]],o++;return e}function f(t){var e=this;if(t)for(var n=0;n<e.length;)t(e[n],n),n++;return e}function h(t,e){var n=this;return t=t||this.key,n.sort(function(n,r){var o=e?r:n,i=e?n:r;return o[t]-i[t]}),n}function d(t){return this.forward(t,!0)}function p(t){if(t.key!==this.key||t.length!==this.length)return!0;for(var e=!1,n=0,r=this.length,o=this.key;e&&n<r;)e=this[n][o]!==t[n][o],n++}function m(){var t=this,e=this.pool,n=this.key;Object.keys(e).forEach(function(t){delete e[t]}),angular.forEach(t,function(t){e[t[n]]=t})}var g={},v={get:e},y={has:n,getId:r,get:o,set:i,add:a,remove:s,each:f,addMany:l,removeMany:c,removeAll:u,forward:h,backward:d,differs:p,updatePool:m};return t.prototype=new Array,angular.extend(t,v),angular.extend(t.prototype,y),t}])}(),function(){"use strict";angular.module("artisan").factory("$promise",["$q",function(t){function e(e){if("function"!=typeof e)throw"promise resolve callback missing";var n=t.defer();return e(n),n.promise}function n(e){return t.all(e)}var r={all:n},o={};return angular.extend(e,r),angular.extend(e.prototype,o),e}])}(),function(){"use strict";angular.module("artisan").factory("State",["$timeout",function(t){function e(){this.errors=[],this.isReady=!1,this.idle()}function n(){var t=this;return!t.isBusy&&(t.isBusy=!0,t.isError=!1,t.isErroring=!1,t.isSuccess=!1,t.isSuccessing=!1,t.errors=[],!0)}function r(t){var e=this,n=null;return n={ready:e.isReady,busy:e.isBusy,successing:e.isSuccessing,success:e.isSuccess,errorring:e.isErroring,error:e.isError},t&&angular.forEach(t,function(t,e){n[t]=n[e]}),n}function o(){var t=this;return!t.isBusy&&!t.isErroring&&!t.isSuccessing}function i(e){console.log("State.error",e);var n=this;n.isBusy=!1,n.isError=!0,n.isErroring=!0,n.isSuccess=!1,n.isSuccessing=!1,n.errors.push(e),t(function(){
n.isErroring=!1},h)}function a(){var t=this;return t.isError?t.errors[t.errors.length-1]:null}function s(){var t=this;t.isBusy=!1,t.isError=!1,t.isErroring=!1,t.isSuccess=!1,t.isSuccessing=!1,t.button=null,t.errors=[]}function l(t){var e=this,n={ready:"submit",busy:"sending",error:"error",success:"success"};t&&angular.extend(n,t);var r=n.ready;return e.isBusy?r=n.busy:e.isSuccess?r=n.success:e.isError&&(r=n.error),r}function c(){var t=this;t.idle(),t.isReady=!0}function u(){var t=this;return{busy:t.isBusy,ready:t.isReady,successing:t.isSuccessing,success:t.isSuccess,errorring:t.isErroring,error:t.isError}}function f(){var e=this;e.isBusy=!1,e.isError=!1,e.isErroring=!1,e.isSuccess=!0,e.isSuccessing=!0,e.errors=[],t(function(){e.isSuccessing=!1},h)}var h=2e3,d={},p={busy:n,classes:r,enabled:o,error:i,errorMessage:a,idle:s,labels:l,ready:c,submitClass:u,success:f};return angular.extend(e,d),angular.extend(e.prototype,p),e}])}(),function(){"use strict";var t=function(){var t="transform",e=document.createElement("DIV");return void 0!==e.style[t]?["webkit","moz","o","ms"].every(function(n){var r="-"+n+"-transform";return void 0===e.style[r]||(t=r,!1)}):t=void 0!==e.style.webkitTransform?"-webkit-transform":void 0,t}();angular.module("artisan").factory("Style",[function(){function e(){this.props={scale:1,hoverScale:1,currentScale:1}}function n(t){var e=[];for(var n in this)"props"!==n&&e.push(n+":"+this[n]);t.style.cssText=e.join(";")+";"}function r(e){this[t]=e}function o(e,n){this[t+"-origin-x"]=Math.round(1e3*e)/1e3+"%",this[t+"-origin-y"]=Math.round(1e3*n)/1e3+"%"}var i={},a={set:n,transform:r,transformOrigin:o};return angular.extend(e,i),angular.extend(e.prototype,a),e}])}(),function(){"use strict";angular.module("artisan").service("Utils",["$compile","$controller","Vector",function(t,e,n){function r(n,r,o,i){r.html(o);var a=t(r.contents());if(i.controller){var s=n.$new();angular.extend(s,i);var l=e(i.controller,{$scope:s});i.controllerAs&&(n[i.controllerAs]=l),r.data("$ngControllerController",l),r.children().data("$ngControllerController",l),n=s}a(n)}function o(t,e,n){t=t||"",e=e||"";var r=t.split(",");if(r.length>1){var o=r.shift();return angular.forEach(r,function(t,r){o=n?o.split("{"+r+"}").join("' + "+e+t+" + '"):o.split("{"+r+"}").join(e+t)}),n?"'"+o+"'":o}return e+t}function i(t,e,n){n=n||"id";var r=-1;if(t)for(var o=0,i=t.length;o<i;){if(t[o]&&t[o][n]===e[n]){r=o;break}o++}return r}function a(t,e){return t[e]}function s(t,e,n){return"string"==typeof e?s(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]+=n:0===e.length?t:s(t[e[0]],e.slice(1),n)}function l(t,e,n){return"string"==typeof e?l(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]=n:0===e.length?t:l(t[e[0]],e.slice(1),n)}function c(t,e){var n=-1;if(t)for(var r=0,o=t.length;r<o;){if(t[r]===e){n=r;break}r++}return-1!==n?(t.splice(n,1),e):null}function u(t){return function(e,n){return e[t]<n[t]?1:e[t]>n[t]?-1:0}}function f(t,e,n){var r,o,i,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:g(),a=null,i=t.apply(r,o),a||(r=o=null)};return function(){var c=g();s||!1!==n.leading||(s=c);var u=e-(c-s);return r=this,o=arguments,u<=0||u>e?(a&&(clearTimeout(a),a=null),s=c,i=t.apply(r,o),a||(r=o=null)):a||!1===n.trailing||(a=setTimeout(l,u)),i}}function h(t){}function d(t,e){var n=null;return t&&angular.forEach(t,function(t){var r=!0;angular.forEach(e,function(e,n){r=r&&t[n]===e}),r&&(n=t)}),n}var p=this,m={compileController:r,format:o,indexOf:i,reducer:a,reducerAdder:s,reducerSetter:l,removeValue:c,reverseSortOn:u,throttle:f,toMd5:h,where:d};angular.extend(p,m);var g=Date.now||function(){return(new Date).getTime()}}]),function(){Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),r=n.length>>>0,o=0;if(2==arguments.length)e=arguments[1];else{for(;o<r&&!(o in n);)o++;if(o>=r)throw new TypeError("Reduce of empty array with no initial value");e=n[o++]}for(;o<r;)o in n&&(e=t(e,n[o],o,n)),o++;return e}})}()}(),function(){"use strict";angular.module("artisan").factory("Doc",["Api","$promise",function(t,e){function n(t){t&&angular.extend(this,t)}var r={},o={};return angular.extend(n,r),angular.extend(n.prototype,o),n}])}(),function(){"use strict";angular.module("artisan").factory("View",["Api","$promise","$location","$routeParams","environment","Doc",function(t,e,n,r,o,i){function a(t){var e=n.path(),i=r,a={environment:o,route:{url:e,params:i},doc:t};angular.extend(this,a)}function s(){return e(function(e){var r=n.path();console.log("View.current",r),t.docs.url(r).then(function(t){var n=new i(t),r=new a(n);e.resolve(r)},function(t){e.reject(t)})})}var l={current:s},c={};return angular.extend(a,l),angular.extend(a.prototype,c),a}])}(),function(){"use strict";angular.module("artisan").service("Http",["$http","$promise","$timeout","environment",function(t,e,n,r){function o(t){return r.paths.api+t}function i(n,r,i){return e(function(e){t[n](o(r),i).then(function(t){e.resolve(t.data)},function(t,n){var r=t&&t.data?t.data:{};r.status=t.status,e.reject(r)})})}function a(t){return i("get",t)}function s(t,e){return i("post",t,e)}function l(t,e){return i("put",t,e)}function c(t,e){return i("patch",t,e)}function u(t){return i("delete",t)}function f(t){var e=$q.defer();return n(function(){e.resolve({data:t})},1e3),e.promise}var h=this,d={get:a,post:s,put:l,patch:c,delete:u,fake:f};angular.extend(h,d)}])}(),function(){"use strict";angular.module("artisan").service("Router",["$rootScope","$location","$timeout",function(t,e,n){function r(){w=g?g.controller:null,x=v?v.controller:null,b=y?y.controller:null}function o(t,e,n){g=null,v=n?n.$$route:null,y=e?e.$$route:null,r(),console.log("Router.RouterOnChangeStart","$previous",g,"$current",v,"$next",y)}function i(t,e,n){g=n?n.$$route:null,v=e?e.$$route:null,y=null,r(),console.log("Router.RouterOnChangeSuccess","$previous",g,"$current",v,"$next",y)}function a(t,e,n,o){g=null,v=n.$$route||null,y=null,r(),console.log("Router.RouterOnChangeError","$previous",g,"$current",v,"$next",y)}function s(t,e){g=e?e.$$route:null,v=e?e.$$route:null,y=null,r(),console.log("Router.RouterOnUpdate","$previous",g,"$current",v,"$next",y)}function l(t){return x===t}function c(t){e.$$lastRequestedPath=e.path(),e.path(t)}function u(t){t=e.$$lastRequestedPath||t,e.$$lastRequestedPath=null,e.path(t)}function f(t,e){e?n(function(){c(t)},e):c(t)}function h(t,e){e?n(function(){u(t)},e):u(t)}function d(t,r){r?n(function(){e.path(t)},r):n(function(){e.path(t)})}var p=this,m={isController:l,redirect:f,path:h,apply:d};angular.extend(p,m),t.$on("$routeChangeStart",o),t.$on("$routeChangeSuccess",i),t.$on("$routeChangeError",a),t.$on("$routeUpdate",s);var g,v,y,w,x,b}])}(),function(){"use strict";angular.module("artisan").service("Silent",["$rootScope","$location",function(t,e){function n(){var e=t.$$listeners.$locationChangeSuccess;angular.forEach(e,function(t,n){function r(){e[n]=t}t!==listener&&(e[n]=r)})}function r(t){l===e.path()&&n(),l=null}function o(t,n){var r=e.url(t);n&&r.replace(),l=e.path()}function i(t){return e.path(t)}var a=this,s={silent:o,path:i};angular.extend(a,s),t.$$listeners.$locationChangeSuccess.unshift(r);var l}])}(),function(){"use strict";var t=angular.module("artisan");t.service("Cookie",["$promise",function(t){function e(t){a(t,"",-1)}function n(t){return-1!==document.cookie.indexOf(";"+t+"=")||0===document.cookie.indexOf(t+"=")}function r(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e)){var i=o.substring(e.length,o.length),a=null;try{a=JSON.parse(decodeURIComponent(atob(i)))}catch(t){console.log("Cookie.get.error parsing",key,t)}return a}}return null}function o(e){return t(function(t){function n(){if(a>s)t.reject("timeout");else{var l=r(e);l?t.resolve(l):(a+=i,o=setTimeout(n,i))}}var o,i=1e3,a=0,s=Cookie.TIMEOUT;n()})}function i(t,e,n){try{var r=[],o=JSON.stringify(e,function(t,e){if("pool"!==t){if("object"==typeof e&&null!==e){if(-1!==r.indexOf(e))return;r.push(e)}return e}});r=null,a(t,btoa(encodeURIComponent(o)),n)}catch(n){console.log("CookieSet.error serializing",t,e,n)}}function a(t,e,n){var r;if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toGMTString()}else r="";document.cookie=t+"="+e+r+"; path=/"}var s={TIMEOUT:3e5,delete:e,exist:n,get:r,on:o,set:i};angular.extend(this,s)}]),t.service("LocalStorage",["$promise","Cookie",function(t,e){function n(t){return void 0!==window.localStorage[t]}function r(t){var e=null;if(void 0!==window.localStorage[t])try{e=JSON.parse(window.localStorage[t])}catch(e){console.log("LocalStorage.get.error parsing",t,e)}return e}function o(t,e){try{var n=[],r=JSON.stringify(e,function(t,e){if("pool"!==t){if("object"==typeof e&&null!==e){if(-1!==n.indexOf(e))return;n.push(e)}return e}});n=null,window.localStorage.setItem(t,r)}catch(n){console.log("LocalStorage.set.error serializing",t,e,n)}}function i(t){window.localStorage.removeItem(t)}function a(n){return t(function(t){function r(e){if(o&&clearTimeout(o),e.originalEvent.key==n)try{var r=JSON.parse(e.originalEvent.newValue);t.resolve(r)}catch(e){console.log("LocalStorage.on.error parsing",n,e),t.reject("error parsing "+n)}}var o,i=e.TIMEOUT;angular.element(window).on("storage",r),o=setTimeout(function(){t.reject("timeout")},i)})}var s={TIMEOUT:3e5,delete:i,exist:n,get:r,on:a,set:o},l=function(){var t=!1;try{t="localStorage"in window&&null!==window.localStorage,t?(window.localStorage.setItem("test","1"),window.localStorage.removeItem("test")):t=!1}catch(e){t=!1}return t}();l?angular.extend(this,s):angular.extend(this,e),this.supported=l}]),t.factory("SessionStorage",["$promise","Cookie",function(t,e){var n={TIMEOUT:3e5,delete:LocalDelete,exist:LocalExists,get:LocalGet,on:LocalOn,set:LocalSet},r=function(){var t=!1;try{t="sessionStorage"in window&&void 0!==window.sessionStorage,t?(window.sessionStorage.setItem("test","1"),window.sessionStorage.removeItem("test")):t=!1}catch(e){t=!1}return t}();r?angular.extend(this,n):angular.extend(this,e),this.supported=r}])}(),function(){"use strict";angular.module("artisan").service("Trust",["$sce",function(t){function e(t){var e=c.indexOf(t);return-1!==e?u[e]:null}function n(t,e){c.push(t),c.push(e)}function r(t,r){var o=e(t);return o||(o=r(),n(t,o)),o}function o(e){return r(e,function(){return t.trustAsHtml(e)})}function i(e){return r(e,function(){return t.trustAsResourceUrl(e)})}function a(t){return r(t,function(){return"url('"+t+"')"})}var s=this,l={html:o,resource:i,url:a};angular.extend(s,l);var c=[],u=[]}])}(),function(){"use strict";var t=angular.module("artisan");t.factory("Color",[function(){function t(t,e,n,r){if(arguments.length>1)this.r=t||0===t?t:0,this.g=e||0===e?e:0,this.b=n||0===n?n:0,this.a=r||0===r?r:255;else{var o=t||"0xffffff";o=parseInt(o),t.length>8?(this.r=o>>24&255,this.g=o>>16&255,this.b=o>>8&255,this.a=o>>0&255):(this.r=o>>16&255,this.g=o>>8&255,this.b=o>>0&255,this.a=255)}}return t.componentToHex=function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},t.luma=function(t){return t.dot({r:95,g:100,b:60})},t.contrast=function(e){return new t(t.luma(e)>.6?"0x000000":"0xffffff")},t.darker=function(e,n,r){return r=r||0,new t(Math.max(Math.floor(e.r*r),Math.floor(e.r-255*n)),Math.max(Math.floor(e.g*r),Math.floor(e.g-255*n)),Math.max(Math.floor(e.b*r),Math.floor(e.b-255*n)),e.a)},t.lighter=function(e,n,r){return r=r||1,new t(Math.min(e.r+Math.floor((255-e.r)*r),Math.floor(e.r+255*n)),Math.min(e.g+Math.floor((255-e.g)*r),Math.floor(e.g+255*n)),Math.min(e.b+Math.floor((255-e.b)*r),Math.floor(e.b+255*n)),e.a)},t.prototype={toUint:function(){return(this.r<<24)+(this.g<<16)+(this.b<<8)+this.a},toHex:function(){return"#"+t.componentToHex(this.r)+t.componentToHex(this.g)+t.componentToHex(this.b)+t.componentToHex(this.a)},toRgba:function(){return"rgba("+this.r+","+this.g+","+this.b+","+(this.a/255).toFixed(3)+")"},dot:function(t){return this.r/255*(t.r/255)+this.g/255*(t.g/255)+this.b/255*(t.b/255)},alpha:function(t,e,n){return e=e||0,n=n||1,this.a=Math.floor(255*(e+t*(n-e))),this},makeSet:function(){return this.foreground=t.contrast(this),this.border=t.darker(this,.3),this.light=t.lighter(this,.3),this}},t}]),t.factory("Shape",[function(){function t(){}return t.shapeCircle=function(t,e,n,r,o,i){o=o||0,i=i||2*Math.PI,t.ctx.arc(e,n,r,o,i,!1)},t.shapeStar=function(t,e,n,r,o,a){var s,l,c=Math.PI/2*3,u=Math.PI/a,f=t.ctx;for(f.moveTo(e,n-r),i=0;i<a;i++)s=e+Math.cos(c)*r,l=n+Math.sin(c)*r,f.lineTo(s,l),c+=u,s=e+Math.cos(c)*o,l=n+Math.sin(c)*o,f.lineTo(s,l),c+=u;f.lineTo(e,n-r)},t.shapeRoundRect=function(t,e,n){var r=t.ctx,o=e.x,i=e.y,a=e.w,s=e.h;if(void 0===typeof n&&(n=4),"number"==typeof n)n={tl:n,tr:n,br:n,bl:n};else{var l={tl:0,tr:0,br:0,bl:0};for(var c in l)n[c]=n[c]||l[c]}r.moveTo(o+n.tl,i),r.lineTo(o+a-n.tr,i),r.quadraticCurveTo(o+a,i,o+a,i+n.tr),r.lineTo(o+a,i+s-n.br),r.quadraticCurveTo(o+a,i+s,o+a-n.br,i+s),r.lineTo(o+n.bl,i+s),r.quadraticCurveTo(o,i+s,o,i+s-n.bl),r.lineTo(o,i+n.tl),r.quadraticCurveTo(o,i,o+n.tl,i)},t.circle=function(){var e=Array.prototype.slice.call(arguments),n=e[0].ctx;n.beginPath(),t.shapeCircle.apply(this,e),n.closePath()},t.star=function(){var e=Array.prototype.slice.call(arguments),n=e[0].ctx;n.beginPath(),t.shapeStar.apply(this,e),n.closePath()},t.roundRect=function(){var e=Array.prototype.slice.call(arguments),n=e[0].ctx;n.beginPath(),t.shapeRoundRect.apply(this,e),n.closePath()},t}]),t.constant("PainterColors",{black:"0x14191e",white:"0xffffff",blue:"0x0023FF",red:"0xF21500",lightBlue:"0x79ccf2",lightYellow:"0xfff79a",greyLighter:"0xf8f8f8",greyLight:"0xeeeeee",greyMedium:"0xcccccc",grey:"0x90939b",map:"0x24292e"}),t.factory("Palette",["$q","Painter","Rect",function(t,e,n){function r(){this.painter=(new e).setSize(0,0),this.buffer=(new e).setSize(0,0),this.size={w:0,h:0},this.pool={},this.rows={}}return r.prototype={getRect:function(t,e){var r=this.painter,o=this.size,i=this.rows,a=new n(0,0,t,e),s=i[e]||{x:0,y:o.h};if(o.w=Math.max(o.w,s.x+t),o.h=Math.max(o.h,s.y+e),r.canvas.width||r.canvas.height){if(o.w>r.canvas.width||o.h>r.canvas.height){var l=r.canvas;r.setCanvas(document.createElement("canvas")),r.setSize(o.w,o.h),r.ctx.drawImage(l,0,0)}}else r.setSize(o.w,o.h);return a.x=s.x,a.y=s.y,s.x+=t,i[e]=s,a},add:function(e,n){var r=this;if(angular.isString(n)){var o=t.defer(),i=new Image;return i.onload=function(){r.addShape(e,i.width,i.height,function(t,e){t.ctx.drawImage(i,0,0)}),o.resolve(i)},i.onerror=function(){o.reject("connot load "+n)},i.src=n,o.promise}var a=Array.prototype.slice.call(arguments);return r.addShape.apply(r,a)},addShape:function(t,e,n,r){var o=this.painter,i=this.getRect(e,n);o.ctx.save(),o.ctx.rect(i.x,i.y,i.w,i.h),o.ctx.clip(),o.ctx.translate(i.x,i.y),r.call(o,o,i.clone().setPos(0,0)),o.ctx.restore(),this.pool[t]=i},draw:function(t,e,n,r,o){var i=this.pool[e];i&&t.drawRect(this.painter.canvas,i,{x:n,y:r,w:i.w,h:i.h},o)},tint:function(t,e,n,r,o,i){var a=this.pool[e];if(a){var s=this.painter,l=this.buffer.setSize(a.w,a.h);l.save(),l.setFill(o),l.fillRect(),l.ctx.globalCompositeOperation="destination-atop",l.ctx.drawImage(s.canvas,a.x,a.y,a.w,a.h,0,0,a.w,a.h),l.restore(),console.log(n,r,l.canvas,t.canvas),t.draw(l.canvas,{x:n,y:r},i)}},pattern:function(t,e,n,r,o,i,a){function s(e){var a=t.ctx;a.save(),a.translate(n,r),a.fillStyle=e,a.fillRect(-n,-r,o,i),a.translate(-n,-r),a.restore()}var l=this.pool[e];if(l){var c,u=l.img;if(u&&l.color==a)c=t.ctx.createPattern(u,"repeat"),s(c);else{var f=this.buffer.setSize(l.w,l.h);a?(l.color=a,f.save(),f.setFill(a),f.fillRect(),f.ctx.globalCompositeOperation="destination-atop",f.ctx.drawImage(this.painter.canvas,l.x,l.y,l.w,l.h,0,0,l.w,l.h),f.restore()):f.ctx.drawImage(this.painter.canvas,l.x,l.y,l.w,l.h,0,0,l.w,l.h),u=new Image,u.onload=function(){l.img=u,c=t.ctx.createPattern(u,"repeat"),s(c)},u.src=f.toDataURL()}}}},r}]),t.factory("Painter",["Shape","Rect","Color","PainterColors",function(t,e,n,r){function o(t){t=t||document.createElement("canvas"),this.rect=new e,this.drawingRect=new e,this.setColors(),this.setCanvas(t)}o.colors={},angular.forEach(r,function(t,e){o.colors[e]=new n(t).makeSet()});o.colors;return o.prototype={colors:o.colors,setColors:function(){var t=this.colors;angular.forEach(r,function(e,r){t[r]=new n(e).makeSet()})},setCanvas:function(t){this.canvas=t,this.setSize(t.offsetWidth,t.offsetHeight);var e=t.getContext("2d");return e.lineCap="square",this.ctx=e,this},setSize:function(t,e){return this.canvas.width=t,this.canvas.height=e,this.rect.w=t,this.rect.h=e,this},copy:function(t){return this.ctx.drawImage(t,0,0),this},clear:function(){return this.resize(),this},resize:function(){return this.setSize(this.canvas.offsetWidth,this.canvas.offsetHeight),this},setText:function(t,e,n,r){t=t||"11px monospace",e=e||"center",n=n||"middle",r=r||this.colors.black;var o=this.ctx;return o.font=t,o.textAlign=e,o.textBaseline=n,o.fillStyle=r.toRgba(),this},setFill:function(t){return t=t||this.colors.black,this.ctx.fillStyle=t.toRgba(),this},setStroke:function(t,e){t=t||this.colors.black;var n=this.ctx;return e=e||1,n.strokeStyle=t.toRgba(),n.lineWidth=e,this},fillText:function(t,e,n,r,o){return n&&(r=r||"",o=o||Math.floor(n/8),t.length>o&&(t=t.substr(0,Math.min(t.length,o)).trim()+r)),this.ctx.fillText(t,e.x,e.y),this},fillRect:function(t){t=t||this.rect;var e=this.ctx,n=t.x,r=t.y,o=t.w,i=t.h;return e.fillRect(n,r,o,i),this},strokeRect:function(t){t=t||this.rect;var e=this.ctx,n=t.x,r=t.y,o=t.w,i=t.h;return e.strokeRect(n,r,o,i),this},fill:function(){return this.ctx.fill(),this},stroke:function(){return this.ctx.stroke(),this},begin:function(){return this.ctx.beginPath(),this},close:function(){return this.ctx.closePath(),this},save:function(){return this.ctx.save(),this},restore:function(){return this.ctx.restore(),this},rotate:function(t){this.ctx.rotate(t*Math.PI/180)},translate:function(t){this.ctx.translate(t.x,t.y)},toDataURL:function(){return this.canvas.toDataURL()},draw:function(t,e,n){if(t){e.w=e.w||t.width,e.h=e.h||t.height;var r=this.ctx,o=this.drawingRect,i=o.x=e.x-e.w/2,a=o.y=e.y-e.h/2;o.w=e.w,o.h=e.h;r.save(),r.translate(i,a),n&&n.call(this),r.drawImage(t,0,0),r.restore()}return this},drawRect:function(t,e,n,r){if(t){e.w=e.w||t.width,e.h=e.h||t.height,n.w=n.w||t.width,n.h=n.h||t.height;var o=this.ctx,i=this.drawingRect,a=i.x=n.x-e.w/2,s=i.y=n.y-e.h/2;i.w=n.w,i.h=n.h;o.save(),o.translate(a,s),r&&r.call(this),o.drawImage(t,e.x,e.y,e.w,e.h,0,0,n.w,n.h),o.restore()}return this},flip:function(t){t=t||{x:1,y:-1};var e=this.ctx,n=this.drawingRect;e.translate(-1===t.x?n.w:0,-1===t.y?n.h:0),e.scale(t.x,t.y)}},o}])}(),function(){"use strict";var t=angular.module("artisan");t.directive("controlMessages",[function(){return{restrict:"E",templateUrl:"artisan/forms/messages",transclude:{message:"?messageItems"},link:function(t,e,n,r){}}}]),t.directive("control",["$parse",function(t){function e(t,e,n){t=t||"",e=e||"";var r=t.split(",");if(r.length>1){var o=r.shift();return angular.forEach(r,function(t,r){o=n?o.split("{"+r+"}").join("' + "+e+t+" + '"):o.split("{"+r+"}").join(e+t)}),n?"'"+o+"'":o}return e+t}var n=0;return{restrict:"A",templateUrl:function(t,e){var n="artisan/forms/text";switch(e.control){case"select":n="artisan/forms/select"}return n},scope:{ngModel:"=",required:"=",form:"@",title:"@",placeholder:"@",source:"=?",key:"@?",label:"@?"},require:"ngModel",transclude:!0,link:{pre:function(r,o,i,a,s){var l=r.label=r.label?r.label:"name",c=r.key=r.key?r.key:"id";if("select"===i.control){var u=i.filter?"| "+i.filter:"",f=e(l,"item.",!0);r.getOptions=function(){return i.number?"item."+c+" as "+f+" disable when item.disabled for item in source "+u:f+" disable when item.disabled for item in source "+u+" track by item."+c}}var h=(r.type=i.control,r.form=r.form||"form",r.title=r.title||"untitled");r.placeholder=r.placeholder||h,r.field=h.replace(/[^0-9a-zA-Z]/g,"").split(" ").join("")+ ++n;r.format=i.format||null,r.precision=i.precision||null,r.validate=i.validate||i.control,r.minLength=i.minLength||0,r.maxLength=i.maxLength||Number.POSITIVE_INFINITY,r.min=i.min||null,r.max=i.max||null,r.options=t(i.options)(r)||{},r.focus=!1,r.visible=!1,r.onChange=function(e){t(i.onChange)(r.$parent)},r.onFilter=function(e){t(i.onFilter)(r.$parent)},r.getType=function(){var t="text";switch(i.control){case"password":t=r.visible?"text":"password";break;default:t=i.control}return t},r.getClasses=function(){var e=t(r.form)(r.$parent),n=t(r.form+"."+r.field)(r.$parent);return{"control-focus":r.focus,"control-success":n.$valid,"control-error":n.$invalid&&(e.$submitted||n.$touched),"control-empty":!n.$viewValue}},r.getMessages=function(){var e=t(r.form)(r.$parent),n=t(r.form+"."+r.field)(r.$parent);return(e.$submitted||n.$touched)&&n.$error},r.toggleVisibility=function(){r.visible=!r.visible}}}}}]),t.directive("_control",["$http","$templateCache","$compile","$parse",function(t,e,n,r){function o(t,e,n){t=t||"",e=e||"";var r=t.split(",");if(r.length>1){var o=r.shift();return angular.forEach(r,function(t,r){o=n?o.split("{"+r+"}").join("' + "+e+t+" + '"):o.split("{"+r+"}").join(e+t)}),n?"'"+o+"'":o}return e+t}var i=0;return{restrict:"A",templateUrl:function(t,e){var n="artisan/forms/text";switch(e.control){case"select":n="artisan/forms/select"}return n},scope:{ngModel:"=",required:"=",form:"@",title:"@",placeholder:"@"},require:"ngModel",compile:function(t,e){return{pre:function(t,e,n){if("select"===n.control){var a=n.label?n.label:"name",s=n.key?n.key:"id",l=n.min?" | filter:gte('"+s+"', "+n.min+")":"",c=o(a,"item.",!0);t.options=n.number?"item."+s+" as "+c+" disable when item.disabled for item in "+n.source+l:c+" disable when item.disabled for item in "+n.source+l+" track by item."+s,console.log("control.compile.pre",t.options)}var u=(t.type=n.control,t.form=t.form||"form",t.title=t.title||"untitled");t.placeholder=t.placeholder||u,t.field=u.replace(/[^0-9a-zA-Z]/g,"").split(" ").join("")+ ++i;t.validate=n.validate||n.control,t.format=n.format||null,t.precision=n.precision||null,t.validate=n.validate||n.control,t.minLength=n.min||0,t.maxLength=n.max||Number.POSITIVE_INFINITY,t.options=r(n.options)(t)||{},t.focus=!1,t.visible=!1,t.getType=function(){var e="text";switch(n.control){case"password":e=t.visible?"text":"password";break;default:e=n.control}return e},t.getClasses=function(){var e=r(t.form)(t.$parent),n=r(t.form+"."+t.field)(t.$parent);return{"control-focus":t.focus,"control-success":n.$valid,"control-error":n.$invalid&&(e.$submitted||n.$touched),"control-empty":!n.$viewValue}},t.getMessages=function(){var e=r(t.form)(t.$parent),n=r(t.form+"."+t.field)(t.$parent);return(e.$submitted||n.$touched)&&n.$error}}}}}}]),t.directive("numberPicker",["$parse","$timeout",function(t,e){return{restrict:"A",template:'<div class="input-group">   <span class="input-group-btn"><button class="btn btn-outline-primary" type="button">-</button></span>   <div ng-transclude></div>   <span class="input-group-btn"><button class="btn btn-outline-primary" type="button">+</button></span></div>',replace:!0,transclude:!0,link:function(n,r,o,i){function a(r){var i=t(o.min)(n),a=t(o.numberPicker),s=a.assign;e(function(){s(n,Math.max(i,a(n)-1))})}function s(r){var i=t(o.max)(n),a=t(o.numberPicker),s=a.assign;e(function(){s(n,Math.min(i,a(n)+1))})}function l(){angular.element(u).off("touchstart mousedown",a),angular.element(f).off("touchstart mousedown",s)}var c=r[0],u=c.querySelectorAll(".input-group-btn > .btn")[0],f=c.querySelectorAll(".input-group-btn > .btn")[1];n.$on("$destroy",function(){l()}),function(){angular.element(u).on("touchstart mousedown",a),angular.element(f).on("touchstart mousedown",s)}()}}}])}(),function(){"use strict";angular.module("artisan").directive("validate",["$filter",function(t){return{require:"ngModel",link:function(e,n,r,o){function i(){h=!0,u&&(n[0].value=o.$modelValue||null,o.$modelValue||o.$setViewValue(null))}function a(){if(u&&!o.$invalid)switch(c){case"date":case"datetime":case"datetime-local":n[0].value=o.$modelValue?t("date")(o.$modelValue,u):" ";break;default:n[0].value=o.$modelValue?t("number")(o.$modelValue,f)+" "+u:" "}}function s(){h=!1,a()}function l(){n.off("focus",i),n.off("blur",s)}var c=r.validate,u=r.format||"",f=r.precision||2,h=!1;switch(c){case"date":case"datetime":case"datetime-local":o.$formatters.push(function(e){return e?t("date")(e,u):null});break;case"number":o.$parsers.unshift(function(t){var e=!1;return void 0!==t&&""!==t?(e=-1!==String(t).indexOf(Number(t).toString()),t=Number(t),o.$setValidity("number",e),e&&(o.$setValidity("positive",t>=.01),void 0!==r.min&&o.$setValidity("range",t>=Number(r.min)),void 0!==r.max&&o.$setValidity("range",t<=Number(r.max)))):(e=!0,t=Number(t),o.$setValidity("number",!0),o.$setValidity("positive",!0),void 0!==r.min&&o.$setValidity("range",!0),void 0!==r.max&&o.$setValidity("range",!0)),t}),o.$formatters.push(function(e){return e?t("number")(e,f)+" "+u:null});break;case"anynumber":o.$parsers.unshift(function(t){var e=!1;return void 0!==t&&""!==t?(e=-1!==String(t).indexOf(Number(t).toString()),t=Number(t),o.$setValidity("number",e),e&&(void 0!==r.min&&o.$setValidity("range",t>=Number(r.min)),void 0!==r.max&&o.$setValidity("range",t<=Number(r.max)))):(e=!0,t=Number(t),o.$setValidity("number",!0),void 0!==r.min&&o.$setValidity("range",!0),void 0!==r.max&&o.$setValidity("range",!0)),t}),o.$formatters.push(function(e){return e||0===e?t("number")(e,f)+" "+u:null})}e.$on("$destroy",function(){l()}),function(){n.on("focus",i),n.on("blur",s)}()}}}])}(),function(){"use strict";angular.module("artisan").directive("modalView",["$parse","$templateRequest","$compile","$controller","Dom",function(t,e,n,r,o){function i(t,e,o,i){e.html(o);var a=n(e.contents());if(i.controller){var s=t.$new();angular.extend(s,i);var l=r(i.controller,{$scope:s});i.controllerAs&&(t[i.controllerAs]=l),e.data("$ngControllerController",l),e.children().data("$ngControllerController",l),t=s}a(t)}return{restrict:"A",priority:-400,link:function(n,r,o,a){var s=t(o.modalView);s=s(n),s.templateUrl=s.templateUrl||"artisan/modals/modal",e(s.templateUrl).then(function(t){i(n,r,t,s)})}}}])}(),function(){"use strict";angular.module("artisan").provider("$modal",[function(){function t(t,e){return n[t]=e,this}var e=[],n={};this.modals=e,this.routes=n,this.when=t,this.$get=["$q","$timeout",function(t,r){function o(t){var n=-1;angular.forEach(e,function(e,r){e===t&&(n=r)}),-1!==n&&r(function(){t.active=!1,e.splice(n,1),e.length&&(e[e.length-1].active=!0)})}function i(t){var n=-1;angular.forEach(e,function(e,r){e===t&&(n=r)}),-1!==n&&(t.active=!1,r(function(){for(;e.length;)e.splice(e.length-1,1)},500))}function a(a,s){var l=t.defer();s=s||null;var c={title:"Untitled",controller:null,templateUrl:null,params:s},u=n[a];return u&&angular.extend(c,u),c.deferred=l,c.back=function(t){o(this),c.deferred.resolve(t,c)},c.resolve=function(t){i(this),c.deferred.resolve(t,c)},c.reject=function(){i(this),c.deferred.reject(c)},e.push(c),angular.forEach(e,function(t,e){t.active=!1}),e.length?c.active=!0:r(function(){c.active=!0},500),l.promise}return{modals:e,addModal:a}}]}])}(),function(){"use strict";var t=angular.module("artisan");t.directive("nav",["$parse","Nav",function(t,e){return{restrict:"A",templateUrl:function(t,e){return e.template||"artisan/nav/nav"},scope:{items:"=nav"},link:function(n,r,o,i){n.$watch("items",function(r){if(r)if(angular.isArray(r)){var i=t(o.onLink)(n.$parent),a=t(o.onNav)(n.$parent),s=new e({onLink:i,onNav:a});s.setItems(r),n.item=s}else r instanceof e&&(n.item=r)})}}}]),t.directive("navItem",["$timeout","Events",function(t,e){return{restrict:"A",templateUrl:function(t,e){return e.template||"artisan/nav/nav-item"},scope:{item:"=navItem"},link:function(n,r,o,i){function a(e,n){var r=e.$nav.state;r.active=!0,t(function(){r.immediate=n,r.closed=r.closing=!1,r.opening=!0,t(function(){r.opening=!1,r.opened=!0})})}function s(e,n){var r=e.$nav.state;r.active=!1,t(function(){r.immediate=n,r.opened=r.opening=!1,r.closing=!0,t(function(){r.closing=!1,r.closed=!0})}),e.items&&angular.forEach(e.items,function(t){s(t,!0)})}function l(t){var e=t.$nav.state;e.active=!t.items||!e.active,e.active?(t.$nav.parent&&angular.forEach(t.$nav.parent.items,function(e){e!==t&&s(e,!0)}),a(t)):s(t)}function c(e){function r(){t(function(){l(o)})}var o=n.item;if(o.$nav.state.active)h=!1,r();else if(o.$nav.onNav){var i=o.$nav.onNav(o,o.$nav);i&&"function"==typeof i.then?(i.then(function(t){r()},function(t){}),h=!1):(h=i,r())}}function u(t){return f(t)}function f(t){if(!1===h)return t.stop(),!1}var h,d=angular.element(r[0].querySelector(".nav-link"));new e(d).add({down:c,click:u},n)}}}]),t.directive("navTo",["$parse","$timeout","Events",function(t,e,n){return{restrict:"A",link:function(r,o,i){function a(n){return console.log("navTo.onDown",i.navTo),e(function(){t(i.navTo)(r)}),n.preventDefault(),!1}new n(o).add({down:a},r)}}}])}(),function(){"use strict";angular.module("artisan").factory("Nav",["Silent",function(t){function e(t){var e=this,n={items:[]};angular.extend(e,n),t&&angular.extend(e,t),e.setNav(e,null)}function n(e){t.silent(e)}function r(e){t.path(e)}function o(e){var n=this;n.path=t.path(),n.items=e,n.setNavs(e,n)}function i(t,e){var n=this;t&&angular.forEach(t,function(t){n.setNav(t,e),n.setNavs(t.items,t)})}function a(t,e){var n=this,r={parent:e||null,level:e?e.$nav.level+1:0,state:{},addItems:function(e){n.addItems(e,t)},onNav:n.onNav};if(t.$nav=r,r.link=n.getLink(t),r.link===n.path)for(r.state.active=!0,r.state.opened=!0;r.parent;)r=r.parent.$nav,r.state.active=!0,r.state.opened=!0}function s(t,e){var n=this;angular.isArray(t)?angular.forEach(t,function(t){n.addItem(t,e)}):n.addItem(t,e)}function l(t,e){var n=this;n.onLink,n.onNav,n.setNav(t,e),e&&(e.items=e.items||[],e.items.push(t))}function c(t){return this.onLink?this.onLink(t,t.$nav):t.link}var u={silent:n,path:r},f={addItem:l,addItems:s,getLink:c,setItems:o,setNav:a,setNavs:i};return angular.extend(e,u),angular.extend(e.prototype,f),e}])}(),function(){"use strict";window.ondragstart=function(){return!1};var t=angular.module("artisan");t.directive("scrollableX",["$parse","$compile","$timeout","Scrollable","Animate","Style","Events","Utils",function(t,e,n,r,o,i,a,s){return{restrict:"A",template:'<div class="scrollable-content" ng-transclude></div>',transclude:!0,link:function(e,n,s,l){function c(t){I.setContainer($),I.setContent(E),I.setEnabled(g());var e=(I.renderX(),I.getCurrent());S.transform("translate3d("+e.x.toFixed(2)+"px,0,0)"),S.set(E)}function u(t){I.dragStart(t.absolute)&&(y(),M.play(),t.stop())}function f(t){I.dragMove(t.absolute);var e=I.getDrag();Math.abs(e.y)>Math.abs(e.x)?h(t):t.stop()}function h(t){I.dragEnd(t.absolute),t.stop(),w()}function d(t,e){return I.wheelX(t,e)}function p(t){I.wheelXCheck(t.dir)&&(C(t.dir,t.interval),M.play(),t.stop())}function m(){w(),I.off()}function g(){var t=!0;return k&&(t=t&&k(e)),t=t&&window.innerWidth>=1024,t=t&&$.offsetWidth<E.offsetWidth}function v(){g()||m(),c()}function y(){R.add({move:f,up:h},e)}function w(){R.remove({move:f,up:h})}var x,b,k;s.onLeft&&(x=t(s.onLeft)),s.onRight&&(b=t(s.onRight)),s.showIndicatorFor&&t(s.showIndicatorFor),s.scrollableWhen&&(k=t(s.scrollableWhen)),n.attr("unselectable","on").addClass("unselectable");var $=n[0],E=$.querySelector(".scrollable-content"),T=angular.element(T),S=new i,M=new o(c),I=s.scrollableX?t(s.scrollableX)(e):new r;!function(t){t.link({getItems:function(){if(s.scrollableItem)return $.querySelectorAll(s.scrollableItem)},prev:function(){t.scrollPrev(),M.play()},next:function(){t.scrollNext(),M.play()},reset:function(){t.doReset(),M.play()},onLeft:x,onRight:b})}(I);var C=d;e.$watch(function(){return E.offsetWidth},function(t,e){v()});var R=(new a(n).add({down:u,wheel:p},e),new a(window).add({resize:v},e))
;e.$on("$destroy",function(){M.pause()})}}}]),t.directive("scrollableY",["$parse","$compile","$timeout","Scrollable","Animate","Style","Events","Utils",function(t,e,n,r,o,i,a,s){return{restrict:"A",template:'<div class="scrollable-content" ng-transclude></div>',transclude:!0,link:function(e,n,s,l){function c(t){I.setContainer($),I.setContent(E),I.setEnabled(g());var e=(I.renderY(),I.getCurrent());S.transform("translate3d(0,"+e.y.toFixed(2)+"px,0)"),S.set(E)}function u(t){I.dragStart(t.absolute)&&(y(),M.play(),t.stop())}function f(t){I.dragMove(t.absolute);var e=I.getDrag();Math.abs(e.x)>Math.abs(e.y)?h(t):t.stop()}function h(t){I.dragEnd(t.absolute),t.stop(),w()}function d(t,e){return I.wheelY(t,e)}function p(t){I.wheelYCheck(t.dir)&&(C(t.dir,t.interval),M.play(),t.stop())}function m(){w(),I.off()}function g(){var t=!0;return k&&(t=t&&k(e)),t=t&&window.innerWidth>=1024,t=t&&$.offsetHeight<E.offsetHeight}function v(){g()||m(),c()}function y(){R.add({move:f,up:h},e)}function w(){R.remove({move:f,up:h})}var x,b,k;s.onTop&&(x=t(s.onTop)),s.onBottom&&(b=t(s.onBottom)),s.showIndicatorFor&&t(s.showIndicatorFor),s.scrollableWhen&&(k=t(s.scrollableWhen)),n.attr("unselectable","on").addClass("unselectable");var $=n[0],E=$.querySelector(".scrollable-content"),T=angular.element(T),S=new i,M=new o(c),I=s.scrollableY?t(s.scrollableY)(e):new r;!function(t){t.link({getItems:function(){if(s.scrollableItem)return $.querySelectorAll(s.scrollableItem)},prev:function(){t.scrollPrev(),M.play()},next:function(){t.scrollNext(),M.play()},reset:function(){t.doReset(),M.play()},onTop:x,onBottom:b})}(I);var C=d;e.$watch(function(){return E.offsetHeight},function(t,e){v()});var R=(new a(n).add({down:u,wheel:p},e),new a(window).add({resize:v},e));e.$on("$destroy",function(){M.pause()})}}}])}(),function(){"use strict";angular.module("artisan").factory("Scrollable",["Utils","Point","Rect",function(t,e,n){function r(){function t(t){Z.width=t.offsetWidth,Z.height=t.offsetHeight}function r(t){K.width=t.offsetWidth,K.height=t.offsetHeight}function o(t){P=t}function i(){return W}function a(){return X}function s(){return H}function l(){return D}function c(t){if(t!==D){D=t;var n=d(t);return n&&(G=new e(n.offsetLeft,n.offsetTop)),!0}}function u(t){return!O&&(U.x=Y.x=W.x,U.y=Y.y=W.y,J.x=0,J.y=0,z=t,D=-1,B=!1,!0)}function f(t){q=F,F=t,X.x=F.x-z.x,X.y=F.y-z.y,j=!0}function h(){F&&q&&(J.x+=4*(F.x-q.x),J.y+=4*(F.y-q.y)),U.x=Y.x=W.x,U.y=Y.y=W.y,j=!1,F=null,z=null,q=null}function d(t){var e=null,n=tt.getItems();return n&&t>=0&&t<n.length&&(e=n[t]),e}function p(){var t=Math.max(0,D-1);console.log("scrollPrev",t),c(t)}function m(){var t=tt.getItems(),e=Math.min(t.length-1,D+1);console.log("scrollNext",e),c(e)}function g(){Y.x=W.x=0}function v(){j=!1,B=!1,F=null,z=null}function y(t){O||tt.onLeft&&(O=!0,tt.onLeft(t).then().finally(function(){T(0)}))}function w(t){O||tt.onRight&&(O=!0,tt.onRight(t).then().finally(function(){Z.width-K.width>Q.width?U.x=Y.x=Q.width:U.x=Y.x=Q.width+V,T(0)}))}function x(){var t=!0;return P?(Q.x=0,Q.width=Z.width-K.width,j?(Y.x=U.x+F.x-z.x,b()&&(U.x=Y.x,z.x=F.x)):J.x?(Y.x+=J.x,J.x*=.75,B&&b(),Math.abs(J.x)<2.05&&(J.x=0,tt.wheeling=B=!1,k())):G&&(Y.x=-G.x,G=null),Y.x=Math.round(1e4*Y.x)/1e4,Y.x=Math.min(Q.x,Y.x),Y.x=Math.max(Q.width,Y.x),W.x+=(Y.x-W.x)/4,0===J.x&&Math.abs(Y.x-W.x)<.05&&(W.x=Y.x,k()||(t=!1))):(W.x=Y.x=0,t=!1),t}function b(){var t=!1;return Q.x+=V,Q.width-=V,Y.x>Q.x?(t=!0,y()):Y.x<Q.width&&(t=!0,w()),t}function k(){var t=tt.getItems();if(t){var e=-1,n=Number.POSITIVE_INFINITY;if(angular.forEach(t,function(t,r){var o=Math.abs(Y.x+J.x- -1*t.offsetLeft);o<n&&(n=o,e=r)}),-1!==e){if(_)return c(e);D=e}}}function $(t){return!(O||!P)&&(t<0?Y.x-Q.width:Y.x-Q.x)}function E(t,e){Y.x+=100*t/1e3*e,J.x+=100*t/1e3*e,B=!0}function T(t){U.x=Y.x=t,setTimeout(function(){v(),O=!1},500)}function S(t){O||tt.onTop&&(O=!0,tt.onTop(t).then().finally(function(){L(0)}))}function M(t){O||tt.onBottom&&(O=!0,tt.onBottom(t).then().finally(function(){Z.height-K.height>Q.height?U.y=Y.y=Q.height:U.y=Y.y=Q.height+V,L(0)}))}function I(){var t=!0;return P?(Q.y=0,Q.height=Z.height-K.height,j?(Y.y=U.y+F.y-z.y,C()&&(U.y=Y.y,z.y=F.y)):J.y?(Y.y+=J.y,J.y*=.75,B&&C(),Math.abs(J.y)<2.05&&(J.y=0,tt.wheeling=B=!1,R())):G&&(Y.y=-G.y,G=null),Y.y=Math.round(1e4*Y.y)/1e4,Y.y=Math.min(Q.y,Y.y),Y.y=Math.max(Q.height,Y.y),W.y+=(Y.y-W.y)/4,0===J.y&&Math.abs(Y.y-W.y)<.05&&(W.y=Y.y,R()||(t=!1))):(W.y=Y.y=0,t=!1),t}function C(){var t=!1;return Q.y+=V,Q.height-=V,Y.y>Q.y?(t=!0,S()):Y.y<Q.height&&(t=!0,M()),t}function R(){var t=tt.getItems();if(t){var e=-1,n=Number.POSITIVE_INFINITY;if(angular.forEach(t,function(t,r){var o=Math.abs(Y.y+J.y- -1*t.offsetTop);o<n&&(n=o,e=r)}),-1!==e){if(_)return c(e);D=e}}}function A(t){return!(O||!P)&&(t<0?Y.y-Q.height:Y.y-Q.y)}function N(t,e){Y.y+=100*t/1e3*e,J.y+=100*t/1e3*e,B=!0}function L(t){U.y=Y.y=t,setTimeout(function(){v(),O=!1},500)}var P,_,O,j,B,z,F,q,V=150,D=0;_=!0;var U=new e,Y=new e,W=new e,X=new e,H=new e,G=new e,J=new e,Z=new n,K=new n,Q=new n,tt={start:U,end:Y,current:W,indicator:H,speed:J,overflow:Q,container:Z,content:K,setContainer:t,setContent:r,setEnabled:o,getCurrent:i,getDrag:a,getIndicator:s,getIndex:l,scrollToIndex:c,scrollPrev:p,scrollNext:m,dragStart:u,dragMove:f,dragEnd:h,doReset:g,off:v,doLeft:y,doRight:w,renderX:x,scrollToX:T,wheelX:E,wheelXCheck:$,doTop:S,doBottom:M,renderY:I,scrollToY:L,wheelY:N,wheelYCheck:A};angular.extend(this,tt),tt=this}function o(t){angular.extend(this,t)}return r.prototype={link:o,getItems:function(){return[content]}},r}])}(),function(){"use strict";angular.module("artisan").directive("videoSource",["$timeout",function(t){return{restrict:"A",scope:{source:"=videoSource",image:"=videoImage"},templateUrl:function(t,e){return e.template||"artisan/video/video-player"},link:function(e,n,r){function o(){e.busy||(e.busy=!0,e.playing?p.pause():p.play())}function i(){e.busy||(e.busy=!0,p.play())}function a(){e.busy||(e.busy=!0,p.pause())}function s(n){t(function(){e.playing=!0,e.busy=!1})}function l(n){t(function(){e.playing=!1,e.busy=!1})}function c(n){t(function(){e.playing=!1,e.busy=!1})}function u(e){t(function(){m.buffered=p.buffered,console.log("onProgress",m)})}function f(e){t(function(){m.duration=p.duration,m.currentTime=p.currentTime,m.progressTime=m.currentTime/m.duration,console.log("onTimeUpdate",m)})}function h(){g.off("playing",s),g.off("pause",l),g.off("ended",c),g.off("progress",u),g.off("timeupdate",f)}var d=n[0],p=d.querySelector("video"),m=(d.querySelector("img"),{});e.playing=!1,e.busy=!1,e.toggle=o,e.play=i,e.pause=a,e.infos=m;var g=angular.element(p);!function(){g.on("playing",s),g.on("pause",l),g.on("ended",c),g.on("progress",u),g.on("timeupdate",f)}(),e.$on("destroy",function(){h()})}}}])}(),function(){"use strict";function t(t){function e(e,n,r,o){function i(t){n.removeClass("interaction-animate"),n.offsetWidth,a.style.left=t.relative.x+"px",a.style.top=t.relative.y+"px",setTimeout(function(){n.addClass("interaction-animate"),setTimeout(function(){n.removeClass("interaction-animate")},1e3)},10)}if(!r.ngBind){n.addClass("interaction-tap");var a=document.createElement("interaction");n[0].appendChild(a);var s={down:i};new t(n).add(s,e)}}return{restrict:"A",priority:0,link:e}}var e=angular.module("artisan");e.directive("ngHref",["Events",t]),e.directive("ngClick",["Events",t])}();
//# sourceMappingURL=artisan.min.js.map
